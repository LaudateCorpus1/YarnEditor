(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{0:function(e,t){},1:function(e,t){},10:function(e,t){},"1mrn":function(e,t,n){},2:function(e,t){},"2Qx2":function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return l}));var o=n("W2Rx"),r=n("oj90");const s=n("33yf"),a=n("Iab2"),l={editingPath:e.observable(null),editingName:e.observable("NewFile"),editingType:e.observable("json"),editingFolder:e.observable(null),documentHeader:e.observable(null),isDocumentDirty:e.observable(!1),restoreFromLocalStorage:e.observable(!0),lastStorageHost:e.observable("LOCAL"),editingFileFolder:function(e=""){const t=l.editingPath()?l.editingPath():"";return e.length>0?s.join(s.dirname(t),e):s.dirname(t)},startNewFile:function(e="NewFile",t="json"){l.editingPath(null),l.editingName(e),l.editingType(t),l.editingFolder(null),l.documentHeader(null),app.workspace.selectedNodes=[],app.editing(null),app.nodes([app.newNode(!0).title("Start")]),app.tags([]),app.updateNodeLinks(),app.workspace.warpToNodeByIdx(0),l.lastStorageHost("LOCAL"),l.isDocumentDirty(!0),app.refreshWindowTitle();const n=new CustomEvent("newYarnFileStarted");window.parent.dispatchEvent(n)},askForFileName:function(){Swal.fire({title:"Enter a New File Name",input:"text",inputPlaceholder:"NewFile",showCancelButton:!0}).then(e=>{(e.value||""===e.value)&&l.startNewFile(e.value||"NewFile")})},setNewFile:function(){Swal.fire({title:"Create a New File?",text:`Any unsaved progress to ${l.editingName()}.${l.editingType()} will be lost!`,icon:"warning",showCancelButton:!0,confirmButtonText:"New file",cancelButtonText:"No, cancel!"}).then(e=>{e.value&&l.askForFileName()})},saveAppStateToLocalStorage:function(){if(!l.restoreFromLocalStorage())return;const e=app.settings.storage;l.isDocumentDirty(!0),app.refreshWindowTitle(),console.log("Update storage",app.plugins.pluginStorage()),e.setItem("appState",JSON.stringify({editingPath:l.editingPath(),editingName:l.editingName(),editingType:l.editingType(),editingFolder:l.editingFolder(),editingTitle:app.editing()?app.editing().title():null,nodes:l.getNodesAsObjects(),documentHeader:l.documentHeader(),tags:app.tags(),editorSelection:app.editor?app.editor.selection.getRange():null,transform:app.workspace.transform,scale:app.workspace.scale,lastStorageHost:l.lastStorageHost(),pluginStorage:app.plugins.pluginStorage()}))},loadAppStateFromLocalStorage:function(){if(!l.restoreFromLocalStorage())return;const e=app.settings.storage,t=JSON.parse(e.getItem("appState"));if(t){const{editingPath:e,lastStorageHost:n,editingName:i,editingType:o,editingFolder:r,editingTitle:s,editorSelection:a,nodes:d,documentHeader:c,tags:h,transform:u,scale:p,pluginStorage:f}=t;l.editingPath(e),l.editingName(i),l.editingType(o),l.editingFolder(r),l.lastStorageHost(n),app.nodes([]),l.getNodesFromObjects(d).forEach(e=>app.nodes.push(e)),app.tags(h),app.updateNodeLinks(),app.workspace.setTranslation(u.x,u.y),app.workspace.setZoom(4*p),s&&(app.editNode(app.nodes().find(e=>e.title()===s)),a&&app.editor.selection.setRange(a)),app.plugins.pluginStorage(f),l.documentHeader(c),l.isDocumentDirty(!0),app.refreshWindowTitle()}},readFile:function(e,t,n){var i=new FileReader;i.onload=function(o){var s=l.getFileType(t);s==r.FILETYPE.UNKNOWN?Swal.fire({title:"Unknown filetype!",icon:"error"}):(l.editingPath(e.path),l.editingType(s),l.loadData(i.result,s,n))},i.readAsText(e)},setNewFileStats:function(e,t,n="LOCAL"){l.editingName(e.replace(/^.*[\\\/]/,"")),l.isDocumentDirty(!1),l.editingPath(t),l.lastStorageHost(n),app.refreshWindowTitle()},openFile:function(e,t){const n=l.editingPath()?"Any unsaved progress to "+l.editingName()+" will be lost.":"Any unsaved progress will be lost.";Swal.fire({title:"Are you sure you want to open another file?",text:n,icon:"warning",showConfirmButton:!0,showCancelButton:!0}).then(n=>{!0===n.value&&(l.readFile(e,t,!0),l.setNewFileStats(t,e.path),app.refreshWindowTitle())})},openFileFromFilePath:function(e){const t=app.path.basename(e);i.ajax({url:e,async:!1,success:n=>{const i=l.getFileType(t);i==r.FILETYPE.UNKNOWN?Swal.fire({title:"Unknown filetype!",icon:"error"}):(l.loadData(n,i,!0),l.setNewFileStats(t,e))}})},openFiles:function(e,t){const n=document.getElementById("open-file").files;Object.entries(n).forEach(([e,t])=>{"0"===e?l.openFile(t,t.name):l.appendFile(t,t.name)})},openFolder:function(e,t){editingFolder=t,Swal.fire({text:"openFolder not yet implemented e: "+e+" foldername: "+t,icon:"error"})},appendFile:function(e,t){l.readFile(e,t,!1)},getFileType:function(e){const t=e.toLowerCase();return t.endsWith(".json")?r.FILETYPE.JSON:t.endsWith(".yarn.txt")||t.endsWith(".yarn")?r.FILETYPE.YARN:t.endsWith(".xml")?r.FILETYPE.XML:t.endsWith(".txt")?r.FILETYPE.TWEE:t.endsWith(".tw2")||t.endsWith(".twee")?r.FILETYPE.TWEE2:r.FILETYPE.UNKNOWN},dispatchEventDataLoaded:function(){var e=new CustomEvent("yarnLoadedData");e.document=document,e.data=l,e.app=app,window.parent.dispatchEvent(e)},restoreSettingsFromDocumentHeader:function(){if(null!==l.documentHeader()){const e=l.documentHeader();console.log("RESTORE data from header:",e),"markupLanguage"in e&&app.settings.markupLanguage(e.markupLanguage),"language"in e&&app.settings.language(e.language),"filetypeVersion"in e&&app.settings.filetypeVersion(e.filetypeVersion),app.settings.apply()}},loadData:function(e,t,n){const i=[],o=e=>{for(let t=0;t<e.length;t++)"title"in e[t]&&i.push(e[t])};if(t==r.FILETYPE.JSON){if(!(e=JSON.parse(e)))return;Array.isArray(e)?o(e):(l.documentHeader(e.header),o(e.nodes))}else if(t==r.FILETYPE.YARN){var s=e.split(/\r?\n/),a=null,d=!1;for(let e=0;e<s.length;e++)if("==="===s[e].trim())d=!1,null!=a&&(i.push(a),a=null);else if(d)a.body+=s[e]+"\n";else if(s[e].indexOf("title:")>-1)null==a&&(a={}),a.title=s[e].substr(7,s[e].length-7);else if(s[e].indexOf("position:")>-1){null==a&&(a={});var c=s[e].substr(9,s[e].length-9).split(",");a.position={x:Number(c[0].trim()),y:Number(c[1].trim())}}else s[e].indexOf("colorID:")>-1?(null==a&&(a={}),a.colorID=Number(s[e].substr(9,s[e].length-9).trim())):s[e].indexOf("tags:")>-1?(null==a&&(a={}),a.tags=s[e].substr(6,s[e].length-6)):"---"==s[e].trim()&&(d=!0,a.body="");null!=a&&i.push(a)}else if(t==r.FILETYPE.TWEE||t==r.FILETYPE.TWEE2){s=e.split("\n"),a=null;for(var h=0,u=0;u<s.length;u++)if(s[u]=s[u].trim(),"::"==s[u].substr(0,2)){null!=a&&i.push(a),a={};var p="",f="",m={x:80*++h,y:80*h},g=s[u].indexOf("["),v=s[u].indexOf("]");g>0&&v>0&&(f=s[u].substr(g+1,v-g-1));var y=s[u].indexOf("<"),b=s[u].indexOf(">");if(y>0&&b>0){var x=s[u].substr(y+1,b-y-1).split(",");m.x=parseInt(x[0]),m.y=parseInt(x[1])}var C=0;g>0?C=g:y>0&&(C=y),p=(p=C?s[u].substr(3,C-3):s[u].substr(3)).trim(),a.title=p,a.tags=f,a.body="",a.position=m}else null!=a&&(a.body.length>0&&(s[u]+="\n"),a.body+=s[u]);null!=a&&i.push(a)}else if(t==r.FILETYPE.XML){var w=(new DOMParser).parseFromString(e,"text/xml");if(null!=(e=r.Utils.xmlToObject(w)))for(let t=0;t<e.length;t++)i.push(e[t])}app.limitNodesUpdate(()=>{n&&app.nodes.removeAll(),l.getNodesFromObjects(i).forEach(e=>app.nodes.push(e))}),l.restoreSettingsFromDocumentHeader(),app.updateNodeLinks(),app.workspace.warpToNodeByIdx(0),l.isDocumentDirty(!1),l.dispatchEventDataLoaded()},getNodeFromObject:function(e){return new o.a({title:e.title,body:e.body,tags:e.tags,colorID:e.colorID,x:parseInt(e.position.x),y:parseInt(e.position.y)})},getNodeAsObject:function(e){return{title:e.title(),tags:e.tags(),body:e.body(),position:{x:e.x(),y:e.y()},colorID:e.colorID()}},getNodesFromObjects:function(e){const t=[];return e?(e.forEach(e=>{t.push(l.getNodeFromObject(e))}),t):[]},getNodesAsObjects:function(){const e=[],t=app.nodes();for(var n=0;n<t.length;n++)e.push(l.getNodeAsObject(t[n]));return e},getSaveData:function(e){var t="",n=l.getNodesAsObjects();if(e==r.FILETYPE.JSON)if(console.log(app.settings.filetypeVersion()),"2"===app.settings.filetypeVersion()){console.log("Saving as Yarn json v2 type");const e=new Date;l.documentHeader({...l.documentHeader(),lastSavedUnix:e,language:app.settings.language(),markupLanguage:app.settings.markupLanguage(),filetypeVersion:app.settings.filetypeVersion(),pluginStorage:app.plugins.pluginStorage()}),t=JSON.stringify({header:l.documentHeader(),nodes:n},null,"\t")}else t=JSON.stringify(n,null,"\t");else if(e==r.FILETYPE.YARN)for(let e=0;e<n.length;e++){t+="title: "+n[e].title+"\n",t+="tags: "+n[e].tags+"\n",t+="colorID: "+n[e].colorID+"\n",t+="position: "+n[e].position.x+","+n[e].position.y+"\n",t+="---\n",t+=n[e].body;var i=n[e].body;i.length>0&&"\n"==i[i.length-1]||(t+="\n"),t+="===\n"}else if(e==r.FILETYPE.TWEE)for(let e=0;e<n.length;e++){var o="";n[e].tags.length>0&&(o=" ["+n[e].tags+"]"),t+=":: "+n[e].title+o+"\n",t+=n[e].body+"\n\n"}else if(e==r.FILETYPE.TWEE2)for(let e=0;e<n.length;e++){o="";n[e].tags.length>0&&(o=" ["+n[e].tags+"]");var s=" <"+n[e].position.x+","+n[e].position.y+">";t+=":: "+n[e].title+o+s+"\n",t+=n[e].body+"\n\n"}else if(e==r.FILETYPE.XML){t+="<nodes>\n";for(let e=0;e<n.length;e++)t+="\t<node>\n",t+="\t\t<title>"+n[e].title+"</title>\n",t+="\t\t<tags>"+n[e].tags+"</tags>\n",t+="\t\t<body>"+n[e].body+"</body>\n",t+='\t\t<position x="'+n[e].position.x+'" y="'+n[e].position.y+'"></position>\n',t+="\t\t<colorID>"+n[e].colorID+"</colorID>\n",t+="\t</node>\n";t+="</nodes>\n"}return l.isDocumentDirty(!1),app.refreshWindowTitle(),t},saveTo:function(e,t,n=null){null!=app.fs&&app.fs.writeFile(e,t,{encoding:"utf-8"},(function(t){l.editingPath(e),n&&n(),t?Swal.fire({title:"Error Saving Data to "+e+": "+t,icon:"error"}):app.ui.notification.fire({title:"Saved!",icon:"success"})}))},openFileDialog:function(e,t){e.bind("change",(function(n){t(n.currentTarget.files[0],e.val());var i="";null!=e.attr("nwsaveas")&&(i='nwsaveas="'+e.attr("nwsaveas")+'"'),null!=e.attr("accept")&&(i='accept="'+e.attr("accept")+'"'),e.parent().append('<input type="file" id="'+e.attr("id")+'"  '+i+">"),e.unbind("change"),e.remove()})),e.trigger("click")},saveFileDialog:function(e,t,n){var i=new Blob([n],{type:"text/plain;charset=utf-8"});a(i,(l.editingName()||"").replace(/\.[^/.]+$/,"")+"."+t)},insertImageFileName:function(){l.openFileDialog(i("#open-image"),(function(e,t){app.insertTextAtCursor(e.path?e.path:e.name)}))},tryOpenFile:function(){l.openFileDialog(i("#open-file"),l.openFiles)},promptFileNameAndFormat:function(e,t=null){Swal.fire({title:"💾 Save file - enter file name",html:`<input id="swal-input1" list="select-file-name" name="select" placeholder="${l.editingName()}">\n      <datalist class="form-control" id="select-file-name">    \n        ${t&&t.map(e=>`<option value="${e}" />`).join("")}\n      </datalist>`,onOpen:()=>{"NewFile"!==l.editingName()&&(document.getElementById("swal-input1").value=l.editingName())},showCancelButton:!0,preConfirm:()=>document.getElementById("swal-input1").value}).then(({value:t})=>{if(t&&""!==t){l.editingName(t);const n=l.editingType(),i=(l.editingName()||"").replace(/\.[^/.]+$/,"")+"."+n,o=l.getSaveData(n);e({editingName:i,yarnData:o})}})},tryShareFilePwa:function(e){l.promptFileNameAndFormat(({editingName:e,yarnData:t})=>{const n=[new Blob([t],{type:"text/plain"})],i=new File(n,e,{});navigator.canShare&&navigator.canShare({files:[i]})?navigator.share({title:e,text:t,file:[i]}).then(()=>console.log("Successful share")).catch(e=>console.log("Error sharing",e)):Swal.fire({title:"Web Share API is not supported in your browser.\nTry using it on your smartphone or tablet...",icon:"error"})})},trySaveGist:function(e){e&&e.file&&e.file.length>0?e.get(e.file).then(t=>{const n=Object.keys(t.body.files);console.log(n),l.promptFileNameAndFormat(({editingName:t,yarnData:n})=>{e.edit(e.file,{files:{[t]:{content:n}}}),Swal.fire("Saved!","The Yarn has been saved to gist "+e.file,"success"),l.lastStorageHost("GIST"),l.isDocumentDirty(!1),app.refreshWindowTitle()},n)}):(Swal.fire("Not configured","Your github settings are not configured","warning"),app.ui.openSettingsDialog())},tryOpenGist:function(e){e&&e.file&&e.file.length>0?e.get(e.file).then(e=>{const t=e.body.files,n={};Object.keys(t).forEach(e=>{n[e]=e}),Swal.fire({title:"🐙 Open file from a gist",input:"select",inputOptions:n,inputAttributes:{autocomplete:"off"},inputPlaceholder:"Select a file from the gist",showCancelButton:!0}).then(({value:e})=>{if(e){const n=t[e].content,i=l.getFileType(e);l.loadData(n,i,!0),l.isDocumentDirty(!1),l.lastStorageHost("GIST"),l.editingPath(null),l.editingName(e),app.refreshWindowTitle()}})}):(Swal.fire("Not configured","Your github settings are not configured","warning"),app.ui.openSettingsDialog())},tryOpenFolder:function(){l.openFileDialog(i("#open-folder"),l.openFolder)},tryAppend:function(){l.openFileDialog(i("#open-file"),l.appendFile)},save:function(){app.editingVisualStudioCodeFile()||(l.editingPath()?l.trySaveCurrent():l.trySave(r.FILETYPE.JSON))},trySave:function(e){l.editingType(e),l.saveFileDialog(i("#save-file"),e,l.getSaveData(e))},trySaveCurrent:function(){if(l.isDocumentDirty())if("GIST"===l.lastStorageHost()){const e=app.gists;e.get(e.file).then(t=>{const n=l.getSaveData(l.editingType());console.log(l.editingName()),e.edit(e.file,{files:{[l.editingName()]:{content:n}}}),l.lastStorageHost("GIST"),l.isDocumentDirty(!1),app.refreshWindowTitle()})}else l.editingPath()?l.editingPath().length>0&&l.editingType().length>0&&l.saveTo(l.editingPath(),l.getSaveData(l.editingType())):app.gists&&app.gists.options.token?l.trySaveGist(app.gists):l.trySave(r.FILETYPE.JSON)},doesFileExist:function(e){return!1},triggerPasteClipboard:function(){if(app.electron){const e=app.electron.clipboard.readText();app.clipboard=e,document.execCommand("paste")}else navigator.clipboard&&navigator.clipboard.readText().then(e=>{app.clipboard=e}).catch(e=>{app.clipboard=app.editor.getSelectedText(),console.log("No clipboard access",e,"using local instead")}),setTimeout(()=>app.insertTextAtCursor(app.clipboard),100)},triggerCopyClipboard:function(){if(app.electron)app.electron.clipboard.writeText(app.editor.getSelectedText()),app.clipboard=app.editor.getSelectedText();else{const e=app.editor.getSelectedText();app.clipboard=e,navigator.clipboard&&e.length>0&&navigator.clipboard.writeText(e).then(()=>{app.clipboard=e})}}}}).call(this,n("Z1dp"),n("EVdn"))},3:function(e,t){},4:function(e,t){},5:function(e,t){},"5aMW":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var i=n("tUqF"),o=function({app:t,createButton:n,addSettingsItem:o,getPluginStore:r,onYarnEditorOpen:s,onLoad:a}){const l=this;t.plugins.runner=l,this.name="Runner",this.previewStory=new i.a,this.togglePreviewMode=function(n){const i=e(".editor")[0],o=e("#editor-preview")[0];t.isEditorInPreviewMode=n,n?(l.isEditorInPlayMode&&(l.togglePlayMode(!1),l.gotoLastPlayNode()),e(".bbcode-toolbar").addClass("hidden"),i.style.display="none",o.style.display="block",o.innerHTML=l.richTextFormatter.richTextToHtml(l.editing().body(),!0),o.scrollTop=l.editor.renderer.scrollTop):(e(".bbcode-toolbar").removeClass("hidden"),t.editor.session.setScrollTop(o.scrollTop),o.innerHTML="",o.style.display="none",i.style.display="flex",t.editor.focus(),t.editor.resize(),e("#colorPicker-container").is(":visible")&&e("#colorPicker-container").hide(),e("#emojiPicker-container").is(":visible")&&e("#emojiPicker-container").hide())},this.gotoLastPlayNode=function(){t.editing()&&t.editing().title()!==l.previewStory.node.title&&t.openNodeByTitle(l.previewStory.node.title),t.editor.focus()},this.advanceStoryPlayMode=function(e=5){l.previewStory.finished?(l.togglePlayMode(!1),l.gotoLastPlayNode()):(l.previewStory.changeTextScrollSpeed(e),-1!=l.previewStory.vnSelectedChoice&&5===e&&l.previewStory.vnSelectChoice())},this.togglePlayMode=function(n=!1){var i=e(".editor")[0],o=document.getElementById("storyPlayButton"),s=document.getElementById("editor-play");if(l.isEditorInPlayMode=n,n){l.togglePreviewMode(!1),i.style.display="none",s.style.display="flex",e(o).addClass("disabled"),e(".toggle-toolbar").addClass("hidden"),e(".editor-counter").addClass("hidden"),l.previewStory.emiter.on("finished",(function(){l.togglePlayMode(!1),l.gotoLastPlayNode()})),l.previewStory.emiter.on("startedNode",(function(e){t.isEditorSplit&&t.workspace.warpToNode(t.getFirstFoundNode(e.title.toLowerCase().trim()))}));const n=r("VarStore");l.previewStory.initYarn(JSON.parse(t.data.getSaveData("json")),t.editing().title().trim(),"NVrichTextLabel",!1,"commandDebugLabel",t.settings.playtestStyle(),n.variables||{})}else t.editor.session.setScrollTop(s.scrollTop),s.style.display="none",i.style.display="flex",e(o).removeClass("disabled"),e(".toggle-toolbar").removeClass("hidden"),e(".editor-counter").removeClass("hidden"),l.previewStory.terminate()},a(()=>{o({title:"Playtesting Style",valueKey:"playtestStyle",defaultValue:"chat",optionsKey:"availablePlaytestStyles",options:[{id:"npc",name:"Npc bubble"},{id:"chat",name:"Chat messages"}],setterKey:"setPlaytestStyle",settingsColumn:"A"})}),document.addEventListener("yarnSavedNode",()=>{l.previewStory.terminate()}),s(()=>{n(l.name,{icon:"play",title:"Preview",attachTo:"bbcodeToolbar",onClick:"togglePlayMode(true)",className:"bbcode-button bbcode-button-right"});const i=document.createElement("div");i.innerHTML=`\n      <div class="editor-play" id="editor-play" onpointerdown="app.plugins.${l.name}.advanceStoryPlayMode(30)" ondblclick="app.plugins.${l.name}.advanceStoryPlayMode()">\n          <p class="story-playtest-answer" id="NVrichTextLabel"></p>\n          <div id="commandDebugLabel"></div>\n      </div>\n    `,document.getElementById("editorContainer").appendChild(i),e(document).on("keydown",e=>{if(t.editing()&&!l.previewStory.finished)switch(e.keyCode){case t.input.keys.Z:l.previewStory.changeTextScrollSpeed(10),-1!=l.previewStory.vnSelectedChoice&&l.previewStory.vnSelectChoice();break;case t.input.keys.Up:-1!=l.previewStory.vnSelectedChoice&&l.previewStory.vnUpdateChoice(-1);break;case t.input.keys.Down:-1!=l.previewStory.vnSelectedChoice&&l.previewStory.vnUpdateChoice(1)}}),e(document).on("keyup",(function(e){e.keyCode===t.input.keys.Z&&(l.previewStory.changeTextScrollSpeed(200),-1!=l.previewStory.vnSelectedChoice&&l.previewStory.vnSelectChoice())}))})}}).call(this,n("EVdn"))},"5dEm":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var i=n("oj90");const o=function(t){const n=this,o={toast:!0,position:"bottom",icon:"error",title:"Alignment requires two or more nodes be selected.",showConfirmButton:!1,timer:3500,timerProgressBar:!0};this.canvas=e(".arrows")[0],this.context=n.canvas.getContext("2d"),this.gridCanvas=e("#grid-canvas")[0],this.gridContext=n.gridCanvas.getContext("2d"),this.gridEnabled=!0,this.updateArrowsThrottle=50,this.updateArrowsInterval=void 0,this.deferredArrowsDrawInterval=void 0,this.nextArrowsUpdate=Number.NEGATIVE_INFINITY,this.isDrawingArrows=!1,this.selectedNodes=[],this.scale=1,this.offset={x:0,y:0},this.transform={x:0,y:0},this.isMarqueeEnabled=!1,this.marqueeSelection=[],this.marqueeRect={x1:0,y1:0,x2:0,y2:0},this.marqueeOffset=[0,0],this.zoomSpeed=.005,this.zoomLimitMin=.05,this.zoomLimitMax=1,this.setThrottle=function(e,t){const o=t?t.target.value:e;n.updateArrowsThrottle=i.Utils.clamp(o,16,250)},this.setTranslation=function(e,t,i=0){n.transform.x=e,n.transform.y=t,n.translate(i)},this.shiftTranslation=function(e,t,i=0){n.setTranslation(n.transform.x+e,n.transform.y+t,i)},this.translate=function(t){t&&n.startUpdatingArrows(),e(".nodes-holder").finish().transition({transform:"matrix("+n.scale+",0,0,"+n.scale+","+n.transform.x+","+n.transform.y+")"},t||0,"easeInQuad",(function(){t&&n.stopUpdatingArrows(),n.updateArrows(),n.updateGrid()}))},this.toWorkspaceCoordinates=(e,i)=>t.settings.snapGridEnabled()?{x:n.stepify((e-n.transform.x)/n.scale,t.settings.gridSize()),y:n.stepify((i-n.transform.y)/n.scale,t.settings.gridSize())}:{x:(e-n.transform.x)/n.scale,y:(i-n.transform.y)/n.scale},this.onPanLeft=function(){n.shiftTranslation(n.getPanAmount(),0,100)},this.onPanRight=function(){n.shiftTranslation(-n.getPanAmount(),0,100)},this.onPanUp=function(){n.shiftTranslation(0,n.getPanAmount(),100)},this.onPanDown=function(){n.shiftTranslation(0,-n.getPanAmount(),100)},this.getPanAmount=function(){return t.input.isShiftDown?100*n.scale:500*n.scale},this.setZoom=function(e){n.scale=e/4,n.translate(200)},this.onZoom=function(e,t,o){const r=n.scale,s=o*n.zoomSpeed*n.scale;n.scale=i.Utils.clamp(n.scale+s,n.zoomLimitMin,n.zoomLimitMax);const a=e-n.transform.x,l=t-n.transform.y,d=a-a*(n.scale/r),c=l-l*(n.scale/r);n.shiftTranslation(d,c)},this.onDragStart=function(e){n.offset.x=e.x,n.offset.y=e.y},this.onDragUpdate=function(e){n.isMarqueeEnabled&&t.workspace.onMarqueeEnd(),t.workspace.shiftNodes(e)},this.onDragEnd=function(){t.data.saveAppStateToLocalStorage()},this.onMarqueeStart=function(e){n.isMarqueeEnabled=!0,n.offset.x=e.x,n.offset.y=e.y,n.marqueeSelection=[],n.marqueeOffset[0]=0,n.marqueeOffset[1]=0,n.marqueeRect={x1:0,y1:0,x2:0,y2:0}},this.onMarqueeUpdate=function(e){n.isMarqueeEnabled&&(n.updateMarqueeRect(e),n.selectNodesInsideMarquee())},this.updateMarqueeRect=function(t){t.x>n.offset.x&&t.y<n.offset.y?(n.marqueeRect.x1=n.offset.x,n.marqueeRect.y1=t.y,n.marqueeRect.x2=t.x,n.marqueeRect.y2=n.offset.y):t.x>n.offset.x&&t.y>n.offset.y?(n.marqueeRect.x1=n.offset.x,n.marqueeRect.y1=n.offset.y,n.marqueeRect.x2=t.x,n.marqueeRect.y2=t.y):t.x<n.offset.x&&t.y<n.offset.y?(n.marqueeRect.x1=t.x,n.marqueeRect.y1=t.y,n.marqueeRect.x2=n.offset.x,n.marqueeRect.y2=n.offset.y):(n.marqueeRect.x1=t.x,n.marqueeRect.y1=n.offset.y,n.marqueeRect.x2=n.offset.x,n.marqueeRect.y2=t.y),e("#marquee").css({display:"block",x:n.marqueeRect.x1,y:n.marqueeRect.y1,width:Math.abs(n.marqueeRect.x1-n.marqueeRect.x2),height:Math.abs(n.marqueeRect.y1-n.marqueeRect.y2)})},this.selectNodesInsideMarquee=function(){const e=n.toWorkspaceCoordinates(n.marqueeRect.x1,n.marqueeRect.y1),o=n.toWorkspaceCoordinates(n.marqueeRect.x2,n.marqueeRect.y2),r={left:e.x,right:o.x,top:e.y,bottom:o.y};t.nodes().forEach(e=>{const t=n.marqueeSelection.indexOf(e),o=t>=0,s=e.x(),a=e.y(),l={left:s,right:s+e.width,top:a,bottom:a+e.height},d=i.Utils.rectanglesOverlap(r,l);d&&!o&&(n.selectNodes(e),n.marqueeSelection.push(e)),!d&&o&&(n.deselectNodes(e),n.marqueeSelection.splice(t,1))})},this.onMarqueeEnd=function(){n.isMarqueeEnabled&&(0==n.marqueeSelection.length&&n.deselectAll(),n.isMarqueeEnabled=!1,n.marqueeSelection=[],n.marqueeRect={x1:0,y1:0,x2:0,y2:0},e("#marquee").css({display:"none",x:0,y:0,width:0,height:0}))},this.shiftNodes=function(e){const t={x:e.x-n.offset.x,y:e.y-n.offset.y};n.shiftTranslation(t.x,t.y),n.offset=e},this.updateGrid=function(){const i=e(".nodes-holder").offset(),o=t.settings.gridSize();if(n.gridContext.clearRect(0,0,n.gridCanvas.width,n.gridCanvas.height),t.settings.snapGridEnabled()){const a=e(window).width(),l=e(window).height(),d=i.left%(o*n.scale),c=i.top%(o*n.scale);n.gridContext.beginPath(),n.gridContext.lineWidth=.5;for(var r=d;r<a;r+=o*n.scale)n.gridContext.moveTo(r,0),n.gridContext.lineTo(r,l);for(var s=c;s<l;s+=o*n.scale)n.gridContext.moveTo(0,s),n.gridContext.lineTo(a,s);if(n.gridContext.stroke(),n.gridContext.closePath(),"blueprint"===t.settings.theme()){n.gridContext.beginPath(),n.gridContext.lineWidth=.25;const e=16,t=200,d=Math.round(Math.min(1,o/t)*e),c=Math.max(1,Math.round(n.scale*d)),h=o*n.scale/c,u=i.left%h,p=i.top%h;for(r=u;r<a;r+=h)n.gridContext.moveTo(r,0),n.gridContext.lineTo(r,l);for(s=p;s<l;s+=h)n.gridContext.moveTo(0,s),n.gridContext.lineTo(a,s);n.gridContext.stroke(),n.gridContext.closePath()}}},this.startUpdatingArrows=function(){n.stopUpdatingArrows(),n.updateArrowsInterval=setInterval(n.updateArrows,n.updateArrowsThrottle)},this.stopUpdatingArrows=function(){n.updateArrowsInterval&&(window.clearInterval(n.updateArrowsInterval),n.updateArrowsInterval=void 0)},this.updateArrows=function(){if(n.isDrawingArrows)return;const i=(new Date).getTime();if(i<n.nextArrowsUpdate)return void(n.deferredArrowsDrawInterval||(n.deferredArrowsDrawInterval=window.setTimeout(n.updateArrows,n.nextArrowsUpdate+n.updateArrowsThrottle-i)));n.isDrawingArrows=!0,window.clearInterval(n.deferredArrowsDrawInterval),n.deferredArrowsDrawInterval=void 0,n.nextArrowsUpdate=i+n.updateArrowsThrottle;const o=t.nodes(),r=e(".nodes-holder").offset(),s=n.scale,a=3*s,l=8*s,d=8*s,c=[],h=[];n.canvas.width=e(window).width(),n.canvas.height=e(window).height(),n.context.lineWidth=a,n.context.strokeStyle=n.context.fillStyle=e(".arrows").css("color");for(let n of o)if(n.halfWidth=e(n.element).width()/2,n.halfHeight=e(n.element).height()/2,n.linkedTo().length)if("straight"===t.settings.lineStyle()){const e=(n.x()+n.halfWidth)*s+r.left,t=(n.y()+n.halfHeight)*s+r.top;for(let i of n.linkedTo()){const n=(i.x()+i.halfWidth)*s+r.left,o=(i.y()+i.halfHeight)*s+r.top,a=Math.sqrt((e-n)*(e-n)+(t-o)*(t-o)),u={x:(n-e)/a,y:(o-t)/a},p=(110+160*(1-Math.max(Math.abs(u.x),Math.abs(u.y))))*s,f={x:e+u.x*p,y:t+u.y*p},m={x:n-u.x*p,y:o-u.y*p};c.push({x1:f.x,y1:f.y,x2:m.x,y2:m.y}),h.push({x1:m.x+10*u.x,y1:m.y+10*u.y,x2:m.x-u.x*l-u.y*d,y2:m.y-u.y*l+u.x*d,x3:m.x-u.x*l+u.y*d,y3:m.y-u.y*l-u.x*d})}}else for(let e of n.linkedTo()){const t=(n.x()+n.halfWidth)*s+r.left,i=(n.y()+n.halfHeight)*s+r.top,o=(e.x()+e.halfWidth)*s+r.left,a=(e.y()+e.halfHeight)*s+r.top,p=(360-180*Math.atan2(a-i,o-t)/Math.PI)%360;let f,m,g,v;var u=!1;p<=45||p>=315?(u=!0,f=(n.x()+n.width)*s+r.left,m=(n.y()+n.halfHeight)*s+r.top,g=e.x()*s+r.left-l,v=(e.y()+e.halfHeight)*s+r.top,h.push({x1:g+l,y1:v,x2:g-l,y2:v-d,x3:g-l,y3:v+d})):p>45&&p<135?(u=!1,f=(n.x()+n.halfWidth)*s+r.left,m=n.y()*s+r.top,g=(e.x()+e.halfWidth)*s+r.left,v=(e.y()+n.height)*s+r.top+d,h.push({x1:g,y1:v-d,x2:g-l,y2:v+d,x3:g+l,y3:v+d})):p>=135&&p<=225?(u=!0,f=n.x()*s+r.left,m=(n.y()+n.halfHeight)*s+r.top,g=(e.x()+e.width)*s+r.left+l,v=(e.y()+e.halfHeight)*s+r.top,h.push({x1:g-l,y1:v,x2:g+l,y2:v-d,x3:g+l,y3:v+d})):p>225&&p<315&&(u=!1,f=(n.x()+n.halfWidth)*s+r.left,m=(n.y()+n.height)*s+r.top,g=(e.x()+e.halfWidth)*s+r.left,v=e.y()*s+r.top-d,h.push({x1:g,y1:v+d,x2:g-l,y2:v-d,x3:g+l,y3:v-d})),c.push({x1:f,y1:m,x2:g,y2:v,drawHorizontal:u})}n.context.beginPath();for(let e of c)n.context.moveTo(e.x1,e.y1),"straight"===t.settings.lineStyle()?n.context.lineTo(e.x2,e.y2):!0===e.drawHorizontal?n.context.bezierCurveTo(e.x2,e.y1,e.x1,e.y2,e.x2,e.y2):n.context.bezierCurveTo(e.x1,e.y2,e.x2,e.y1,e.x2,e.y2);n.context.stroke(),n.context.beginPath();for(let e of h)n.context.moveTo(e.x1,e.y1),n.context.lineTo(e.x2,e.y2),n.context.lineTo(e.x3,e.y3);n.context.fill(),n.isDrawingArrows=!1},this.bringToFront=function(t){const n=e(t),o=i.Utils.getHighestZ(n.parent());n.css("z-index",o+1)},this.selectAll=function(){n.selectNodes(t.nodes())},this.deselectAll=function(){n.deselectNodes(t.nodes())},this.selectNodes=function(e){const t=Array.isArray(e)?e:[e];for(let e of t)n.selectedNodes.includes(e)||(n.selectedNodes.push(e),e.setSelected(!0))},this.deselectNodes=function(e){const t=Array.isArray(e)?e:[e];for(let e of t){const t=n.selectedNodes.indexOf(e);t>=0&&(n.selectedNodes.splice(t,1),e.setSelected(!1))}},this.getSelectedNodes=function(){return 1===n.selectedNodes.length?[n.selectedNodes[0]]:Array.apply(this,n.selectedNodes)},this.warpToNodeByIdx=function(e){n.warpToNode(t.nodes()[e]),t.focusedNodeIdx=e},this.warpToSelectedNodeByIdx=function(e){n.warpToNode(n.getSelectedNodes()[e]),t.focusedNodeIdx=e},this.warpToNode=function(e){e&&n.warpToXY(e.x()||e.createX,e.y()||e.createY)},this.warpToXY=function(i,o){const r=-i*n.scale,s=-o*n.scale,a=e(window).width()/2,l=e(window).height()/2,d=100*n.scale/2,c=100*n.scale/2;n.setTranslation(r+a-d+t.getSplitEditorXOffset(),s+l-c,100)},this.alignV=function(){if(t.input.isCtrlDown)return void n.reduceAlignV();const e=t.nodes().filter(e=>e.selected).sort((e,t)=>e.y()>t.y()?1:e.y()<t.y()?-1:0);if(e.length<2)return void Swal.fire(o);const i=e.shift();e.forEach((e,t)=>{e.moveTo(i.x(),e.y())})},this.reduceAlignV=function(){const e=t.settings.gridSize(),i=t.nodes().filter(e=>e.selected).sort((e,t)=>e.y()>t.y()?1:e.y()<t.y()?-1:0);if(i.length<2)return void Swal.fire(o);const r=i.shift();t.settings.snapGridEnabled()&&r.moveTo(n.stepify(r.x(),t.settings.gridSize()),n.stepify(r.y(),t.settings.gridSize()));const s=e-(r.y()+r.height)%e+e;i.forEach((e,n)=>{const i=t.settings.snapGridEnabled()?r.y()+e.height*(n+1)+s*(n+1):r.y()+210*(n+1);e.moveTo(r.x(),i)})},this.alignH=function(){if(t.input.isCtrlDown)return void n.reduceAlignH();const e=t.nodes().filter(e=>e.selected).sort((e,t)=>e.x()>t.x()?1:e.x()<t.x()?-1:0);if(e.length<2)return void Swal.fire(o);const i=e.shift();e.forEach((e,t)=>{e.moveTo(e.x(),i.y())})},this.reduceAlignH=function(){const e=t.settings.gridSize(),i=t.nodes().filter(e=>e.selected).sort((e,t)=>e.x()>t.x()?1:e.x()<t.x()?-1:0);if(i.length<2)return void Swal.fire(o);const r=i.shift();t.settings.snapGridEnabled()&&r.moveTo(n.stepify(r.x(),e),n.stepify(r.y(),e));const s=e-(r.x()+r.width)%e+e;i.forEach((e,n)=>{const i=t.settings.snapGridEnabled()?r.x()+e.width*(n+1)+s*(n+1):r.x()+210*(n+1);e.moveTo(i,r.y())})},this.arrangeSpiral=function(){const e=n.getSelectedNodes();e.length<2?Swal.fire(o):(e.forEach((e,i)=>{e.moveTo(t.settings.snapGridEnabled()?n.stepify(Math.cos(.5*i)*(600+30*i),t.settings.gridSize()):Math.cos(.5*i)*(600+30*i),t.settings.snapGridEnabled()?n.stepify(Math.sin(.5*i)*(600+30*i),t.settings.gridSize()):Math.cos(.5*i)*(600+30*i))}),n.warpToXY(0,0))},this.sortAlphabetical=function(){const i=n.getSelectedNodes().sort((e,t)=>e.title().localeCompare(t.title()));if(i.length<2)return void Swal.fire(o);let r=Math.round(i.length/2),s=0,a=0;const l=e(i[0].element).width()+30,d=e(i[0].element).height()+30,c=t.settings.gridSize();t.settings.snapGridEnabled()&&i[0].moveTo(n.stepify(i[0].x(),c),n.stepify(i[0],c)),i.forEach((e,n)=>{n%r?s+=1:(a+=1,s=0),1===n&&(a=0);const o=i[0].x()+i[0].width,h=c-o%c+c,u=i[0].y()+i[0].height,p=c-u%c+c;e.moveTo(t.settings.snapGridEnabled()?i[0].x()+s*e.width+s*h:i[0].x()+s*l,t.settings.snapGridEnabled()?i[0].y()+a*e.height+a*p:i[0].y()+a*d)}),n.warpToNode(i[0])},this.stepify=function(e,t){return Math.round(e/t)*t}}}).call(this,n("EVdn"))},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},Hx63:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const i=n("XW1A");var o=function({app:e,createButton:t,setPluginStore:o,getPluginStore:r,onLoad:s}){const a=this;this.name="VarStore",this.onOpenDialog=async()=>{let t=null;const{value:s}=await Swal.fire({title:"Playtest starting variables",html:'<div id="jsoneditor"/>',focusConfirm:!1,onOpen:()=>{const o=document.getElementById("jsoneditor");t=new i(o,{mode:"tree",onEditable:({path:e,field:t,value:n})=>!(void 0===t&&""===n)}),t.setSchema({type:"object"}),n("quRS"),n("1mrn"),"dracula"===e.settings.theme()&&n("Jy/V");const s=r(a.name);t.set("object"!=typeof s.variables?{}:s.variables)},preConfirm:()=>t.get()});s&&o(a.name,"variables",s)},s(()=>{t(a.name,{name:"Variables",attachTo:"fileMenuDropdown",onClick:"onOpenDialog()"})})}},INAQ:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return r}));var o=n("oj90");const r=function(t){const n=this,r=Object.freeze({Left:0,Middle:1,Right:2}),s=Object.freeze({Enter:13,Escape:27,Space:32,Left:37,Up:38,Right:39,Down:40,Delete:46,A:65,C:67,D:68,O:79,S:83,V:86,W:87,X:88,Y:89,Z:90});this.keys=s,this.mouse={x:0,y:0},this.isDragging=!1,this.isScreenTouched=!1,this.isMiddleButtonDown=!1,this.isLeftButtonDown=!1,this.isShiftDown=!1,this.isCtrlDown=!1,this.isHoverOverWorkspace=!1,this.trackMouseEvents=function(){e(document).on("pointerdown",e=>{if(n.isDragging="nodes"===e.target.className,n.mouse.x=e.pageX,n.mouse.y=e.pageY,n.isMiddleButtonDown=e.button===r.Middle,this.isLeftButtonDown=e.button===r.Left,t.inWorkspace()){if(n.isDragging)switch(e.button){case r.Left:t.workspace.onMarqueeStart({x:e.pageX,y:e.pageY});break;case r.Middle:t.workspace.onDragStart({x:e.pageX,y:e.pageY})}}else t.inEditor()&&e.button===r.Right&&(t.guessPopUpHelper(),e.preventDefault())}),window.addEventListener("touchstart",()=>{n.isScreenTouched=!0}),e(document).on("pointermove",e=>{n.mouse.x=e.pageX,n.mouse.y=e.pageY}),e(document).on("mousemove touchmove",e=>{if(n.isDragging){t.focusedNodeIdx=-1;const i=n.isScreenTouched&&e.changedTouches?e.changedTouches[0].pageX:e.pageX,o=n.isScreenTouched&&e.changedTouches?e.changedTouches[0].pageY:e.pageY;t.inWorkspace()&&(e.altKey||n.isMiddleButtonDown||n.isScreenTouched?t.workspace.onDragUpdate({x:i,y:o}):t.workspace.onMarqueeUpdate({x:i,y:o}))}}),e(document).on("pointerup touchend",e=>{n.isScreenTouched=!1,n.isDragging=!1,e.button===r.Left&&(n.isLeftButtonDown=!1),e.button===r.Middle&&(n.isMiddleButtonDown=!1),t.inWorkspace()&&(t.workspace.onDragEnd(),t.workspace.onMarqueeEnd())}),e(".nodes").mousewheel(e=>{e.altKey||(t.inWorkspace()||n.isHoverOverWorkspace)&&(t.workspace.onZoom(e.pageX,e.pageY,e.deltaY),e.preventDefault())}),e(".nodes").hover(()=>{n.isHoverOverWorkspace=!0},()=>{n.isHoverOverWorkspace=!1}),e(".nodes").on("pointerdown",()=>{t.isEditorSplit&&(t.focusEditor(!1),t.makeNewNodesFromLinks(),t.propagateUpdateFromNode(t.editing()),t.mustUpdateTags=!0,t.updateTagsRepository(),t.workspace.updateArrows())}),e(document).contextmenu(n=>{if(!t.inWorkspace())return;const i=e(n.target).hasClass("nodes")||e(n.target).parents(".nodes").length;if(n.button===r.Right&&i){const{x:e,y:i}=t.workspace.toWorkspaceCoordinates(n.pageX,n.pageY);t.newNodeAt(e,i)}return!i})},this.trackKeyboardEvents=function(){e(document).on("keyup keydown",e=>{n.isShiftDown=e.shiftKey,n.isCtrlDown=e.ctrlKey}),e(document).on("keyup",(function(e){if(e.keyCode===s.Space){if(t.inWorkspace()&&e.altKey||t.inEditor()&&!e.altKey)return;t.workspace.scale=1;const n=t.workspace.getSelectedNodes(),i=n.length>0,o=i>0?n:t.nodes();++t.focusedNodeIdx,(t.focusedNodeIdx<0||t.focusedNodeIdx>=o.length)&&(t.focusedNodeIdx=0),t.inWorkspace()?i?t.workspace.warpToSelectedNodeByIdx(t.focusedNodeIdx):t.workspace.warpToNodeByIdx(t.focusedNodeIdx):t.inEditor()&&t.editNode(t.nodes()[t.focusedNodeIdx])}})),e(document).on("keydown",e=>{if(t.inWorkspace()){if((e.metaKey||e.ctrlKey)&&e.shiftKey)switch(e.keyCode){case s.S:t.data.trySave(o.FILETYPE.JSON);break;case s.A:t.data.tryAppend()}if((e.metaKey||e.ctrlKey)&&e.altKey)switch(e.keyCode){case s.S:t.data.trySave(o.FILETYPE.YARN)}else if(e.metaKey||e.ctrlKey)switch(e.keyCode){case s.C:t.nodeClipboard=t.cloneNodeArray(t.workspace.getSelectedNodes());break;case s.D:t.workspace.deselectAll();break;case s.O:t.data.tryOpenFile();break;case s.S:t.data.trySaveCurrent();break;case s.X:const e=t.workspace.getSelectedNodes();t.nodeClipboard=t.cloneNodeArray(e),t.deleteNodes(e);break;case s.Y:t.historyDirection("redo");break;case s.Z:t.historyDirection("undo")}else e.keyCode===s.Delete||"Delete"===e.key?t.confirmDeleteNodes(t.workspace.getSelectedNodes()):t.$searchField.is(":focus")||e.ctrlKey||e.metaKey||(e.keyCode===s.A||e.keyCode===s.Left?t.workspace.onPanLeft():e.keyCode===s.D||e.keyCode===s.Right?t.workspace.onPanRight():e.keyCode===s.W||e.keyCode===s.Up?t.workspace.onPanUp():e.keyCode!==s.S&&e.keyCode!==s.Down||t.workspace.onPanDown())}}),e(document).on("keyup",e=>{if(t.inWorkspace())if(e.metaKey||e.ctrlKey)switch(e.keyCode){case s.A:t.workspace.selectAll();break;case s.V:t.pasteNodes()}else if(e.keyCode===s.Enter||"Enter"===e.key){const e=t.nodes()[t.focusedNodeIdx];e?t.editNode(e):t.editNode(t.nodes()[0])}}),e(document).on("keydown",(function(e){if(t.inEditor())if(e.metaKey||e.ctrlKey)switch(e.keyCode){case s.C:n.clipboard=t.editor.getSelectedText();break;case s.X:document.execCommand("copy"),t.clipboard=t.editor.getSelectedText(),t.insertTextAtCursor("");break;case s.S:t.data.trySaveCurrent()}else switch(e.keyCode){case s.Escape:t.saveNode(),t.closeEditor()}})),e(document).on("keyup",(function(e){if(t.inEditor()&&(e.metaKey||e.ctrlKey)&&e.altKey)switch(e.keyCode){case s.Enter:t.saveNode(),t.closeEditor()}})),e(document).on("keydown",(function(e){if(t.ui.settingsDialogVisible())switch(e.keyCode){case s.Escape:t.ui.closeSettingsDialog()}})),e(document).on("keyup keydown pointerdown pointerup",(function(e){t.inEditor()&&t.updateEditorStats()}))},this.initKnockoutBindings=function(){i.bindingHandlers.preventBubble={init:function(e,t){var n=i.utils.unwrapObservable(t());i.utils.registerEventHandler(e,n,(function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}))}},i.bindingHandlers.mousedown={init:function(t,n,o,r,s){var a=i.unwrap(n());e(t).mousedown((function(){a()}))}}};n.initKnockoutBindings(),n.trackMouseEvents(),n.trackKeyboardEvents()}}).call(this,n("EVdn"),n("Z1dp"))},"Jy/V":function(e,t,n){},P0sH:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return p}));var o=n("owJe"),r=n("W2Rx"),s=n("5dEm"),a=n("INAQ"),l=n("pYPP"),d=n("fkuv"),c=n("2Qx2"),h=n("oj90"),u=n("l8+o"),p=function(t,p){const f=this;this.utils=h.Utils,this.setTheme=function(t,n){let i=n?n.target.value:t;setTimeout(f.initGrid,50),setTimeout(f.workspace.updateArrows,50),e("#theme-stylesheet").attr("href",h.Utils.getPublicPath(`themes/${i}.css`))},this.setLanguage=function(e,t){const n=t?t.target.value:e;spoken.recognition.lang=n,Object(o.load_dictionary)(f.settings.language().split("-")[0])},this.setMarkupLanguage=function(e,t){t&&t.target.value;f.richTextFormatter=new u.a(f),f.mustRefreshNodes.notifySubscribers()},this.setFiletypeVersion=function(e,t){const n=t?t.target.value:e;f.filetypeVersion=n},this.setGistCredentials=function(e,t){const{token:i,file:o}=e,r=new(n("XZLo"))({token:i});f.gists=r,f.gists.file=o},this.input=new a.a(f),this.settings=new l.a(f),this.workspace=new s.a(f),this.ui=new d.a(f),this.richTextFormatter=new u.a(f),this.data=c.a,this.name=i.observable(t),this.version=i.observable(p),this.editing=i.observable(null),this.nodes=i.observableArray([]),this.tags=i.observableArray([]),this.mustRefreshNodes=i.observable(),this.mustUpdateTags=!0,this.nodeHistory=[],this.nodeFuture=[],this.editingHistory=[],this.editingSaveHistoryTimeout=null,this.focusedNodeIdx=-1,this.isElectron=!1,this.editor=null,this.nodeVisitHistory=[],this.clipboard="",this.nodeClipboard=[],this.speachInstance=null,this.editingPath=i.observable(null),this.$searchField=e(".search-field"),this.isEditorInPreviewMode=!1,this.isEditorInPlayMode=!1,this.isEditorSplit=!1,this.isEditorFocused=!1,this.editorResizeHandleOptions={handleSelector:"#editor-resize-handle",resizeHeight:!1,resizeWidthFrom:"right",onDragStart:function(){f.isSplitEditorInFocus=!0,e("#node-editor").removeClass("split-editor-out-of-focus")},onDragEnd:function(){f.editor.resize(),f.settings.editorSplitSize(e("#editor-form").width())}},this.inEditor=()=>(f.editing()||f.isEditorSplit&&f.isEditorFocused)&&!f.ui.isDialogOpen(),this.inWorkspace=()=>(!f.editing()||f.isEditorSplit&&!1===f.isEditorFocused)&&!f.ui.isDialogOpen(),this.run=function(){var t="Unknown OS";-1!=navigator.platform.indexOf("Win")&&(t="Windows"),-1!=navigator.platform.indexOf("Mac")&&(t="MacOS"),-1!=navigator.platform.indexOf("X11")&&(t="UNIX"),-1!=navigator.platform.indexOf("Linux")&&(t="Linux"),-1!=navigator.platform.indexOf("Linux")&&(t="Linux"),f.isElectron=navigator.userAgent.toLowerCase().includes("electron");var n=navigator.userAgent||navigator.vendor||window.opera;let o;/android|iPad|iPhone|iPod/.test(n.toLowerCase())&&!window.MSStream&&(t="mobile"),"Windows"==t&&(f.workspace.zoomSpeed=.1),window.addEventListener("beforeunload",e=>(this.data.saveAppStateToLocalStorage(),null)),window.addEventListener("DOMContentLoaded",e=>{if(f.electron){const e=f.electron.remote.process.argv.length>1?f.electron.remote.process.argv[1]:null;if(e&&app.fs.existsSync(e))return void this.data.openFileFromFilePath(e)}this.data.loadAppStateFromLocalStorage();const t=new URL(window.location),n=t.searchParams.get("text")||t.searchParams.get("url");null!==n&&f.insertTextAtCursor(n+"\n",!0)});const r=e("#addPwa")[0];r.style.display="none",window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),o=e,r.style.display="block",r.addEventListener("click",e=>{r.style.display="none",o.prompt(),o.userChoice.then(e=>{"accepted"===e.outcome?(console.log("User accepted the A2HS prompt"),r.style.display="none"):console.log("User dismissed the A2HS prompt"),o=null})})}),e("#app").show(),i.applyBindings(f,e("#app")[0]),f.editingVisualStudioCodeFile()||f.newNode().title("Start"),f.settings.apply(),e(".search-title input").click(f.updateSearch),e(".search-body input").click(f.updateSearch),e(".search-tags input").click(f.updateSearch),f.$searchField.on("input",f.updateSearch),f.$searchField.on("keyup",(function(e){27==e.keyCode?f.clearSearch():f.searchWarp()})),"mobile"===t&&f.workspace.setZoom(3),e(window).on("resize",(function(){f.ui.isScreenNarrow()&&f.editing()&&f.isEditorSplit&&f.toggleEditorView(),f.workspace.updateArrows(),f.initGrid()})),setTimeout(f.initGrid,50),this.guessPopUpHelper=function(){/color=#([a-zA-Z0-9]{3,6})$/.test(f.getTagBeforeCursor())&&f.insertColorCode()},this.insertEmoji=function(){this.emPicker.toggle(),f.togglePreviewMode(!0),e("#emojiPicker-container").css({left:f.input.mouse.x-200,top:f.input.mouse.y-125}),e("#emojiPicker-container").show()},this.insertColorCode=function(){e("#colorPicker-container").is(":visible")||(e("#colorPicker").spectrum("set",f.editor.getSelectedText()),e("#colorPicker").spectrum("toggle"),e("#colorPicker-container").css({left:f.input.mouse.x-70,top:f.input.mouse.y-50}),e("#colorPicker-container").show(),f.togglePreviewMode(!0),setTimeout(()=>{const t=e("#colorPicker").spectrum("get");f.applyPickerColorEditor(t)},100))},this.applyPickerColorEditor=function(e){const t=JSON.parse(JSON.stringify(f.editor.selection.getRange()));f.editor.selection.setRange(t);const n=e.toHexString().replace("#","");f.editor.session.replace(t,n),f.editor.selection.setRange({start:f.editor.getCursorPosition(),end:{row:f.editor.getCursorPosition().row,column:f.editor.getCursorPosition().column-n.length}}),f.togglePreviewMode(!0)},document.addEventListener("contextmenu",(function(e){f.editing()&&e.preventDefault()}),!1),this.speakText=function(){const e=f.editor.getSelectedText(),t=e||f.editor.getSession().getValue();spoken.voices().then(e=>{const n=f.settings.language().split("-")[0],i=e.filter(e=>!e.lang.indexOf(n));i.length?(console.log("Loaded voice",i[0]),spoken.say(t,i[0])):spoken.say(t)})},this.startCapture=function(){spoken.listen({continuous:!0}).then(e=>{if(console.log(e),f.editing())f.insertTextAtCursor(e+". "),document.getElementById("speakTextBtnBubble").title="Transcribe";else if("open"===e){console.log("try open...");var t=f.getFirstFoundNode(f.$searchField.val().toLowerCase()).title();console.log("try open:",t),f.openNodeByTitle(t)}else"clear"===e?(f.$searchField.val(""),f.updateSearch()):(f.$searchField.val(e),f.updateSearch());spoken.listen.stop().then(()=>{f.editing()&&(document.getElementById("speakTextBtnBubble").style.visibility="hidden"),this.continueCapture()})}).catch(e=>spoken.listen.stop().then(()=>this.continueCapture()))},this.continueCapture=function(){spoken.delay(500).then(()=>{spoken.recognition.continuous&&f.startCapture()})},this.toggleTranscribing=function(){const e=spoken.listen.available();var t=document.getElementById("speakTextBtnBubble");e&&f.settings.transcribeEnabled()?(spoken.listen.on.partial(e=>{f.editing()?(t.style.visibility="visible",t.title=`🗣️ ${e} 🦜`):f.$searchField.val(`🗣️ ${e} 🦜`)}),f.startCapture()):(t.style.visibility="hidden",spoken.recognition.continuous=!1,spoken.listen.stop())},this.hearText=function(){spoken.listen.available()?(spoken.listen.on.partial(e=>{console.log(e),document.getElementById("speakTextBtnBubble").title=`🗣️ ${e} 🦜`}),spoken.listen().then(e=>{f.insertTextAtCursor(e+" "),document.getElementById("speakTextBtnBubble").title="Transcribe"}).catch(e=>console.warn(e.message))):Swal.fire({title:"Speech recognition not avaiilable!",icon:"error"})},document.ondragover=document.ondrop=e=>{e.preventDefault()},document.body.ondrop=e=>{e.preventDefault();for(var t=0;t<e.dataTransfer.files.length;t++)c.a.appendFile(e.dataTransfer.files[t],e.dataTransfer.files[t].name,!1)},window.addEventListener("message",e=>{const t=e.data;switch(t.type){case"UpdateNode":f.nodes().forEach(e=>{e.title().trim()===t.payload.originalNodeTitle.trim()&&(e.title(t.payload.title),e.tags(t.payload.tags),e.body(t.payload.body),f.setYarnDocumentIsDirty())})}});var s=new CustomEvent("yarnReady");s.document=document,s.data=c.a,s.app=this,window.parent.dispatchEvent(s)},this.limitNodesUpdate=function(e){f.nodes.extend({rateLimit:{method:"notifyWhenChangesStop",timeout:250}}),e(),f.nodes.limit(e=>()=>e())},this.getNodesConnectedTo=function(e){var t=[],n=f.nodes();for(var i in n)if(n[i]!=e&&n[i].isConnectedTo(e,!0)){var o=!1;for(var r in t)if(t[r]==n[i]){o=!0;break}o||t.push(n[i])}return t},this.matchConnectedColorID=function(e){var t=f.getNodesConnectedTo(e);for(var n in t)t[n].colorID(e.colorID())},this.quit=function(){f.isElectron},this.validateTitle=function(){var t=document.getElementById("editorTitle").value,n=e("#editorTitle");f.getOtherNodeTitles().includes(t)||f.titleExistsTwice(t)?(n.attr("class","title title-error"),n.attr("title","Another node has the same title")):RegExp("^[a-z0-9]+$","i").test(t)?(n.removeAttr("title"),n.removeClass("title-error")):(n.attr("class","title title-error"),n.attr("title","Only upper or lower case letters and numbers are allowed in a node title."))},this.refreshWindowTitle=function(){let e="";"LOCAL"===c.a.lastStorageHost()?e="Yarn - "+(c.a.editingPath()||c.a.editingName())+" "+(c.a.isDocumentDirty()?"*":""):"GIST"===c.a.lastStorageHost()&&(e="Gist - "+(c.a.editingPath()||c.a.editingName())+" "+(c.a.isDocumentDirty()?"*":"")),f.electron?f.electron.remote.getCurrentWindow().setTitle(e):document.title=e},this.usingVisualStudioCodeExtension=function(){return!!window.vsCodeApi},this.editingVisualStudioCodeFile=function(){return!0===window.editingVsCodeFile},this.setYarnDocumentIsDirty=function(){f.usingVisualStudioCodeExtension()&&f.editingVisualStudioCodeFile()&&window.vsCodeApi.postMessage({type:"DocumentEdit",payload:c.a.getSaveData(c.a.editingType())})},this.recordNodeAction=function(e,t){if(f.nodeFuture.length>0){for(var n=0;n<f.nodeFuture.length;n++){delete f.nodeFuture.pop().node}delete f.nodeFuture,f.nodeFuture=[]}var i={action:e,node:t,lastX:t.x(),lastY:t.y()};"removed"==e&&(i.lastY+=80),f.nodeHistory.push(i),f.setYarnDocumentIsDirty()},this.historyDirection=function(e){function t(e){var t=f.nodes.indexOf(e);t>=0&&f.nodes.splice(t,1),f.updateNodeLinks()}var n=null;if(n="undo"==e?f.nodeHistory.pop():f.nodeFuture.pop()){var i=n.action,o=n.node;"undo"==e?("created"==i?(n.lastX=o.x(),n.lastY=o.y(),t(o)):"removed"==i&&f.recreateNode(o,n.lastX,n.lastY),f.nodeFuture.push(n),f.setYarnDocumentIsDirty()):("created"==i?f.recreateNode(o,n.lastX,n.lastY):"removed"==i&&t(o),f.nodeHistory.push(n),f.setYarnDocumentIsDirty())}},this.recreateNode=function(e,t,n){f.nodes.push(e),e.moveTo(t,n),f.updateNodeLinks()},this.setSelectedColors=function(e){var t=f.workspace.getSelectedNodes();for(var n in t.splice(t.indexOf(e),1),t)t[n].colorID(e.colorID())},this.pasteNodes=function(){f.nodeClipboard.length&&(f.workspace.deselectAll(),f.nodeClipboard.forEach((function(e){var t=new r.a({title:f.getUniqueTitle(e.title()),body:e.body(),tags:e.tags(),colorID:e.colorID(),x:e.createX,y:e.createY});f.nodes.push(t),f.workspace.selectNodes(t),f.recordNodeAction("created",t)})),f.updateNodeLinks())},this.confirmDeleteNodes=function(e){const t=Array.isArray(e)?void 0:e,n=Array.isArray(e)?[...e]:t&&t.selected?[...f.workspace.getSelectedNodes()]:[e];n.length&&Swal.fire({title:"Are you sure?",text:`${n.length} ${1===n.length?"node":"nodes"} will be deleted.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(e=>{e.value&&f.deleteNodes(n)})},this.deleteNodes=function(e){const t=Array.isArray(e)?e:[e],n=[];for(let e=t.length-1;e>=0;--e)n.push(t[e].remove());Promise.all(n).then(()=>{f.limitNodesUpdate(()=>{for(let e=t.length-1;e>=0;--e)f.inEditor()&&f.editing()===t[e]&&f.closeEditor(),f.deleteNode(t[e]);f.updateNodeLinks(),f.workspace.deselectNodes(t),f.workspace.updateArrows()})})},this.deleteNode=function(e){const t=f.nodes.indexOf(e);t>=0&&(f.recordNodeAction("removed",e),f.nodes.splice(t,1)),f.setYarnDocumentIsDirty()},this.cloneNodeArray=function(e){return e.map((function(e){return new r.a({title:e.title(),body:e.body(),tags:e.tags(),colorID:e.colorID(),x:e.x()+10,y:e.y()+10})}))},this.newNode=function(e=!0){var t=new r.a;return f.nodes.push(t),e&&f.updateNodeLinks(),f.recordNodeAction("created",t),t},this.newNodeAt=function(e,t){var n=new r.a({x:e-100,y:t-100});return f.nodes.push(n),f.updateNodeLinks(),f.recordNodeAction("created",n),n},this.searchTextInEditor=function(e=!0){e?f.editor.execCommand("find"):f.editor.searchBox&&f.editor.searchBox.hide()},this.showRandomQuote=function(){e.ajax({url:"https://api.forismatic.com/api/1.0/?",dataType:"jsonp",data:"method=getQuote&format=jsonp&lang=en&jsonp=?",success:function(e){Swal.fire({text:e.quoteText+"\n\n-"+e.quoteAuthor})}})},this.editNode=function(t){if(!t.active())return;if(f.settings.alwaysOpenNodesInVisualStudioCodeEditor())return void f.editNodeInVisualStudioCodeEditor(t);f.editing()&&f.editing()!==t&&f.saveNode(!1),f.isEditorInPlayMode&&f.togglePlayMode(!1),f.isEditorInPreviewMode&&f.togglePreviewMode(!1),t.oldTitle=t.title(),f.editing(t),f.mustUpdateTags=!0,e("#node-editor-background").css({opacity:0}).transition({opacity:1},250),e("#node-editor").css({y:"-100",opacity:0}).transition({y:"0",opacity:1},250),f.editor=ace.edit("editor"),f.editor.setOptions({scrollPastEnd:.5}),f.editor.navigateFileEnd(),e("#colorPicker").spectrum({flat:!0,showButtons:!1,showInput:!0,showPalette:!0,preferredFormat:"hex",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"]],move:function(e){f.applyPickerColorEditor(e)},clickoutFiresChange:!0});const n=ace.require("ace/ext/language_tools"),i=h.Utils.createAutocompleter(["string.llink","string.rlink"],f.getOtherNodeTitles(),"Node Link");n.setCompleters([i,n.keyWordCompleter,n.textCompleter,n.snippetCompleter]);let r=void 0;f.editor.getSession().on("change",(function(e){const t=f.settings.autoCloseTags();if("insert"===e.action&&t){if(f.richTextFormatter.justInsertedAutoComplete)return void(f.richTextFormatter.justInsertedAutoComplete=!1);r&&clearTimeout(r),r=setTimeout(()=>{r=void 0,f.richTextFormatter.completableTags.forEach(e=>{if(f.getTagBeforeCursor()===e.Start){f.richTextFormatter.justInsertedAutoComplete=!0;let t=e.Completion,n=e.Offset;f.settings.autoCloseBrackets()&&e.BehaviorCompletion&&(t=e.BehaviorCompletion,n+=1),e.Completion&&f.insertTextAtCursor(t),e.Offset&&f.moveEditCursor(n),e.Func&&e.Func()}})},200)}})),this.emPicker=new EmojiPicker(document.getElementById("emojiPickerDom"),e=>{f.insertTextAtCursor(e.char),this.emPicker.toggle(),f.togglePreviewMode(!1)}),Object(o.enable_spellcheck)(),f.toggleTranscribing(),f.toggleInvertColors(),f.toggleShowCounter(),f.toggleSpellCheck(),f.validateTitle(),f.updateEditorStats(),f.updateEditorOptions(),f.$searchField.val().length>0&&e(".search-body input").is(":checked")&&f.editor.findAll(f.$searchField.val()),f.settings.editorSplit()&&(f.splitEditor(),f.workspace.warpToNodeByIdx(t.index()-1)),"right"===f.settings.editorSplitDirection()?(e("#editor-form").addClass("split-editor-right"),e("#editor-resize-handle").addClass("float-right")):(e("#editor-form").removeClass("split-editor-right"),e("#editor-resize-handle").removeClass("float-right")),e(".node-editor").on("pointerdown","> *",(function(e){f.isEditorSplit&&(f.focusEditor(!0),e.stopPropagation())})),e(".app-info").hide(),f.editor.resize(),null!=t.undoManager&&f.editor.session.setUndoManager(t.undoManager);var s=new CustomEvent("yarnEditorOpen");s.document=document,s.data=c.a,s.app=app,window.parent.dispatchEvent(s)},this.splitEditor=function(){f.isEditorSplit=!0,f.focusEditor(!0),f.settings.editorSplit(!0),f.editorResizeHandleOptions.resizeWidthFrom="right"===f.settings.editorSplitDirection()?"left":"right",e("#editor-form").width(f.settings.editorSplitSize()).addClass("split-editor").toggleClass("split-editor-right","right"===f.settings.editorSplitDirection()).resizable(f.editorResizeHandleOptions),e("#node-editor-background").addClass("hidden"),e("#node-editor").css({"z-index":10002}),e("#editor-resize-handle").removeClass("hidden").toggleClass("float-right","right"===f.settings.editorSplitDirection()),e("#split-editor-button").addClass("hidden"),e("#snap-editor-button").removeClass("hidden"),e("#exit-editor").removeClass("hidden"),e("#full-size-editor-button").removeClass("hidden"),e("#split-button-separator").removeClass("hidden"),f.ui.checkAndMoveAppButtons()},this.toggleEditorView=function(){f.settings.editorSplit(!f.settings.editorSplit()),f.reopenEditor()},this.reopenEditor=function(){f.saveNode();let e=f.editing();f.closeEditor(),setTimeout(()=>{f.editNode(e)},250)},this.editorSnapToggle=function(){f.settings.editorSplitDirection("right"===f.settings.editorSplitDirection()?"left":"right"),f.reopenEditor()},this.focusEditor=function(t){!0===t?(e("#node-editor").removeClass("split-editor-unfocused"),f.isEditorFocused=!0):(e("#node-editor").addClass("split-editor-unfocused"),f.isEditorFocused=!1)},this.getSplitEditorXOffset=function(){let t=0;return f.inEditor()&&f.settings.editorSplit()&&(t=e("#editor-form").width()/2,"right"===f.settings.editorSplitDirection()&&(t*=-1)),t},this.editNodeInVisualStudioCodeEditor=function(e){f.usingVisualStudioCodeExtension()?(f.setYarnDocumentIsDirty(),window.vsCodeApi.postMessage({type:"OpenNode",payload:{title:e.title().trim(),tags:e.tags().trim(),body:f.trimBodyLinks(e.body().trim())}})):console.error("Tried to open node in Visual Studio Code text editor but we're not in the Visual Studio Code extension")},this.chooseRelativePathImage=function(e){f.insertTextAtCursor(e)},this.openNodeByTitle=function(e){f.makeNodeWithName(e),f.nodes().forEach(t=>{t.title().trim().toLowerCase()===e.trim().toLowerCase()&&f.editNode(t)})},this.openLastEditedNode=function(){if(0===f.nodeVisitHistory.length)f.saveNode(),f.closeEditor();else{const e=f.nodeVisitHistory.pop();f.propagateUpdateFromNode(f.editing()),f.openNodeByTitle(e)}},this.getSpellCheckSuggestionItems=function(){var e=Object(o.suggest_word_for_misspelled)(f.editor.getSelectedText());if(e){var t={};return e.forEach(e=>{t[e]={name:e,icon:"edit",callback:e=>{f.insertTextAtCursor(e)}}}),t}return!1},this.getThesaurusItems=function(){var e=n("GLdW")(f.editor.getSelectedText());if(!e)return!1;var t=[];if(Object.keys(e).forEach((function(n){e[n].forEach((function(e){t.includes(e)||e===n||t.push(e)}))})),t.length>0){var i={};return t.forEach(e=>{i[e]={name:e,icon:"edit",callback:e=>{f.insertTextAtCursor(e)}}}),i}return!1},this.toggleSpellCheck=function(){setTimeout((function(){f.settings.spellcheckEnabled()?Object(o.enable_spellcheck)():Object(o.disable_spellcheck)()}),50)},this.toggleInvertColors=function(){const t=f.settings.invertColorsEnabled()?{filter:"invert(100%)"}:{filter:"invert(0%)"};e("#app").css(t),e("#app-bg").css(t),e(".tooltip").css(t),e(".node .body").css(t),e(".node-editor .form .editor-container .editor-preview").css(t)},this.initGrid=function(){if(f.settings.snapGridEnabled()){var t=e(window).width(),n=e(window).height();e("#grid-canvas").attr("width",t),e("#grid-canvas").attr("height",n),e("#gridSize").attr("disabled",!1),f.workspace.gridContext.strokeStyle=f.workspace.gridContext.fillStyle=e(".grid-canvas").css("color")}else e("#gridSize").attr("disabled",!0);app.workspace.updateGrid()},this.toggleShowCounter=function(){f.settings.editorStatsEnabled()?e(".node-editor .form .editor-counter").css({display:"initial"}):e(".node-editor .form .editor-counter").css({display:"none"})},this.toggleAutocompleteSuggestions=function(){f.settings.autocompleteSuggestionsEnabled(!f.settings.autocompleteSuggestionsEnabled()),f.updateEditorOptions()},this.toggleAutoCloseBrackets=function(){f.settings.autoCloseBrackets(!f.settings.autoCloseBrackets()),f.updateEditorOptions()},this.updateEditorOptions=function(){f.editor.setOptions({enableBasicAutocompletion:app.settings.autocompleteSuggestionsEnabled(),enableLiveAutocompletion:app.settings.autocompleteSuggestionsEnabled(),behavioursEnabled:app.settings.autoCloseBrackets()})},this.togglePreviewMode=function(t){const n=e(".editor")[0],i=e("#editor-preview")[0];f.isEditorInPreviewMode=t,e(".bbcode-toolbar").removeClass("hidden"),f.editor.session.setScrollTop(i.scrollTop),i.innerHTML="",i.style.display="none",n.style.display="flex",f.editor.focus(),f.editor.resize(),e("#colorPicker-container").is(":visible")&&e("#colorPicker-container").hide(),e("#emojiPicker-container").is(":visible")&&e("#emojiPicker-container").hide()},this.appendText=function(e){f.editing().body(f.editing().body()+e);const t=f.editor.session.getLength()-1,n=f.editor.session.getLine(t).length;f.editor.gotoLine(t+1,n)},this.moveEditCursor=function(e){const t=f.editor.getCursorPosition();f.editor.gotoLine(t.row+1,t.column+e),f.editor.focus()},this.insertTextAtCursor=function(e,t=!1){if(!f.editing())return;f.editor.session.replace(f.editor.selection.getRange(),"");const n=f.editor.getCursorPosition();if(f.editor.session.insert(n,e),t){const e=f.editor.getCursorPosition();editor.scrollToLine(e.row,!0,!0,(function(){})),f.editor.focus()}f.updateEditorStats()},this.getTagBeforeCursor=function(){const e=f.editor.getSelectionRange(),t=e.end.column,n=e.start.row,i=f.editor.session.getLine(n).substring(0,t);return i?f.richTextFormatter.identifyTag(i):""},this.saveNode=function(){const t=f.editing();if(t){const n=e("#editorTitle")[0],i=f.getFutureEditedNodeTitle();n.value=i,t.title(i),t.body(f.trimBodyLinks(t.body().trim())),f.makeNewNodesFromLinks(),f.propagateUpdateFromNode(t),f.workspace.updateArrows(),setTimeout(f.updateSearch,600),f.setYarnDocumentIsDirty();const o=new CustomEvent("yarnSavedNode");window.parent.dispatchEvent(o)}},this.closeEditor=function(){f.editing().undoManager=f.editor.session.getUndoManager(),e("#node-editor-background").transition({opacity:0},250),e("#node-editor").transition({y:"-100",opacity:0},250,(function(e){f.editing(null)})),f.isEditorSplit=!1,f.isEditorFocused=!1,e(".app-info").show(),app.ui.resetAppButtonsLocation(),f.isEditorInPlayMode&&f.togglePlayMode(!1),f.isEditorInPreviewMode&&f.togglePreviewMode(!1)},this.convertMarkup=function(){f.nodes().forEach(e=>{e.body(f.richTextFormatter.convert(e.body()))})},this.updateSearch=function(){for(var t=f.$searchField.val().toLowerCase(),n=e(".search-title input").is(":checked"),i=e(".search-body input").is(":checked"),o=e(".search-tags input").is(":checked"),r=0;r<f.nodes().length;r++){var s=f.nodes()[r],a=e(s.element);if(t.length>0&&(n||i||o)){var l=n&&s.title().toLowerCase().indexOf(t)>=0,d=i&&s.body().toLowerCase().indexOf(t)>=0,c=o&&s.tags().toLowerCase().indexOf(t)>=0;l||d||c?(s.active({title:l,body:d,tags:c}),a.clearQueue(),a.transition({opacity:1},500)):(s.active(!1),a.clearQueue(),a.transition({opacity:.25},500))}else s.active(!0),a.clearQueue(),a.transition({opacity:1},500)}},this.trimBodyLinks=function(e){return e.replace(/\[\[(.+?)\|\s*(.+?)\s*\]\]/g,"[[$1|$2]]")},this.updateNodeLinks=function(){for(let e of f.nodes())e.updateLinks()},this.propagateUpdateFromNode=function(e){var t=[],n=[];for(t.push(e);e=t.pop();)n.includes(e)||(n.push(e),e.updateLinks(),e.linkedTo().forEach(e=>{n.includes(e)||t.push(e)}),e.linkedFrom().forEach(e=>{n.includes(e)||t.push(e)}))},this.updateTagsRepository=function(){if(!f.mustUpdateTags)return;f.mustUpdateTags=!1;f.tags().forEach(e=>e.count=0),f.nodes().forEach(e=>{h.Utils.uniqueSplit(e.tags()," ").forEach(e=>{const t=f.tags().find(t=>t.text==e);if(t)++t.count;else{const t=(()=>{const e=f.tags().map(e=>e.id);for(let t=1;;++t)if(!e.includes(t))return t})();f.tags.push({id:t,style:"tag-style-"+t,text:e,count:1})}})});let e=f.tags().length;for(;e--;)0===f.tags()[e].count&&f.tags().splice(e,1)},this.makeNewNodesFromLinks=function(){if(!f.settings.createNodesEnabled())return console.info("Autocreate new nodes disabled");var e=f.editing().getLinksInNode();if(null!=e)for(var t=0;t<e.length;t++){const i=e[t].trim();var n=220*(t+1);f.makeNodeWithName(i,n)}},this.makeNodeWithName=function(e,t=220){const n=f.getOtherNodeTitles();e&&e.length>0&&!n.includes(e)&&e!=f.editing().title()&&f.newNodeAt(f.editing().x()+t,f.editing().y()-120).title(e)},this.titleExistsTwice=function(e){return f.nodes().filter(t=>t.title().trim()===e.trim()).length>1},this.getFutureEditedNodeTitle=function(){const t=e("#editorTitle")[0];return f.getUniqueTitle(t.value.trim())},this.getOtherNodeTitles=function(){var e=[];return f.nodes().forEach(t=>{f.editing()&&t.title()===f.editing().title()||e.push(t.title().trim())}),e},this.getHighlightedText=function(t){t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(/\&lt;\&lt;(.*?)\&gt;\&gt;/g,'<p class="conditionbounds">&lt;&lt;</p><p class="condition">$1</p><p class="conditionbounds">&gt;&gt;</p>')).replace(/\[\[([^\|]*?)\]\]/g,'<p class="linkbounds">[[</p><p class="linkname">$1</p><p class="linkbounds">]]</p>')).replace(/\[\[([^\[\]]*?)\|([^\[\]]*?)\]\]/g,'<p class="linkbounds">[[</p>$1<p style="color:red"><p class="linkbounds">|</p><p class="linkname">$2</p><p class="linkbounds">]]</p>')).replace(/[^:]\/\/(.*)?($|\n)/g,'<span class="comment">//$1</span>\n')).replace(/\/\*((.|[\r\n])*)?\*\//gm,'<span class="comment">/*$1*/</span>')).replace(/\/\%((.|[\r\n])*)?\%\//gm,'<span class="comment">/%$1%/</span>');var n=e("<div>");return n[0].innerHTML=t,n.find(".comment").each((function(){e(this).find("p").each((function(){e(this).removeClass()}))})),n.find(".linkname").each((function(){var t=e(this).text(),n=!1;for(var i in f.nodes())if(f.nodes()[i].title().toLowerCase()==t.toLowerCase()){n=!0;break}n||e(this).removeClass("linkname")})),t=n[0].innerHTML},this.updateLineNumbers=function(t){for(var n=t.split("\n"),i="",o=0;o<Math.max(1,n.length);o++)(0==o||o<n.length-1||n[o].length>0)&&(i+=o+1+"<br />");e(".editor-container .lines").html(i)},this.moveNodes=function(e,t){for(var n in f.nodes()){var i=f.nodes()[n];i.moveTo(i.x()+e,i.y()+t)}},this.getFirstFoundNode=function(e){return f.nodes().find(t=>t.title().toLowerCase().trim()===e)},this.searchWarp=function(){var e=f.$searchField.val().toLowerCase().trim();if(""===e)f.workspace.warpToNodeByIdx(0);else{const t=f.getFirstFoundNode(e);f.workspace.warpToNodeByIdx(f.nodes.indexOf(t))}},this.clearSearch=function(){f.$searchField.val(""),f.updateSearch()},this.updateEditorStats=function(){var t=f.editor.getSession().getValue(),n=f.editor.getCursorPosition(),i=t.split("\n");e(".editor-counter .character-count").html(t.length),e(".editor-counter .line-count").html(i.length),e(".editor-counter .row-index").html(n.row),e(".editor-counter .column-index").html(n.column),c.a.saveAppStateToLocalStorage()},this.getUniqueTitle=function(e){var t=f.getOtherNodeTitles();if(e&&!t.includes(e))return e;var n=e||"Node",i=2;const o=n.match(/^(.*)(_([0-9]+))$/);if(o&&4===o.length&&(n=o[1],i=Number(o[3])),!t.includes(n))return n;for(;;++i){var r=n+"_"+i;if(!t.includes(r))return r}}}}).call(this,n("EVdn"),n("Z1dp"))},W2Rx:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return s}));var o=n("oj90");let r=0;let s=function(t={}){const n=this;this.titleStyles=["title-style-1","title-style-2","title-style-3","title-style-4","title-style-5","title-style-6","title-style-7","title-style-8","title-style-9"],this.index=e.observable(r++),this.title=e.observable(t.title||app.getUniqueTitle()),this.tags=e.observable(t.tags||""),this.body=e.observable(t.body||"Empty Text"),this.active=e.observable(t.active||!0),this.width=200,this.height=200,this.tempOpacity=null,this.style=null,this.colorID=e.observable(t.colorID||0),this.checked=!1,this.selected=!1,this.createX=t.x||null,this.createY=t.y||null,this.undoManager=null,this.clippedTags=e.computed((function(){return app.updateTagsRepository(),o.Utils.uniqueSplit(n.tags()," ").map(e=>app.tags().find(t=>t.text===e)).filter(e=>e)}),this),this.clippedBody=e.computed((function(){if(app.ui.isScreenNarrow()&&app.editing())return;app.mustRefreshNodes();let e=app.getHighlightedText(this.body());return e=app.richTextFormatter.richTextToHtml(e),e=e.substr(0,1024),e}),this),this.linkedTo=e.observableArray(),this.linkedFrom=e.observableArray(),this.element=null,this.canDoubleClick=!0,this.create=function(){if(n.style=window.getComputedStyle(i(n.element).get(0)),n.createX&&n.createY)n.x(n.createX),n.y(n.createY);else{let e=i(n.element).parent();n.x(-e.offset().left+i(window).width()/2-100),n.y(-e.offset().top+i(window).height()/2-100)}app.workspace.bringToFront(n.element),app.workspace.startUpdatingArrows(),i(n.element).css({opacity:0,scale:.8,y:"-=80px",rotate:"45deg"}).transition({opacity:1,scale:1,y:"+=80px",rotate:"0deg"},250,"easeInQuad",(function(){app.workspace.stopUpdatingArrows(),app.workspace.updateArrows()})),n.drag(),i(n.element).on("dblclick",(function(){n.canDoubleClick&&app.editNode(n)})),o.Utils.addDoubleTapDetector(n.element,(function(){n.canDoubleClick&&app.editNode(n)})),i(n.element).on("click",(function(e){e.ctrlKey&&(n.selected?app.workspace.deselectNodes(n):app.workspace.selectNodes(n))}))},this.setSelected=function(e){n.selected=e,n.selected?i(n.element).addClass("selected"):i(n.element).removeClass("selected")},this.toggleSelected=function(){n.setSelected(!n.selected)},this.x=function(e){if(null!=e&&i(n.element).css({x:Math.floor(e)}),n.style)return Math.floor(new WebKitCSSMatrix(n.style.webkitTransform).m41)},this.y=function(e){if(null!=e&&i(n.element).css({y:Math.floor(e)}),n.style)return Math.floor(new WebKitCSSMatrix(n.style.webkitTransform).m42)},this.resetDoubleClick=function(){n.canDoubleClick=!0},this.cycleColorDown=function(){n.doCycleColorDown(),setTimeout(n.resetDoubleClick,500),n.canDoubleClick=!1,app.input.isShiftDown&&app.matchConnectedColorID(n),n.selected&&app.setSelectedColors(n),app.setYarnDocumentIsDirty()},this.cycleColorUp=function(){n.doCycleColorUp(),setTimeout(n.resetDoubleClick,500),n.canDoubleClick=!1,app.input.isShiftDown&&app.matchConnectedColorID(n),n.selected&&app.setSelectedColors(n),app.setYarnDocumentIsDirty()},this.doCycleColorDown=function(){n.colorID(n.colorID()-1),n.colorID()<0&&n.colorID(8)},this.doCycleColorUp=function(){n.colorID(n.colorID()+1),n.colorID()>8&&n.colorID(0)},this.remove=async function(){return new Promise((e,t)=>{i(n.element).transition({opacity:0,scale:.8,y:"-=80px",rotate:"-45deg"},250,"easeInQuad",e)})},this.drag=function(){const e={x:0,y:0};let t=!1,o=!1;i(document.body).on("mousemove touchmove",(function(i){if(t){const t=app.input.isScreenTouched&&i.changedTouches?i.changedTouches[0].pageX:i.pageX,r=app.input.isScreenTouched&&i.changedTouches?i.changedTouches[0].pageY:i.pageY;let{x:s,y:a}=app.workspace.toWorkspaceCoordinates(t,r);s-=e.x,a-=e.y;let l=s-n.x(),d=a-n.y();const c=app.workspace.getSelectedNodes();if(("mousemove"===i.originalEvent.type||c.includes(n)&&"touchmove"===i.originalEvent.type)&&(n.x(s),n.y(a)),o&&(n.selected?c.splice(c.indexOf(n),1):c=app.getNodesConnectedTo(n),c.length>0))for(let e in c)c[e].active()&&(c[e].x(c[e].x()+l),c[e].y(c[e].y()+d));app.workspace.updateArrows()}})),i(n.element).on("pointerdown",(function(i){if(!t&&n.active()&&0===i.button){t=!0,(app.input.isShiftDown||n.selected)&&(o=!0);const{x:r,y:s}=app.workspace.toWorkspaceCoordinates(i.pageX,i.pageY);e.x=app.settings.snapGridEnabled()?app.workspace.stepify(r-n.x(),app.settings.gridSize()):r-n.x(),e.y=app.settings.snapGridEnabled()?app.workspace.stepify(s-n.y(),app.settings.gridSize()):s-n.y()}})),i(n.element).on("touchend",(function(e){app.workspace.selectNodes(n)})),i(document).on("pointerup touchend",(function(){(t||o)&&(t=!1,o=!1,app.setYarnDocumentIsDirty())}))},this.moveTo=function(e,t){app.workspace.startUpdatingArrows(),i(n.element).clearQueue(),i(n.element).transition({x:e,y:t},app.stopUpdatingArrows,500)},this.isConnectedTo=function(e,t){if(t&&e.isConnectedTo(n,!1))return!0;let i=n.linkedTo();for(let t in i){if(i[t]==e)return!0;if(i[t].isConnectedTo(e,!1))return!0;if(e.isConnectedTo(i[t],!1))return!0}return!1},this.getLinksInNode=function(e){let t=(e||n).body().match(/\[\[(.*?)\]\]/g);if(null!=t){let e={};for(let n=t.length-1;n>=0;n--)t[n]=t[n].substr(2,t[n].length-4).trim(),t[n].indexOf("|")>=0&&(t[n]=t[n].split("|")[1]),null!=e[t[n]]&&t.splice(n,1),e[t[n]]=!0;return t}},this.updateLinks=function(){n.resetDoubleClick(),n.updateLinksFromParents(),n.updateLinksToChildren()},this.updateLinksFromParents=function(){n.oldTitle&&n.oldTitle!==n.title()&&(n.linkedFrom.removeAll(),app.nodes().forEach(e=>{const t=n.getLinksInNode(e);if(t)if(t.includes(n.oldTitle)){const t=RegExp("\\|\\s*"+n.oldTitle+"\\s*\\]\\]","g"),i=e.body().replace(t,"|"+n.title()+"]]");e.body(i),n.linkedFrom.push(e)}else t.includes(n.title())&&n.linkedFrom.push(e)}),n.oldTitle=void 0)},this.updateLinksToChildren=function(){n.linkedTo.removeAll();let e=n.getLinksInNode();if(e)for(let t in app.nodes()){let i=app.nodes()[t];for(let t=0;t<e.length;t++)i!=n&&i.title().trim()===e[t].trim()&&n.linkedTo.push(i)}}};e.bindingHandlers.nodeBind={init:function(e,t,n,i,o){o.$rawData.element=e,o.$rawData.create()},update:function(e,t,n,o,r){i(e).on("pointerdown",(function(){app.workspace.bringToFront(e)}))}}}).call(this,n("Z1dp"),n("EVdn"))},XW1A:function(e,t,n){
/*!
 * jsoneditor.js
 *
 * @brief
 * JSONEditor is a web-based tool to view, edit, format, and validate JSON.
 * It has various modes such as a tree editor, a code editor, and a plain text
 * editor.
 *
 * Supported browsers: Chrome, Firefox, Safari, Opera, Internet Explorer 8+
 *
 * @license
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *
 * Copyright (c) 2011-2021 Jos de Jong, http://jsoneditoronline.org
 *
 * @author  Jos de Jong, <wjosdejong@gmail.com>
 * @version 9.5.0
 * @date    2021-06-07
 */
self,e.exports=function(){return t={897:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});var i=n(602),o=n(791),r=n(907);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dom={};var i=this,o=this.dom;this.anchor=void 0,this.items=t,this.eventListeners={},this.selection=void 0,this.onClose=n?n.close:void 0,this.limitHeight=!!n&&n.limitHeight;var s=document.createElement("div");s.className="jsoneditor-contextmenu-root",o.root=s,(n=document.createElement("div")).className="jsoneditor-contextmenu",o.menu=n,s.appendChild(n),(s=document.createElement("ul")).className="jsoneditor-menu",n.appendChild(s),o.list=s,o.items=[],(n=document.createElement("button")).type="button",o.focusButton=n,(o=document.createElement("li")).style.overflow="hidden",o.style.height="0",o.appendChild(n),s.appendChild(o),function e(t,n,o){o.forEach((function(o){var s,a,l,d,c,h,u;"separator"===o.type?((l=document.createElement("div")).className="jsoneditor-separator",(c=document.createElement("li")).appendChild(l),t.appendChild(c)):(s={},a=document.createElement("li"),t.appendChild(a),(l=document.createElement("button")).type="button",l.className=o.className,s.button=l,o.title&&(l.title=o.title),o.click&&(l.onclick=function(e){e.preventDefault(),i.hide(),o.click()}),a.appendChild(l),o.submenu?((c=document.createElement("div")).className="jsoneditor-icon",l.appendChild(c),(c=document.createElement("div")).className="jsoneditor-text"+(o.click?"":" jsoneditor-right-margin"),c.appendChild(document.createTextNode(o.text)),l.appendChild(c),(d=o.click?(l.className+=" jsoneditor-default",(u=document.createElement("button")).type="button",(s.buttonExpand=u).className="jsoneditor-expand",(c=document.createElement("div")).className="jsoneditor-expand",u.appendChild(c),a.appendChild(u),o.submenuTitle&&(u.title=o.submenuTitle),u):((h=document.createElement("div")).className="jsoneditor-expand",l.appendChild(h),l)).onclick=function(e){e.preventDefault(),i._onExpandItem(s),d.focus()},s.subItems=u=[],h=document.createElement("ul"),(s.ul=h).className="jsoneditor-menu",h.style.height="0",a.appendChild(h),e(h,u,o.submenu)):((u=document.createElement("div")).className="jsoneditor-icon",l.appendChild(u),(u=document.createElement("div")).className="jsoneditor-text",u.appendChild(document.createTextNode((0,r.Iu)(o.text))),l.appendChild(u)),n.push(s))}))}(s,this.dom.items,t),this.maxHeight=0,t.forEach((function(e){e=24*(t.length+(e.submenu?e.submenu.length:0)),i.maxHeight=Math.max(i.maxHeight,e)}))}var t,n;return t=e,(n=[{key:"_getVisibleButtons",value:function(){var e=[],t=this;return this.dom.items.forEach((function(n){e.push(n.button),n.buttonExpand&&e.push(n.buttonExpand),n.subItems&&n===t.expandedItem&&n.subItems.forEach((function(t){e.push(t.button),t.buttonExpand&&e.push(t.buttonExpand)}))})),e}},{key:"show",value:function(t,n,r){this.hide();var s=!0,a=t.parentNode,l=t.getBoundingClientRect(),d=a.getBoundingClientRect(),c=(a=n.getBoundingClientRect(),this);this.dom.absoluteAnchor=(0,i.w)(t,n,(function(){c.hide()})),l.bottom+this.maxHeight<a.bottom||l.top-this.maxHeight>a.top&&(s=!1),r=r?0:l.top-d.top,s?(d=t.offsetHeight,this.dom.menu.style.left="0",this.dom.menu.style.top=r+d+"px",this.dom.menu.style.bottom=""):(this.dom.menu.style.left="0",this.dom.menu.style.top="",this.dom.menu.style.bottom="0px"),this.limitHeight&&(a=s?a.bottom-l.bottom-10:l.top-a.top-10,this.dom.list.style.maxHeight=a+"px",this.dom.list.style.overflowY="auto"),this.dom.absoluteAnchor.appendChild(this.dom.root),this.selection=(0,o.getSelection)(),this.anchor=t,setTimeout((function(){c.dom.focusButton.focus()}),0),e.visibleMenu&&e.visibleMenu.hide(),e.visibleMenu=this}},{key:"hide",value:function(){this.dom.absoluteAnchor&&(this.dom.absoluteAnchor.destroy(),delete this.dom.absoluteAnchor),this.dom.root.parentNode&&(this.dom.root.parentNode.removeChild(this.dom.root),this.onClose&&this.onClose()),e.visibleMenu===this&&(e.visibleMenu=void 0)}},{key:"_onExpandItem",value:function(e){var t,n=this,i=e===this.expandedItem,r=this.expandedItem;r&&(r.ul.style.height="0",r.ul.style.padding="",setTimeout((function(){n.expandedItem!==r&&(r.ul.style.display="",o.removeClassName)(r.ul.parentNode,"jsoneditor-selected")}),300),this.expandedItem=void 0),i||((t=e.ul).style.display="block",t.clientHeight,setTimeout((function(){if(n.expandedItem===e){for(var i=0,o=0;o<t.childNodes.length;o++)i+=t.childNodes[o].clientHeight;t.style.height=i+"px",t.style.padding="5px 10px"}}),0),(0,o.addClassName)(t.parentNode,"jsoneditor-selected"),this.expandedItem=e)}},{key:"_onKeyDown",value:function(e){var t,n,i,r,s=e.target,a=e.which,l=!1;27===a?(this.selection&&(0,o.setSelection)(this.selection),this.anchor&&this.anchor.focus(),this.hide(),l=!0):9===a?e.shiftKey?0===(n=(t=this._getVisibleButtons()).indexOf(s))&&(t[t.length-1].focus(),l=!0):(n=(t=this._getVisibleButtons()).indexOf(s))===t.length-1&&(t[0].focus(),l=!0):37===a?("jsoneditor-expand"===s.className&&(n=(t=this._getVisibleButtons()).indexOf(s),(i=t[n-1])&&i.focus()),l=!0):38===a?(n=(t=this._getVisibleButtons()).indexOf(s),(i=(i=(i=t[n-1])&&"jsoneditor-expand"===i.className?t[n-2]:i)||t[t.length-1])&&i.focus(),l=!0):39===a?(n=(t=this._getVisibleButtons()).indexOf(s),(r=t[n+1])&&"jsoneditor-expand"===r.className&&r.focus(),l=!0):40===a&&(n=(t=this._getVisibleButtons()).indexOf(s),(r=(r=(r=t[n+1])&&"jsoneditor-expand"===r.className?t[n+2]:r)||t[0])&&(r.focus(),l=!0),l=!0),l&&(e.stopPropagation(),e.preventDefault())}}])&&s(t.prototype,n),e}();a.visibleMenu=void 0},436:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,{Q:function(){return o}});var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errorTableVisible=t.errorTableVisible,this.onToggleVisibility=t.onToggleVisibility,this.onFocusLine=t.onFocusLine||function(){},this.onChangeHeight=t.onChangeHeight,this.dom={};var n=document.createElement("div");n.className="jsoneditor-validation-errors-container",this.dom.validationErrorsContainer=n,(t=document.createElement("div")).style.display="none",t.className="jsoneditor-additional-errors fadein",t.textContent="Scroll for more ▿",this.dom.additionalErrorsIndication=t,n.appendChild(t),(t=document.createElement("span")).className="jsoneditor-validation-error-icon",t.style.display="none",this.dom.validationErrorIcon=t,(t=document.createElement("span")).className="jsoneditor-validation-error-count",t.style.display="none",this.dom.validationErrorCount=t,this.dom.parseErrorIndication=document.createElement("span"),this.dom.parseErrorIndication.className="jsoneditor-parse-error-icon",this.dom.parseErrorIndication.style.display="none"}var t,n;return t=e,(n=[{key:"getErrorTable",value:function(){return this.dom.validationErrorsContainer}},{key:"getErrorCounter",value:function(){return this.dom.validationErrorCount}},{key:"getWarningIcon",value:function(){return this.dom.validationErrorIcon}},{key:"getErrorIcon",value:function(){return this.dom.parseErrorIndication}},{key:"toggleTableVisibility",value:function(){this.errorTableVisible=!this.errorTableVisible,this.onToggleVisibility(this.errorTableVisible)}},{key:"setErrors",value:function(e,t){var n,i,o=this;this.dom.validationErrors&&(this.dom.validationErrors.parentNode.removeChild(this.dom.validationErrors),this.dom.validationErrors=null,this.dom.additionalErrorsIndication.style.display="none"),this.errorTableVisible&&0<e.length?((r=document.createElement("div")).className="jsoneditor-validation-errors",(n=document.createElement("table")).className="jsoneditor-text-errors",r.appendChild(n),i=document.createElement("tbody"),n.appendChild(i),e.forEach((function(e){var n;isNaN(e.line)?!e.dataPath||(d=t.find((function(t){return t.path===e.dataPath})))&&(n=d.line+1):n=e.line;var r=document.createElement("tr");r.className=isNaN(n)?"":"jump-to-line","error"===e.type?r.className+=" parse-error":r.className+=" validation-error";var s,a,l=document.createElement("td"),d=document.createElement("button");d.className="jsoneditor-schema-error",l.appendChild(d),r.appendChild(l),(l=document.createElement("td")).style="white-space: nowrap;",l.textContent=isNaN(n)?"":"Ln "+n,r.appendChild(l),"string"==typeof e?((s=document.createElement("td")).colSpan=2,(a=document.createElement("pre")).appendChild(document.createTextNode(e)),s.appendChild(a),r.appendChild(s)):((a=document.createElement("td")).appendChild(document.createTextNode(e.dataPath||"")),r.appendChild(a),s=document.createElement("td"),(a=document.createElement("pre")).appendChild(document.createTextNode(e.message)),s.appendChild(a),r.appendChild(s)),r.onclick=function(){o.onFocusLine(n)},i.appendChild(r)})),this.dom.validationErrors=r,this.dom.validationErrorsContainer.appendChild(r),this.dom.additionalErrorsIndication.title=e.length+" errors total",this.dom.validationErrorsContainer.clientHeight<this.dom.validationErrorsContainer.scrollHeight?(this.dom.additionalErrorsIndication.style.display="block",this.dom.validationErrorsContainer.onscroll=function(){o.dom.additionalErrorsIndication.style.display=0<o.dom.validationErrorsContainer.clientHeight&&0===o.dom.validationErrorsContainer.scrollTop?"block":"none"}):this.dom.validationErrorsContainer.onscroll=void 0,r=this.dom.validationErrorsContainer.clientHeight+(this.dom.statusBar?this.dom.statusBar.clientHeight:0),this.onChangeHeight(r)):this.onChangeHeight(0);var r=e.filter((function(e){return"error"!==e.type})).length;0<r?(this.dom.validationErrorCount.style.display="inline",this.dom.validationErrorCount.innerText=r,this.dom.validationErrorCount.onclick=this.toggleTableVisibility.bind(this),this.dom.validationErrorIcon.style.display="inline",this.dom.validationErrorIcon.title=r+" schema validation error(s) found",this.dom.validationErrorIcon.onclick=this.toggleTableVisibility.bind(this)):(this.dom.validationErrorCount.style.display="none",this.dom.validationErrorIcon.style.display="none"),e.some((function(e){return"error"===e.type}))?(e=e[0].line,this.dom.parseErrorIndication.style.display="block",this.dom.parseErrorIndication.title=isNaN(e)?"parse error - check that the json is valid":"parse error on line "+e,this.dom.parseErrorIndication.onclick=this.toggleTableVisibility.bind(this)):this.dom.parseErrorIndication.style.display="none"}}])&&i(t.prototype,n),e}()},474:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,{R:function(){return o}});var o=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=t.target||null,!this.target)throw new Error('FocusTracker constructor called without a "target" to track.');this.onFocus="function"==typeof t.onFocus?t.onFocus:null,this.onBlur="function"==typeof t.onBlur?t.onBlur:null,this._onClick=this._onEvent.bind(this),this._onKeyUp=function(e){9!==e.which&&9!==e.keyCode||this._onEvent(e)}.bind(this),this.focusFlag=!1,this.firstEventFlag=!0,(this.onFocus||this.onBlur)&&(document.addEventListener("click",this._onClick),document.addEventListener("keyup",this._onKeyUp))}var t,n;return t=e,(n=[{key:"destroy",value:function(){document.removeEventListener("click",this._onClick),document.removeEventListener("keyup",this._onKeyUp),this._onEvent({target:document.body})}},{key:"_onEvent",value:function(e){(e=(e=e.target)===this.target||!(!this.target.contains(e)&&!this.target.contains(document.activeElement)))?this.focusFlag||(this.onFocus&&this.onFocus({type:"focus",target:this.target}),this.focusFlag=!0):(this.focusFlag||this.firstEventFlag)&&(this.onBlur&&this.onBlur({type:"blur",target:this.target}),this.focusFlag=!1,this.firstEventFlag&&(this.firstEventFlag=!1))}}])&&i(t.prototype,n),e}()},161:function(e,t,n){"use strict";var i=n(170),o=n(37),r=n(38).treeModeMixins,s=n(956).textModeMixins,a=n(341).previewModeMixins,l=(m=n(791)).clear,d=m.extend,c=m.getInnerText,h=m.getInternetExplorerVersion,u=m.parse,p=n(744).tryRequireAjv,f=n(558).showTransformModal,m=n(210).showSortModal,g=p();function v(e,t,n){if(!(this instanceof v))throw new Error('JSONEditor constructor called without "new".');var i=h();if(-1!==i&&i<9)throw new Error("Unsupported browser, IE9 or newer required. Please install the newest version of your browser.");t&&(t.error&&(console.warn('Option "error" has been renamed to "onError"'),t.onError=t.error,delete t.error),t.change&&(console.warn('Option "change" has been renamed to "onChange"'),t.onChange=t.change,delete t.change),t.editable&&(console.warn('Option "editable" has been renamed to "onEditable"'),t.onEditable=t.editable,delete t.editable),t.onChangeJSON&&("text"!==t.mode&&"code"!==t.mode&&(!t.modes||-1===t.modes.indexOf("text")&&-1===t.modes.indexOf("code"))||console.warn('Option "onChangeJSON" is not applicable to modes "text" and "code". Use "onChangeText" or "onChange" instead.')),t&&Object.keys(t).forEach((function(e){-1===v.VALID_OPTIONS.indexOf(e)&&console.warn('Unknown option "'+e+'". This option will be ignored')}))),arguments.length&&this._create(e,t,n)}"undefined"==typeof Promise&&console.error("Promise undefined. Please load a Promise polyfill in the browser in order to use JSONEditor"),v.modes={},v.prototype.DEBOUNCE_INTERVAL=150,v.VALID_OPTIONS=["ajv","schema","schemaRefs","templates","ace","theme","autocomplete","onChange","onChangeJSON","onChangeText","onEditable","onError","onEvent","onModeChange","onNodeName","onValidate","onCreateMenu","onSelectionChange","onTextSelectionChange","onClassName","onFocus","onBlur","colorPicker","onColorPicker","timestampTag","timestampFormat","escapeUnicode","history","search","mode","modes","name","indentation","sortObjectKeys","navigationBar","statusBar","mainMenuBar","languages","language","enableSort","enableTransform","limitDragging","maxVisibleChilds","onValidationError","modalAnchor","popupAnchor","createQuery","executeQuery","queryDescription"],v.prototype._create=function(e,t,n){this.container=e,this.options=t||{},this.json=n||{},n=this.options.mode||this.options.modes&&this.options.modes[0]||"tree",this.setMode(n)},v.prototype.destroy=function(){},v.prototype.set=function(e){this.json=e},v.prototype.get=function(){return this.json},v.prototype.setText=function(e){this.json=u(e)},v.prototype.getText=function(){return JSON.stringify(this.json)},v.prototype.setName=function(e){this.options||(this.options={}),this.options.name=e},v.prototype.getName=function(){return this.options&&this.options.name},v.prototype.setMode=function(e){if(e!==this.options.mode||!this.create){var t=this.container,n=d({},this.options),i=n.mode;n.mode=e;var o=v.modes[e];if(!o)throw new Error('Unknown mode "'+n.mode+'"');try{var r="text"===o.data,s=this.getName(),a=this[r?"getText":"get"]();if(this.destroy(),l(this),d(this,o.mixin),this.create(t,n),this.setName(s),this[r?"setText":"set"](a),"function"==typeof o.load)try{o.load.call(this)}catch(e){console.error(e)}if("function"==typeof n.onModeChange&&e!==i)try{n.onModeChange(e,i)}catch(e){console.error(e)}}catch(e){this._onError(e)}}},v.prototype.getMode=function(){return this.options.mode},v.prototype._onError=function(e){if(!this.options||"function"!=typeof this.options.onError)throw e;this.options.onError(e)},v.prototype.setSchema=function(e,t){if(e){var i;try{this.options.ajv?i=this.options.ajv:((i=g({allErrors:!0,verbose:!0,schemaId:"auto",$data:!0})).addMetaSchema(n(Object(function(){var e=new Error("Cannot find module 'ajv/lib/refs/json-schema-draft-04.json'");throw e.code="MODULE_NOT_FOUND",e}()))),i.addMetaSchema(n(Object(function(){var e=new Error("Cannot find module 'ajv/lib/refs/json-schema-draft-06.json'");throw e.code="MODULE_NOT_FOUND",e}()))))}catch(e){console.warn("Failed to create an instance of Ajv, JSON Schema validation is not available. Please use a JSONEditor bundle including Ajv, or pass an instance of Ajv as via the configuration option `ajv`.")}if(i){if(t){for(var o in t)i.removeSchema(o),t[o]&&i.addSchema(t[o],o);this.options.schemaRefs=t}this.validateSchema=i.compile(e),this.options.schema=e,this.validate()}this.refresh()}else this.validateSchema=null,this.options.schema=null,this.options.schemaRefs=null,this.validate(),this.refresh()},v.prototype.validate=function(){},v.prototype.refresh=function(){},v.registerMode=function(e){var t;if(Array.isArray(e))for(o=0;o<e.length;o++)v.registerMode(e[o]);else{if(!("mode"in e))throw new Error('Property "mode" missing');if(!("mixin"in e))throw new Error('Property "mixin" missing');if(!("data"in e))throw new Error('Property "data" missing');var n=e.mode;if(n in v.modes)throw new Error('Mode "'+n+'" already registered');if("function"!=typeof e.mixin.create)throw new Error('Required function "create" missing on mixin');for(var i=["setMode","registerMode","modes"],o=0;o<i.length;o++)if((t=i[o])in e.mixin)throw new Error('Reserved property "'+t+'" not allowed in mixin');v.modes[n]=e}},v.registerMode(r),v.registerMode(s),v.registerMode(a),v.ace=i,v.Ajv=g,v.VanillaPicker=o,v.showTransformModal=f,v.showSortModal=m,v.getInnerText=c,v.default=v,e.exports=v},617:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var i=n(897),o=n(907);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t,n,r,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a={code:{text:(0,o.Iu)("modeCodeText"),title:(0,o.Iu)("modeCodeTitle"),click:function(){s("code")}},form:{text:(0,o.Iu)("modeFormText"),title:(0,o.Iu)("modeFormTitle"),click:function(){s("form")}},text:{text:(0,o.Iu)("modeTextText"),title:(0,o.Iu)("modeTextTitle"),click:function(){s("text")}},tree:{text:(0,o.Iu)("modeTreeText"),title:(0,o.Iu)("modeTreeTitle"),click:function(){s("tree")}},view:{text:(0,o.Iu)("modeViewText"),title:(0,o.Iu)("modeViewTitle"),click:function(){s("view")}},preview:{text:(0,o.Iu)("modePreviewText"),title:(0,o.Iu)("modePreviewTitle"),click:function(){s("preview")}}},l=[],d=0;d<n.length;d++){var c=n[d],h=a[c];if(!h)throw new Error('Unknown mode "'+c+'"');h.className="jsoneditor-type-modes"+(r===c?" jsoneditor-selected":""),l.push(h)}if(!(u=a[r]))throw new Error('Unknown mode "'+r+'"');var u=u.text,p=document.createElement("button");p.type="button",p.className="jsoneditor-modes jsoneditor-separator",p.textContent=u+" ▾",p.title=(0,o.Iu)("modeEditorTitle"),p.onclick=function(){new i.x(l).show(p,t)},(u=document.createElement("div")).className="jsoneditor-modes",u.style.position="relative",u.appendChild(p),t.appendChild(u),this.dom={container:t,box:p,frame:u}}var t,n;return t=e,(n=[{key:"focus",value:function(){this.dom.box.focus()}},{key:"destroy",value:function(){this.dom&&this.dom.frame&&this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom=null}}])&&r(t.prototype,n),e}()},170:function(e,t,n){var i;if(window.ace)i=window.ace;else try{i=n(Object(function(){var e=new Error("Cannot find module 'ace-builds/src-noconflict/ace'");throw e.code="MODULE_NOT_FOUND",e}())),n(Object(function(){var e=new Error("Cannot find module 'ace-builds/src-noconflict/mode-json'");throw e.code="MODULE_NOT_FOUND",e}())),n(Object(function(){var e=new Error("Cannot find module 'ace-builds/src-noconflict/ext-searchbox'");throw e.code="MODULE_NOT_FOUND",e}()));var o=n(Object(function(){var e=new Error("Cannot find module '../generated/worker-json-data-url'");throw e.code="MODULE_NOT_FOUND",e}()));i.config.setModuleUrl("ace/mode/json_worker",o)}catch(e){}e.exports=i},864:function(){window.ace.define("ace/theme/jsoneditor",["require","exports","module","ace/lib/dom"],(function(e,t,n){t.isDark=!1,t.cssClass="ace-jsoneditor",t.cssText='.ace-jsoneditor .ace_gutter {\nbackground: #ebebeb;\ncolor: #333\n}\n\n.ace-jsoneditor.ace_editor {\nfont-family: "dejavu sans mono", "droid sans mono", consolas, monaco, "lucida console", "courier new", courier, monospace, sans-serif;\nline-height: 1.3;\nbackground-color: #fff;\n}\n.ace-jsoneditor .ace_print-margin {\nwidth: 1px;\nbackground: #e8e8e8\n}\n.ace-jsoneditor .ace_scroller {\nbackground-color: #FFFFFF\n}\n.ace-jsoneditor .ace_text-layer {\ncolor: gray\n}\n.ace-jsoneditor .ace_variable {\ncolor: #1a1a1a\n}\n.ace-jsoneditor .ace_cursor {\nborder-left: 2px solid #000000\n}\n.ace-jsoneditor .ace_overwrite-cursors .ace_cursor {\nborder-left: 0px;\nborder-bottom: 1px solid #000000\n}\n.ace-jsoneditor .ace_marker-layer .ace_selection {\nbackground: lightgray\n}\n.ace-jsoneditor.ace_multiselect .ace_selection.ace_start {\nbox-shadow: 0 0 3px 0px #FFFFFF;\nborder-radius: 2px\n}\n.ace-jsoneditor .ace_marker-layer .ace_step {\nbackground: rgb(255, 255, 0)\n}\n.ace-jsoneditor .ace_marker-layer .ace_bracket {\nmargin: -1px 0 0 -1px;\nborder: 1px solid #BFBFBF\n}\n.ace-jsoneditor .ace_marker-layer .ace_active-line {\nbackground: #FFFBD1\n}\n.ace-jsoneditor .ace_gutter-active-line {\nbackground-color : #dcdcdc\n}\n.ace-jsoneditor .ace_marker-layer .ace_selected-word {\nborder: 1px solid lightgray\n}\n.ace-jsoneditor .ace_invisible {\ncolor: #BFBFBF\n}\n.ace-jsoneditor .ace_keyword,\n.ace-jsoneditor .ace_meta,\n.ace-jsoneditor .ace_support.ace_constant.ace_property-value {\ncolor: #AF956F\n}\n.ace-jsoneditor .ace_keyword.ace_operator {\ncolor: #484848\n}\n.ace-jsoneditor .ace_keyword.ace_other.ace_unit {\ncolor: #96DC5F\n}\n.ace-jsoneditor .ace_constant.ace_language {\ncolor: darkorange\n}\n.ace-jsoneditor .ace_constant.ace_numeric {\ncolor: red\n}\n.ace-jsoneditor .ace_constant.ace_character.ace_entity {\ncolor: #BF78CC\n}\n.ace-jsoneditor .ace_invalid {\ncolor: #FFFFFF;\nbackground-color: #FF002A;\n}\n.ace-jsoneditor .ace_fold {\nbackground-color: #AF956F;\nborder-color: #000000\n}\n.ace-jsoneditor .ace_storage,\n.ace-jsoneditor .ace_support.ace_class,\n.ace-jsoneditor .ace_support.ace_function,\n.ace-jsoneditor .ace_support.ace_other,\n.ace-jsoneditor .ace_support.ace_type {\ncolor: #C52727\n}\n.ace-jsoneditor .ace_string {\ncolor: green\n}\n.ace-jsoneditor .ace_comment {\ncolor: #BCC8BA\n}\n.ace-jsoneditor .ace_entity.ace_name.ace_tag,\n.ace-jsoneditor .ace_entity.ace_other.ace_attribute-name {\ncolor: #606060\n}\n.ace-jsoneditor .ace_markup.ace_underline {\ntext-decoration: underline\n}\n.ace-jsoneditor .ace_indent-guide {\nbackground: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y\n}',e("../lib/dom").importCssString(t.cssText,t.cssClass)}))},589:function(e,t){var n=function(){var e,t={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(e,t,n,i,o,r,s){var a=r.length-1;switch(o){case 1:this.$=e.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(e);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=r[a-1];case 13:this.$={};break;case 14:this.$=r[a-1];break;case 15:this.$=[r[a-2],r[a]];break;case 16:this.$={},this.$[r[a][0]]=r[a][1];break;case 17:this.$=r[a-2],r[a-2][r[a][0]]=r[a][1];break;case 18:this.$=[];break;case 19:this.$=r[a-1];break;case 20:this.$=[r[a]];break;case 21:this.$=r[a-2],r[a-2].push(r[a])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],i=[null],o=[],r=this.table,s="",a=0,l=0,d=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;function h(){var e=t.lexer.lex()||1;return"number"!=typeof e&&t.symbols_[e]||e}o.push(c),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var u,p,f,m,g,v,y,b,x={};;){if(f=n[n.length-1],void 0===(m=this.defaultActions[f]||(null==u&&(u=h()),r[f]&&r[f][u]))||!m.length||!m[0]){if(!d){for(v in b=[],r[f])this.terminals_[v]&&2<v&&b.push("'"+this.terminals_[v]+"'");var C="";C=this.lexer.showPosition?"Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+this.terminals_[u]+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==u?"end of input":"'"+(this.terminals_[u]||u)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[u]||u,line:this.lexer.yylineno,loc:c,expected:b})}if(3==d){if(1==u)throw new Error(C||"Parsing halted.");l=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc,u=h()}for(;!(2..toString()in r[f]);){if(0==f)throw new Error(C||"Parsing halted.");n.length=n.length-2,i.length=i.length-1,o.length=o.length-1,f=n[n.length-1]}p=u,u=2,m=r[f=n[n.length-1]]&&r[f][2],d=3}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+u);switch(m[0]){case 1:n.push(u),i.push(this.lexer.yytext),o.push(this.lexer.yylloc),n.push(m[1]),u=null,p?(u=p,p=null):(l=this.lexer.yyleng,s=this.lexer.yytext,a=this.lexer.yylineno,c=this.lexer.yylloc,0<d&&d--);break;case 2:if(y=this.productions_[m[1]][1],x.$=i[i.length-y],x._$={first_line:o[o.length-(y||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(y||1)].first_column,last_column:o[o.length-1].last_column},void 0!==(g=this.performAction.call(x,s,l,a,this.yy,m[1],i,o)))return g;y&&(n=n.slice(0,-1*y*2),i=i.slice(0,-1*y),o=o.slice(0,-1*y)),n.push(this.productions_[m[1]][0]),i.push(x.$),o.push(x._$),y=r[n[n.length-2]][n[n.length-1]],n.push(y);break;case 3:return!0}}return!0}};return e={EOF:1,parseError:function(e,t){if(!this.yy.parseError)throw new Error(e);this.yy.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e,e.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},less:function(e){this._input=this.match.slice(e)+this._input},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),r=0;r<o.length&&(!(t=this._input.match(this.rules[o[r]]))||e&&!(t[0].length>e[0].length)||(e=t,n=r,this.options.flex));r++);return e?((i=e[0].match(/\n.*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-1:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],i=this.performAction.call(this,this.yy,this,o[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i||void 0):""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,t,n,i){switch(n){case 0:break;case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},t.lexer=e,t}();t.parser=n,t.parse=n.parse.bind(n)},879:function(e){"use strict";function t(){}var n={defaultSelected:!0,width:"auto",disabled:!1,searchable:!0,clearable:!1,sortSelected:!1,allowDeselect:!1,closeOnScroll:!1,nativeDropdown:!1,placeholder:"Select an option...",taggable:!1,tagPlaceholder:"Enter a tag..."};t.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){this._events=this._events||{},e in this._events!=0&&this._events[e].splice(this._events[e].indexOf(t),1)},emit:function(e){if(this._events=this._events||{},e in this._events!=0)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},t.mixin=function(e){for(var n=["on","off","emit"],i=0;i<n.length;i++)"function"==typeof e?e.prototype[n[i]]=t.prototype[n[i]]:e[n[i]]=t.prototype[n[i]];return e};var i={extend:function(e,t){for(var n in t=t||{},e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(t[n]=e[n]));return t},each:function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(n,i,e[i],e);else for(var o=0,r=e.length;o<r;o++)t.call(n,o,e[o],e)},createElement:function(e,t){var n,i,o=document,r=o.createElement(e);if(t&&"[object Object]"===Object.prototype.toString.call(t))for(n in t)n in r?r[n]=t[n]:"html"===n?r.textContent=t[n]:"text"===n?(i=o.createTextNode(t[n]),r.appendChild(i)):r.setAttribute(n,t[n]);return r},hasClass:function(e,t){if(e)return e.classList?e.classList.contains(t):!!e.className&&!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},addClass:function(e,t){i.hasClass(e,t)||(e.classList?e.classList.add(t):e.className=e.className.trim()+" "+t)},removeClass:function(e,t){i.hasClass(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," "))},closest:function(e,t){return e&&e!==document.body&&(t(e)?e:i.closest(e.parentNode,t))},isInt:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},debounce:function(e,t,n){var i;return function(){var o=this,r=arguments,s=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(o,r)}),t),s&&e.apply(o,r)}},rect:function(e,t){var n=window,i=e.getBoundingClientRect();return e=t?n.pageXOffset:0,n=t?n.pageYOffset:0,{bottom:i.bottom+n,height:i.height,left:i.left+e,right:i.right+e,top:i.top+n,width:i.width}},includes:function(e,t){return-1<e.indexOf(t)},truncate:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}};function o(e,t){return e.hasOwnProperty(t)&&(!0===e[t]||e[t].length)}function r(e,t,n){e.parentNode?e.parentNode.parentNode||t.appendChild(e.parentNode):t.appendChild(e),i.removeClass(e,"excluded"),n||(e.textContent=e.textContent+"")}function s(){var e,t;this.items.length&&(e=document.createDocumentFragment(),this.config.pagination?(t=this.pages.slice(0,this.pageIndex),i.each(t,(function(t,n){i.each(n,(function(t,n){r(n,e,this.customOption)}),this)}),this)):i.each(this.items,(function(t,n){r(n,e,this.customOption)}),this),e.childElementCount&&(i.removeClass(this.items[this.navIndex],"active"),this.navIndex=e.querySelector(".selectr-option").idx,i.addClass(this.items[this.navIndex],"active")),this.tree.appendChild(e))}function a(e,t){return t=t||e,t=this.customOption?this.config.renderOption(t):e.textContent,(t=i.createElement("li",{class:"selectr-option",html:t,role:"treeitem","aria-selected":!1})).idx=e.idx,this.items.push(t),e.defaultSelected&&this.defaultSelected.push(e.idx),e.disabled&&(t.disabled=!0,i.addClass(t,"disabled")),t}function l(){(this.config.searchable||this.config.taggable)&&(this.input.value=null,this.searching=!1,this.config.searchable&&i.removeClass(this.inputContainer,"active"),i.hasClass(this.container,"notice")&&(i.removeClass(this.container,"notice"),i.addClass(this.container,"open"),this.input.focus()),i.each(this.items,(function(e,t){i.removeClass(t,"excluded"),this.customOption||(t.textContent=t.textContent+"")}),this))}function d(e,t){if(t=t||{},!e)throw new Error("You must supply either a HTMLSelectElement or a CSS3 selector string.");if("string"==typeof(this.el=e)&&(this.el=document.querySelector(e)),null===this.el)throw new Error("The element you passed to Selectr can not be found.");if("select"!==this.el.nodeName.toLowerCase())throw new Error("The element you passed to Selectr is not a HTMLSelectElement.");this.render(t)}var c=function(){var e,t=this.tree,n=t.scrollTop;t.scrollHeight-t.offsetHeight<=n&&this.pageIndex<this.pages.length&&(e=document.createDocumentFragment(),i.each(this.pages[this.pageIndex],(function(t,n){r(n,e,this.customOption)}),this),t.appendChild(e),this.pageIndex++,this.emit("selectr.paginate",{items:this.items.length,total:this.data.length,page:this.pageIndex,pages:this.pages.length}))};d.prototype.render=function(e){var r;this.rendered||(this.config=i.extend(n,e),this.originalType=this.el.type,this.originalIndex=this.el.tabIndex,this.defaultSelected=[],this.originalOptionCount=this.el.options.length,(this.config.multiple||this.config.taggable)&&(this.el.multiple=!0),this.disabled=o(this.config,"disabled"),this.opened=!1,this.config.taggable&&(this.config.searchable=!1),this.navigating=!1,this.mobileDevice=!1,/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent)&&(this.mobileDevice=!0),this.customOption=this.config.hasOwnProperty("renderOption")&&"function"==typeof this.config.renderOption,this.customSelected=this.config.hasOwnProperty("renderSelection")&&"function"==typeof this.config.renderSelection,t.mixin(this),function(){this.requiresPagination=this.config.pagination&&0<this.config.pagination,o(this.config,"width")&&(i.isInt(this.config.width)?this.width=this.config.width+"px":"auto"===this.config.width?this.width="100%":i.includes(this.config.width,"%")&&(this.width=this.config.width)),this.container=i.createElement("div",{class:"selectr-container"}),this.config.customClass&&i.addClass(this.container,this.config.customClass),this.mobileDevice?i.addClass(this.container,"selectr-mobile"):i.addClass(this.container,"selectr-desktop"),this.el.tabIndex=-1,this.config.nativeDropdown||this.mobileDevice?i.addClass(this.el,"selectr-visible"):i.addClass(this.el,"selectr-hidden"),this.selected=i.createElement("div",{class:"selectr-selected",disabled:this.disabled,tabIndex:1,"aria-expanded":!1}),this.label=i.createElement(this.el.multiple?"ul":"span",{class:"selectr-label"});var e,t=i.createElement("div",{class:"selectr-options-container"});this.tree=i.createElement("ul",{class:"selectr-options",role:"tree","aria-hidden":!0,"aria-expanded":!1}),this.notice=i.createElement("div",{class:"selectr-notice"}),this.el.setAttribute("aria-hidden",!0),this.disabled&&(this.el.disabled=!0),this.el.multiple&&(i.addClass(this.label,"selectr-tags"),i.addClass(this.container,"multiple"),this.tags=[],this.selectedValues=this.getSelectedProperties("value"),this.selectedIndexes=this.getSelectedProperties("idx")),this.selected.appendChild(this.label),this.config.clearable&&(this.selectClear=i.createElement("button",{class:"selectr-clear",type:"button"}),this.container.appendChild(this.selectClear),i.addClass(this.container,"clearable")),this.config.taggable&&(e=i.createElement("li",{class:"input-tag"}),this.input=i.createElement("input",{class:"selectr-tag-input",placeholder:this.config.tagPlaceholder,tagIndex:0,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"textbox",type:"search"}),e.appendChild(this.input),this.label.appendChild(e),i.addClass(this.container,"taggable"),this.tagSeperators=[","],this.config.tagSeperators&&(this.tagSeperators=this.tagSeperators.concat(this.config.tagSeperators))),this.config.searchable&&(this.input=i.createElement("input",{class:"selectr-input",tagIndex:-1,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"textbox",type:"search"}),this.inputClear=i.createElement("button",{class:"selectr-input-clear",type:"button"}),this.inputContainer=i.createElement("div",{class:"selectr-input-container"}),this.inputContainer.appendChild(this.input),this.inputContainer.appendChild(this.inputClear),t.appendChild(this.inputContainer)),t.appendChild(this.notice),t.appendChild(this.tree),this.items=[],this.options=[],this.el.options.length&&(this.options=[].slice.call(this.el.options));var n,r,s,l=!1,d=0;this.el.children.length&&i.each(this.el.children,(function(e,t){"OPTGROUP"===t.nodeName?(l=i.createElement("ul",{class:"selectr-optgroup",role:"group",html:"<li class='selectr-optgroup--label'>"+t.label+"</li>"}),i.each(t.children,(function(e,t){t.idx=d,l.appendChild(a.call(this,t,l)),d++}),this)):(t.idx=d,a.call(this,t),d++)}),this),this.config.data&&Array.isArray(this.config.data)&&(n=!(this.data=[]),l=!1,d=0,i.each(this.config.data,(function(e,t){o(t,"children")?(n=i.createElement("optgroup",{label:t.text}),l=i.createElement("ul",{class:"selectr-optgroup",role:"group",html:"<li class='selectr-optgroup--label'>"+t.text+"</li>"}),i.each(t.children,(function(e,t){(r=new Option(t.text,t.value,!1,t.hasOwnProperty("selected")&&!0===t.selected)).disabled=o(t,"disabled"),this.options.push(r),n.appendChild(r),r.idx=d,l.appendChild(a.call(this,r,t)),this.data[d]=t,d++}),this)):((r=new Option(t.text,t.value,!1,t.hasOwnProperty("selected")&&!0===t.selected)).disabled=o(t,"disabled"),this.options.push(r),r.idx=d,a.call(this,r,t),this.data[d]=t,d++)}),this)),this.setSelected(!0);for(var c=this.navIndex=0;c<this.items.length;c++)if(s=this.items[c],!i.hasClass(s,"disabled")){i.addClass(s,"active"),this.navIndex=c;break}this.requiresPagination&&(this.pageIndex=1,this.paginate()),this.container.appendChild(this.selected),this.container.appendChild(t),this.placeEl=i.createElement("div",{class:"selectr-placeholder"}),this.setPlaceholder(),this.selected.appendChild(this.placeEl),this.disabled&&this.disable(),this.el.parentNode.insertBefore(this.container,this.el),this.container.appendChild(this.el)}.call(this),this.bindEvents(),this.update(),this.optsRect=i.rect(this.tree),this.rendered=!0,this.el.multiple||(this.el.selectedIndex=this.selectedIndex),r=this,setTimeout((function(){r.emit("selectr.init")}),20))},d.prototype.getSelected=function(){return this.el.querySelectorAll("option:checked")},d.prototype.getSelectedProperties=function(e){var t=this.getSelected();return[].slice.call(t).map((function(t){return t[e]})).filter((function(e){return null!=e}))},d.prototype.bindEvents=function(){var e=this;this.events={},this.events.dismiss=function(e){e=e.target,this.container.contains(e)||!this.opened&&!i.hasClass(this.container,"notice")||this.close()}.bind(this),this.events.navigate=function(e){if(e=e||window.event,this.items.length&&this.opened&&i.includes([13,38,40],e.which)){if(e.preventDefault(),13===e.which)return!(this.config.taggable&&0<this.input.value.length)&&this.change(this.navIndex);var t,n=this.items[this.navIndex];switch(e.which){case 38:(t=0)<this.navIndex&&this.navIndex--;break;case 40:this.navIndex<this.items.length-(t=1)&&this.navIndex++}for(this.navigating=!0;i.hasClass(this.items[this.navIndex],"disabled")||i.hasClass(this.items[this.navIndex],"excluded");)if(t?this.navIndex++:this.navIndex--,this.searching){if(this.navIndex>this.tree.lastElementChild.idx){this.navIndex=this.tree.lastElementChild.idx;break}if(this.navIndex<this.tree.firstElementChild.idx){this.navIndex=this.tree.firstElementChild.idx;break}}e=i.rect(this.items[this.navIndex]),t?(0===this.navIndex?this.tree.scrollTop=0:e.top+e.height>this.optsRect.top+this.optsRect.height&&(this.tree.scrollTop=this.tree.scrollTop+(e.top+e.height-(this.optsRect.top+this.optsRect.height))),this.navIndex===this.tree.childElementCount-1&&this.requiresPagination&&c.call(this)):0===this.navIndex?this.tree.scrollTop=0:e.top-this.optsRect.top<0&&(this.tree.scrollTop=this.tree.scrollTop+(e.top-this.optsRect.top)),n&&i.removeClass(n,"active"),i.addClass(this.items[this.navIndex],"active")}else this.navigating=!1}.bind(this),this.events.reset=this.reset.bind(this),(this.config.nativeDropdown||this.mobileDevice)&&(this.container.addEventListener("touchstart",(function(t){t.changedTouches[0].target===e.el&&e.toggle()})),(this.config.nativeDropdown||this.mobileDevice)&&this.container.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),t.target===e.el&&e.toggle()})),this.el.addEventListener("change",(function(t){var n;e.el.multiple?(n=e.getSelectedProperties("idx"),n=function(e,t){for(var n,i=[],o=e.slice(0),r=0;r<t.length;r++)-1<(n=o.indexOf(t[r]))?o.splice(n,1):i.push(t[r]);return[i,o]}(e.selectedIndexes,n),i.each(n[0],(function(t,n){e.select(n)}),e),i.each(n[1],(function(t,n){e.deselect(n)}),e)):-1<e.el.selectedIndex&&e.select(e.el.selectedIndex)}))),this.config.nativeDropdown&&this.container.addEventListener("keydown",(function(t){"Enter"===t.key&&e.selected===document.activeElement&&(e.toggle(),setTimeout((function(){e.el.focus()}),200))})),this.selected.addEventListener("click",(function(t){e.disabled||e.toggle(),t.preventDefault(),t.stopPropagation()})),this.label.addEventListener("click",(function(t){i.hasClass(t.target,"selectr-tag-remove")&&e.deselect(t.target.parentNode.idx)})),this.selectClear&&this.selectClear.addEventListener("click",this.clear.bind(this)),this.tree.addEventListener("mousedown",(function(e){e.preventDefault()})),this.tree.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),(t=i.closest(t.target,(function(e){return e&&i.hasClass(e,"selectr-option")})))&&(i.hasClass(t,"disabled")||(i.hasClass(t,"selected")?(e.el.multiple||!e.el.multiple&&e.config.allowDeselect)&&e.deselect(t.idx):e.select(t.idx),e.opened&&!e.el.multiple&&e.close()))})),this.tree.addEventListener("mouseover",(function(t){i.hasClass(t.target,"selectr-option")&&(i.hasClass(t.target,"disabled")||(i.removeClass(e.items[e.navIndex],"active"),i.addClass(t.target,"active"),e.navIndex=[].slice.call(e.items).indexOf(t.target)))})),this.config.searchable&&(this.input.addEventListener("focus",(function(t){e.searching=!0})),this.input.addEventListener("blur",(function(t){e.searching=!1})),this.input.addEventListener("keyup",(function(t){e.search(),e.config.taggable||(this.value.length?i.addClass(this.parentNode,"active"):i.removeClass(this.parentNode,"active"))})),this.inputClear.addEventListener("click",(function(t){e.input.value=null,l.call(e),e.tree.childElementCount||s.call(e)}))),this.config.taggable&&this.input.addEventListener("keyup",(function(t){var n;e.search(),e.config.taggable&&this.value.length&&(n=this.value.trim(),13!==t.which&&!i.includes(e.tagSeperators,t.key)||(i.each(e.tagSeperators,(function(e,t){n=n.replace(t,"")})),e.add({value:n,text:n,selected:!0},!0)?(e.close(),l.call(e)):(this.value="",e.setMessage("That tag is already in use."))))})),this.update=i.debounce((function(){e.opened&&e.config.closeOnScroll&&e.close(),e.width&&(e.container.style.width=e.width),e.invert()}),50),this.requiresPagination&&(this.paginateItems=i.debounce((function(){c.call(this)}),50),this.tree.addEventListener("scroll",this.paginateItems.bind(this))),document.addEventListener("click",this.events.dismiss),window.addEventListener("keydown",this.events.navigate),window.addEventListener("resize",this.update),window.addEventListener("scroll",this.update),this.el.form&&this.el.form.addEventListener("reset",this.events.reset)},d.prototype.setSelected=function(e){var t;this.config.data||this.el.multiple||!this.el.options.length||(0===this.el.selectedIndex&&(this.el.options[0].defaultSelected||this.config.defaultSelected||(this.el.selectedIndex=-1)),this.selectedIndex=this.el.selectedIndex,-1<this.selectedIndex&&this.select(this.selectedIndex)),this.config.multiple&&"select-one"===this.originalType&&!this.config.data&&this.el.options[0].selected&&!this.el.options[0].defaultSelected&&(this.el.options[0].selected=!1),i.each(this.options,(function(e,t){t.selected&&t.defaultSelected&&this.select(t.idx)}),this),this.config.selectedValue&&this.setValue(this.config.selectedValue),this.config.data&&(!this.el.multiple&&this.config.defaultSelected&&this.el.selectedIndex<0&&this.select(0),t=0,i.each(this.config.data,(function(e,n){o(n,"children")?i.each(n.children,(function(e,n){n.hasOwnProperty("selected")&&!0===n.selected&&this.select(t),t++}),this):(n.hasOwnProperty("selected")&&!0===n.selected&&this.select(t),t++)}),this))},d.prototype.destroy=function(){this.rendered&&(this.emit("selectr.destroy"),"select-one"===this.originalType&&(this.el.multiple=!1),this.config.data&&(this.el.textContent=""),i.removeClass(this.el,"selectr-hidden"),this.el.form&&i.off(this.el.form,"reset",this.events.reset),i.off(document,"click",this.events.dismiss),i.off(document,"keydown",this.events.navigate),i.off(window,"resize",this.update),i.off(window,"scroll",this.update),this.container.parentNode.replaceChild(this.el,this.container),this.rendered=!1)},d.prototype.change=function(e){var t=this.items[e],n=this.options[e];n.disabled||(n.selected&&i.hasClass(t,"selected")?this.deselect(e):this.select(e),this.opened&&!this.el.multiple&&this.close())},d.prototype.select=function(e){var t=this.items[e],n=[].slice.call(this.el.options),o=this.options[e];if(this.el.multiple){if(i.includes(this.selectedIndexes,e))return!1;if(this.config.maxSelections&&this.tags.length===this.config.maxSelections)return this.setMessage("A maximum of "+this.config.maxSelections+" items can be selected.",!0),!1;this.selectedValues.push(o.value),this.selectedIndexes.push(e),function(e){var t,n=this,o=document.createDocumentFragment(),r=this.options[e.idx],s=this.data?this.data[e.idx]:r,a=this.customSelected?this.config.renderSelection(s):r.textContent;s=i.createElement("li",{class:"selectr-tag",html:a}),a=i.createElement("button",{class:"selectr-tag-remove",type:"button"}),s.appendChild(a),s.idx=e.idx,s.tag=r.value,this.tags.push(s),this.config.sortSelected?(r=this.tags.slice(),t=function(e,t){e.replace(/(\d+)|(\D+)/g,(function(e,n,i){t.push([n||1/0,i||""])}))},r.sort((function(e,i){var o,r,s=[],a=[];for(!0===n.config.sortSelected?(o=e.tag,r=i.tag):"text"===n.config.sortSelected&&(o=e.textContent,r=i.textContent),t(o,s),t(r,a);s.length&&a.length;){var l=s.shift(),d=a.shift();if(d=l[0]-d[0]||l[1].localeCompare(d[1]))return d}return s.length-a.length})),i.each(r,(function(e,t){o.appendChild(t)})),this.label.textContent=""):o.appendChild(s),this.config.taggable?this.label.insertBefore(o,this.input.parentNode):this.label.appendChild(o)}.call(this,t)}else{var r=this.data?this.data[e]:o;this.label.textContent=this.customSelected?this.config.renderSelection(r):o.textContent,this.selectedValue=o.value,this.selectedIndex=e,i.each(this.options,(function(t,n){var o=this.items[t];t!==e&&(o&&i.removeClass(o,"selected"),n.selected=!1,n.removeAttribute("selected"))}),this)}i.includes(n,o)||this.el.add(o),t.setAttribute("aria-selected",!0),i.addClass(t,"selected"),i.addClass(this.container,"has-selected"),o.selected=!0,o.setAttribute("selected",""),this.emit("selectr.change",o),this.emit("selectr.select",o)},d.prototype.deselect=function(e,t){var n=this.items[e],o=this.options[e];if(this.el.multiple){var r=this.selectedIndexes.indexOf(e);this.selectedIndexes.splice(r,1),r=this.selectedValues.indexOf(o.value),this.selectedValues.splice(r,1),function(e){var t=!1;i.each(this.tags,(function(n,i){i.idx===e.idx&&(t=i)}),this),t&&(this.label.removeChild(t),this.tags.splice(this.tags.indexOf(t),1))}.call(this,n),this.tags.length||i.removeClass(this.container,"has-selected")}else{if(!t&&!this.config.clearable&&!this.config.allowDeselect)return!1;this.label.textContent="",this.selectedValue=null,this.el.selectedIndex=this.selectedIndex=-1,i.removeClass(this.container,"has-selected")}this.items[e].setAttribute("aria-selected",!1),i.removeClass(this.items[e],"selected"),o.selected=!1,o.removeAttribute("selected"),this.emit("selectr.change",null),this.emit("selectr.deselect",o)},d.prototype.setValue=function(e){var t=Array.isArray(e);if(t||(e=e.toString().trim()),!this.el.multiple&&t)return!1;i.each(this.options,(function(n,o){(t&&i.includes(e.toString(),o.value)||o.value===e)&&this.change(o.idx)}),this)},d.prototype.getValue=function(e,t){var n,o;return this.el.multiple?e?this.selectedIndexes.length&&(o={values:[]},i.each(this.selectedIndexes,(function(e,t){t=this.options[t],o.values[e]={value:t.value,text:t.textContent}}),this)):o=this.selectedValues.slice():o=e?{value:(n=this.options[this.selectedIndex]).value,text:n.textContent}:this.selectedValue,o=e&&t?JSON.stringify(o):o},d.prototype.add=function(e,t){if(e){if(this.data=this.data||[],this.items=this.items||[],this.options=this.options||[],Array.isArray(e))i.each(e,(function(e,n){this.add(n,t)}),this);else if("[object Object]"===Object.prototype.toString.call(e)){if(t){var n=!1;if(i.each(this.options,(function(t,i){i.value.toLowerCase()===e.value.toLowerCase()&&(n=!0)})),n)return!1}var o=i.createElement("option",e);return this.data.push(e),this.options.push(o),o.idx=0<this.options.length?this.options.length-1:0,a.call(this,o),e.selected&&this.select(o.idx),o}return this.setPlaceholder(),this.config.pagination&&this.paginate(),!0}},d.prototype.remove=function(e){var t,n=[];Array.isArray(e)?i.each(e,(function(t,o){i.isInt(o)?n.push(this.getOptionByIndex(o)):"string"==typeof e&&n.push(this.getOptionByValue(o))}),this):i.isInt(e)?n.push(this.getOptionByIndex(e)):"string"==typeof e&&n.push(this.getOptionByValue(e)),n.length&&(i.each(n,(function(e,n){t=n.idx,this.el.remove(n),this.options.splice(t,1),(n=this.items[t].parentNode)&&n.removeChild(this.items[t]),this.items.splice(t,1),i.each(this.options,(function(e,t){t.idx=e,this.items[e].idx=e}),this)}),this),this.setPlaceholder(),this.config.pagination&&this.paginate())},d.prototype.removeAll=function(){this.clear(!0),i.each(this.el.options,(function(e,t){this.el.remove(t)}),this),i.truncate(this.tree),this.items=[],this.options=[],this.data=[],this.navIndex=0,this.requiresPagination&&(this.requiresPagination=!1,this.pageIndex=1,this.pages=[]),this.setPlaceholder()},d.prototype.search=function(e){var t,n,o;this.navigating||(e=e||this.input.value,t=document.createDocumentFragment(),this.removeMessage(),i.truncate(this.tree),1<e.length?(i.each(this.options,(function(n,o){var s,a=this.items[o.idx];i.includes(o.textContent.toLowerCase(),e.toLowerCase())&&!o.disabled?(r(a,t,this.customOption),i.removeClass(a,"excluded"),this.customOption||(a.textContent="",(s=function(e,t){var n=new RegExp(e,"i").exec(t);return n?(e=n.index,n=n.index+n[0].length,{before:t.substring(0,e),match:t.substring(e,n),after:t.substring(n)}):null}(e,o.textContent))&&(a.appendChild(document.createTextNode(s.before)),(o=document.createElement("span")).className="selectr-match",o.appendChild(document.createTextNode(s.match)),a.appendChild(o),a.appendChild(document.createTextNode(s.after))))):i.addClass(a,"excluded")}),this),t.childElementCount?(n=this.items[this.navIndex],o=t.firstElementChild,i.removeClass(n,"active"),this.navIndex=o.idx,i.addClass(o,"active")):this.config.taggable||this.setMessage("no results.")):s.call(this),this.tree.appendChild(t))},d.prototype.toggle=function(){this.disabled||(this.opened?this.close():this.open())},d.prototype.open=function(){var e=this;return!!this.options.length&&(this.opened||this.emit("selectr.open"),this.opened=!0,this.mobileDevice||this.config.nativeDropdown?(i.addClass(this.container,"native-open"),void(this.config.data&&i.each(this.options,(function(e,t){this.el.add(t)}),this))):(i.addClass(this.container,"open"),s.call(this),this.invert(),this.tree.scrollTop=0,i.removeClass(this.container,"notice"),this.selected.setAttribute("aria-expanded",!0),this.tree.setAttribute("aria-hidden",!1),this.tree.setAttribute("aria-expanded",!0),void(this.config.searchable&&!this.config.taggable&&setTimeout((function(){e.input.focus(),e.input.tabIndex=0}),10))))},d.prototype.close=function(){var e;this.opened&&this.emit("selectr.close"),this.opened=!1,this.mobileDevice||this.config.nativeDropdown?i.removeClass(this.container,"native-open"):(e=i.hasClass(this.container,"notice"),this.config.searchable&&!e&&(this.input.blur(),this.input.tabIndex=-1,this.searching=!1),e&&(i.removeClass(this.container,"notice"),this.notice.textContent=""),i.removeClass(this.container,"open"),i.removeClass(this.container,"native-open"),this.selected.setAttribute("aria-expanded",!1),this.tree.setAttribute("aria-hidden",!0),this.tree.setAttribute("aria-expanded",!1),i.truncate(this.tree),l.call(this))},d.prototype.enable=function(){this.disabled=!1,this.el.disabled=!1,this.selected.tabIndex=this.originalIndex,this.el.multiple&&i.each(this.tags,(function(e,t){t.lastElementChild.tabIndex=0})),i.removeClass(this.container,"selectr-disabled")},d.prototype.disable=function(e){e||(this.el.disabled=!0),this.selected.tabIndex=-1,this.el.multiple&&i.each(this.tags,(function(e,t){t.lastElementChild.tabIndex=-1})),this.disabled=!0,i.addClass(this.container,"selectr-disabled")},d.prototype.reset=function(){this.disabled||(this.clear(),this.setSelected(!0),i.each(this.defaultSelected,(function(e,t){this.select(t)}),this),this.emit("selectr.reset"))},d.prototype.clear=function(e){var t;this.el.multiple?this.selectedIndexes.length&&(t=this.selectedIndexes.slice(),i.each(t,(function(e,t){this.deselect(t)}),this)):-1<this.selectedIndex&&this.deselect(this.selectedIndex,e),this.emit("selectr.clear")},d.prototype.serialise=function(e){var t=[];return i.each(this.options,(function(e,n){var i={value:n.value,text:n.textContent};n.selected&&(i.selected=!0),n.disabled&&(i.disabled=!0),t[e]=i})),e?JSON.stringify(t):t},d.prototype.serialize=function(e){return this.serialise(e)},d.prototype.setPlaceholder=function(e){e=e||this.config.placeholder||this.el.getAttribute("placeholder"),this.options.length||(e="No options available"),this.placeEl.textContent=e},d.prototype.paginate=function(){if(this.items.length){var e=this;return this.pages=this.items.map((function(t,n){return n%e.config.pagination==0?e.items.slice(n,n+e.config.pagination):null})).filter((function(e){return e})),this.pages}},d.prototype.setMessage=function(e,t){t&&this.close(),i.addClass(this.container,"notice"),this.notice.textContent=e},d.prototype.removeMessage=function(){i.removeClass(this.container,"notice"),this.notice.textContent=""},d.prototype.invert=function(){var e=i.rect(this.selected),t=this.tree.parentNode.offsetHeight,n=window.innerHeight;e.top+e.height+t>n?(i.addClass(this.container,"inverted"),this.isInverted=!0):(i.removeClass(this.container,"inverted"),this.isInverted=!1),this.optsRect=i.rect(this.tree)},d.prototype.getOptionByIndex=function(e){return this.options[e]},d.prototype.getOptionByValue=function(e){for(var t=!1,n=0,i=this.options.length;n<i;n++)if(this.options[n].value.trim()===e.toString().trim()){t=this.options[n];break}return t},e.exports=d},188:function(e,t,n){"use strict";n.d(t,{qD:function(){return i},EX:function(){return o},WF:function(){return r},oW:function(){return s}});var i=document.body,o=10485760,r=2e4,s=2147483648},602:function(e,t,n){"use strict";n.d(t,{w:function(){return o}});var i=n(791);function o(e,t,n){var o,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],s="function"==typeof(d=e).getRootNode?d.getRootNode():window,a={},l=e.getBoundingClientRect(),d=t.getBoundingClientRect(),c=document.createElement("div");function h(){if(c&&c.parentNode){for(var t in c.parentNode.removeChild(c),a)o=t,Object.prototype.hasOwnProperty.call(a,o)&&((o=a[t])&&(0,i.removeEventListener)(s,t,o),delete a[t]);"function"==typeof n&&n(e)}var o}function u(e){(e=e.target)===c||(0,i.isChildOf)(e,c)||h()}return c.className="jsoneditor-anchor",c.style.position="absolute",c.style.left=l.left-d.left+"px",c.style.top=l.top-d.top+"px",c.style.width=l.width-2+"px",c.style.height=l.height-2+"px",c.style.boxSizing="border-box",t.appendChild(c),a.mousedown=(0,i.addEventListener)(s,"mousedown",u),a.mousewheel=(0,i.addEventListener)(s,"mousewheel",u),r&&(o=null,c.onmouseover=function(){clearTimeout(o),o=null},c.onmouseout=function(){o=o||setTimeout(h,200)}),c.destroy=h,c}},907:function(e,t,n){"use strict";n.d(t,{m0:function(){return l},cC:function(){return d},Iu:function(){return c}}),t=n(987);var i={en:{array:"Array",auto:"Auto",appendText:"Append",appendTitle:"Append a new field with type 'auto' after this field (Ctrl+Shift+Ins)",appendSubmenuTitle:"Select the type of the field to be appended",appendTitleAuto:"Append a new field with type 'auto' (Ctrl+Shift+Ins)",ascending:"Ascending",ascendingTitle:"Sort the childs of this ${type} in ascending order",actionsMenu:"Click to open the actions menu (Ctrl+M)",cannotParseFieldError:"Cannot parse field into JSON",cannotParseValueError:"Cannot parse value into JSON",collapseAll:"Collapse all fields",compactTitle:"Compact JSON data, remove all whitespaces (Ctrl+Shift+I)",descending:"Descending",descendingTitle:"Sort the childs of this ${type} in descending order",drag:"Drag to move this field (Alt+Shift+Arrows)",duplicateKey:"duplicate key",duplicateText:"Duplicate",duplicateTitle:"Duplicate selected fields (Ctrl+D)",duplicateField:"Duplicate this field (Ctrl+D)",duplicateFieldError:"Duplicate field name",empty:"empty",expandAll:"Expand all fields",expandTitle:"Click to expand/collapse this field (Ctrl+E). \nCtrl+Click to expand/collapse including all childs.",formatTitle:"Format JSON data, with proper indentation and line feeds (Ctrl+I)",insert:"Insert",insertTitle:"Insert a new field with type 'auto' before this field (Ctrl+Ins)",insertSub:"Select the type of the field to be inserted",object:"Object",ok:"Ok",redo:"Redo (Ctrl+Shift+Z)",removeText:"Remove",removeTitle:"Remove selected fields (Ctrl+Del)",removeField:"Remove this field (Ctrl+Del)",repairTitle:"Repair JSON: fix quotes and escape characters, remove comments and JSONP notation, turn JavaScript objects into JSON.",searchTitle:"Search fields and values",searchNextResultTitle:"Next result (Enter)",searchPreviousResultTitle:"Previous result (Shift + Enter)",selectNode:"Select a node...",showAll:"show all",showMore:"show more",showMoreStatus:"displaying ${visibleChilds} of ${totalChilds} items.",sort:"Sort",sortTitle:"Sort the childs of this ${type}",sortTitleShort:"Sort contents",sortFieldLabel:"Field:",sortDirectionLabel:"Direction:",sortFieldTitle:"Select the nested field by which to sort the array or object",sortAscending:"Ascending",sortAscendingTitle:"Sort the selected field in ascending order",sortDescending:"Descending",sortDescendingTitle:"Sort the selected field in descending order",string:"String",transform:"Transform",transformTitle:"Filter, sort, or transform the childs of this ${type}",transformTitleShort:"Filter, sort, or transform contents",extract:"Extract",extractTitle:"Extract this ${type}",transformQueryTitle:"Enter a JMESPath query",transformWizardLabel:"Wizard",transformWizardFilter:"Filter",transformWizardSortBy:"Sort by",transformWizardSelectFields:"Select fields",transformQueryLabel:"Query",transformPreviewLabel:"Preview",type:"Type",typeTitle:"Change the type of this field",openUrl:"Ctrl+Click or Ctrl+Enter to open url in new window",undo:"Undo last action (Ctrl+Z)",validationCannotMove:"Cannot move a field into a child of itself",autoType:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',objectType:'Field type "object". An object contains an unordered set of key/value pairs.',arrayType:'Field type "array". An array contains an ordered collection of values.',stringType:'Field type "string". Field type is not determined from the value, but always returned as string.',modeEditorTitle:"Switch Editor Mode",modeCodeText:"Code",modeCodeTitle:"Switch to code highlighter",modeFormText:"Form",modeFormTitle:"Switch to form editor",modeTextText:"Text",modeTextTitle:"Switch to plain text editor",modeTreeText:"Tree",modeTreeTitle:"Switch to tree editor",modeViewText:"View",modeViewTitle:"Switch to tree view",modePreviewText:"Preview",modePreviewTitle:"Switch to preview mode",examples:"Examples",default:"Default",containsInvalidProperties:"Contains invalid properties",containsInvalidItems:"Contains invalid items"},es:{array:"Matriz",auto:"Auto",appendText:"Agregar",appendTitle:"Agregue un nuevo campo con el tipo 'auto' después de este campo (Ctrl + Shift + Ins)",appendSubmenuTitle:"Seleccione el tipo de campo que se agregará",appendTitleAuto:"Agregue un nuevo campo con el tipo 'auto' (Ctrl + Shift + Ins)",ascending:"Ascendente",ascendingTitle:"Ordene los elementos secundarios de este ${type} en orden ascendente",actionsMenu:"Haga clic para abrir el menú de acciones (Ctrl + M)",cannotParseFieldError:"No se puede parsear el campo en JSON",cannotParseValueError:"No se puede parsear el valor en JSON",collapseAll:"Contraer todos los campos",compactTitle:"Compactar datos JSON, eliminar todos los espacios en blanco (Ctrl + Shift + I)",descending:"Descendente",descendingTitle:"Ordene los hijos de este ${type} en orden descendente",drag:"Arrastre para mover este campo (Alt + Mayús + Flechas)",duplicateKey:"llave duplicada",duplicateText:"Duplicar",duplicateTitle:"Duplicar campos seleccionados (Ctrl + D)",duplicateField:"Duplicar este campo (Ctrl + D)",duplicateFieldError:"Nombre de campo duplicado",empty:"vacio",expandAll:"Expandir todos los campos",expandTitle:"Haga clic para expandir/contraer este campo (Ctrl + E). \n  Ctrl+Clic para expandir/contraer incluyendo todos los niños.",formatTitle:"Formatee los datos JSON, con la sangría y los avances de línea adecuados (Ctrl + I)",insert:"Insertar",insertTitle:"Inserte un nuevo campo con el tipo 'auto' antes de este campo (Ctrl + Ins)",insertSub:"Seleccione el tipo de campo a insertar",object:"Objeto",ok:"Ok",redo:"Rehacer (Ctrl+Mayús+Z)",removeText:"Eliminar",removeTitle:"Eliminar campos seleccionados (Ctrl+Supr)",removeField:"Eliminar este campo (Ctrl+Supr)",repairTitle:"Reparar JSON: corrija comillas y caracteres de escape, elimine comentarios y notación JSONP, convierta objetos JavaScript en JSON.",searchTitle:"Campos de búsqueda y valores",searchNextResultTitle:"Siguiente resultado (Entrar)",searchPreviousResultTitle:"Resultado anterior (Shift + Enter)",selectNode:"Seleccione un nodo...",showAll:"mostrar todo",showMore:"mostrar más",showMoreStatus:"mostrando ${visibleChilds} de ${totalChilds} elementos.",sort:"Ordenar",sortTitle:"Ordene los hijos de este ${type}",sortTitleShort:"Ordenar contenidos",sortFieldLabel:"Campo:",sortDirectionLabel:"Dirección:",sortFieldTitle:"Seleccione el campo anidado por el cual ordenar la matriz u objeto",sortAscending:"Ascendente",sortAscendingTitle:"Ordenar el campo seleccionado en orden ascendente",sortDescending:"Descendente",sortDescendingTitle:"Ordenar por el campo seleccionado, en orden descendente",string:"Texto",transform:"Transformar",transformTitle:"Filtrar, ordenar o transformar los hijos de este ${type}",transformTitleShort:"Filtrar, ordenar o transformar contenidos",extract:"Extraer",extractTitle:"Extrae este ${type}",transformQueryTitle:"Ingrese una consulta JMESPath",transformWizardLabel:"Wizard",transformWizardFilter:"Filtro",transformWizardSortBy:"Ordenar por",transformWizardSelectFields:"Seleccione un campo",transformQueryLabel:"Consulta",transformPreviewLabel:"Vista Previa",type:"Tipo",typeTitle:"Cambiar el tipo de campo",openUrl:"Ctrl+Click o Ctrl+Enter para abrir la URL en una nueva ventana",undo:"Deshacer la última acción (Ctrl+Z)",validationCannotMove:"No se puede mover un campo a un hijo de sí mismo.",autoType:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',objectType:'Tipo de campo "objeto".  Un objeto contiene un conjunto desordenado de pares clave/valor.',arrayType:'Tipo de campo "matriz".  Una matriz contiene una colección ordenada de valores.',stringType:'Tipo de campo "cadena".  El tipo de campo no se determina a partir del valor,  pero siempre se devuelve como una cadena.',modeEditorTitle:"Cambiar modo de editor",modeCodeText:"Codigo",modeCodeTitle:"Cambiar al resaltador de código",modeFormText:"Formulario",modeFormTitle:"Cambiar al editor de formularios",modeTextText:"Texto",modeTextTitle:"Cambiar al editor de texto sin formato",modeTreeText:"Arbol",modeTreeTitle:"Cambiar al editor de árbol",modeViewText:"Vista",modeViewTitle:"Cambiar a la vista de árbol",modePreviewText:"Vista Previa",modePreviewTitle:"Cambiar al modo de vista previa",examples:"Ejemplos",default:"Predeterminado",containsInvalidProperties:"Contiene propiedades no validas",containsInvalidItems:"Contiene items no validos"},"zh-CN":{array:"数组",auto:"自动",appendText:"追加",appendTitle:"在此字段后追加一个类型为“auto”的新字段 (Ctrl+Shift+Ins)",appendSubmenuTitle:"选择要追加的字段类型",appendTitleAuto:"追加类型为“auto”的新字段 (Ctrl+Shift+Ins)",ascending:"升序",ascendingTitle:"升序排列${type}的子节点",actionsMenu:"点击打开动作菜单(Ctrl+M)",cannotParseFieldError:"无法将字段解析为JSON",cannotParseValueError:"无法将值解析为JSON",collapseAll:"缩进所有字段",compactTitle:"压缩JSON数据，删除所有空格 (Ctrl+Shift+I)",descending:"降序",descendingTitle:"降序排列${type}的子节点",drag:"拖拽移动该节点(Alt+Shift+Arrows)",duplicateKey:"重复键",duplicateText:"复制",duplicateTitle:"复制选中字段(Ctrl+D)",duplicateField:"复制该字段(Ctrl+D)",duplicateFieldError:"重复的字段名称",empty:"清空",expandAll:"展开所有字段",expandTitle:"点击 展开/收缩 该字段(Ctrl+E). \nCtrl+Click 展开/收缩 包含所有子节点.",formatTitle:"使用适当的缩进和换行符格式化JSON数据 (Ctrl+I)",insert:"插入",insertTitle:"在此字段前插入类型为“auto”的新字段 (Ctrl+Ins)",insertSub:"选择要插入的字段类型",object:"对象",ok:"Ok",redo:"重做 (Ctrl+Shift+Z)",removeText:"移除",removeTitle:"移除选中字段 (Ctrl+Del)",removeField:"移除该字段 (Ctrl+Del)",repairTitle:"修复JSON：修复引号和转义符，删除注释和JSONP表示法，将JavaScript对象转换为JSON。",selectNode:"选择一个节点...",showAll:"展示全部",showMore:"展示更多",showMoreStatus:"显示${totalChilds}的${visibleChilds}项目.",sort:"排序",sortTitle:"排序${type}的子节点",sortTitleShort:"内容排序",sortFieldLabel:"字段：",sortDirectionLabel:"方向：",sortFieldTitle:"选择用于对数组或对象排序的嵌套字段",sortAscending:"升序排序",sortAscendingTitle:"按照该字段升序排序",sortDescending:"降序排序",sortDescendingTitle:"按照该字段降序排序",string:"字符串",transform:"变换",transformTitle:"筛选，排序，或者转换${type}的子节点",transformTitleShort:"筛选，排序，或者转换内容",extract:"提取",extractTitle:"提取这个 ${type}",transformQueryTitle:"输入JMESPath查询",transformWizardLabel:"向导",transformWizardFilter:"筛选",transformWizardSortBy:"排序",transformWizardSelectFields:"选择字段",transformQueryLabel:"查询",transformPreviewLabel:"预览",type:"类型",typeTitle:"更改字段类型",openUrl:"Ctrl+Click 或者 Ctrl+Enter 在新窗口打开链接",undo:"撤销上次动作 (Ctrl+Z)",validationCannotMove:"无法将字段移入其子节点",autoType:'字段类型 "auto". 字段类型由值自动确定 可以为 string，number，boolean，或者 null.',objectType:'字段类型 "object". 对象包含一组无序的键/值对.',arrayType:'字段类型 "array". 数组包含值的有序集合.',stringType:'字段类型 "string". 字段类型由值自动确定，但始终作为字符串返回.',modeCodeText:"代码",modeCodeTitle:"切换至代码高亮",modeFormText:"表单",modeFormTitle:"切换至表单编辑",modeTextText:"文本",modeTextTitle:"切换至文本编辑",modeTreeText:"树",modeTreeTitle:"切换至树编辑",modeViewText:"视图",modeViewTitle:"切换至树视图",modePreviewText:"预览",modePreviewTitle:"切换至预览模式",examples:"例子",default:"缺省",containsInvalidProperties:"包含无效的属性",containsInvalidItems:"包含无效项目"},"pt-BR":{array:"Lista",auto:"Automatico",appendText:"Adicionar",appendTitle:"Adicionar novo campo com tipo 'auto' depois deste campo (Ctrl+Shift+Ins)",appendSubmenuTitle:"Selecione o tipo do campo a ser adicionado",appendTitleAuto:"Adicionar novo campo com tipo 'auto' (Ctrl+Shift+Ins)",ascending:"Ascendente",ascendingTitle:"Organizar filhor do tipo ${type} em crescente",actionsMenu:"Clique para abrir o menu de ações (Ctrl+M)",cannotParseFieldError:"Não é possível analisar o campo no JSON",cannotParseValueError:"Não é possível analisar o valor em JSON",collapseAll:"Fechar todos campos",compactTitle:"Dados JSON compactos, remova todos os espaços em branco (Ctrl+Shift+I)",descending:"Descendente",descendingTitle:"Organizar o filhos do tipo ${type} em decrescente",duplicateKey:"chave duplicada",drag:"Arraste para mover este campo (Alt+Shift+Arrows)",duplicateText:"Duplicar",duplicateTitle:"Duplicar campos selecionados (Ctrl+D)",duplicateField:"Duplicar este campo (Ctrl+D)",duplicateFieldError:"Nome do campo duplicado",empty:"vazio",expandAll:"Expandir todos campos",expandTitle:"Clique para expandir/encolher este campo (Ctrl+E). \nCtrl+Click para expandir/encolher incluindo todos os filhos.",formatTitle:"Formate dados JSON, com recuo e feeds de linha adequados (Ctrl+I)",insert:"Inserir",insertTitle:"Inserir um novo campo do tipo 'auto' antes deste campo (Ctrl+Ins)",insertSub:"Selecionar o tipo de campo a ser inserido",object:"Objeto",ok:"Ok",redo:"Refazer (Ctrl+Shift+Z)",removeText:"Remover",removeTitle:"Remover campos selecionados (Ctrl+Del)",removeField:"Remover este campo (Ctrl+Del)",repairTitle:"Repare JSON: corrija aspas e caracteres de escape, remova comentários e notação JSONP, transforme objetos JavaScript em JSON.",selectNode:"Selecione um nódulo...",showAll:"mostrar todos",showMore:"mostrar mais",showMoreStatus:"exibindo ${visibleChilds} de ${totalChilds} itens.",sort:"Organizar",sortTitle:"Organizar os filhos deste ${type}",sortTitleShort:"Organizar os filhos",sortFieldLabel:"Campo:",sortDirectionLabel:"Direção:",sortFieldTitle:"Selecione um campo filho pelo qual ordenar o array ou objeto",sortAscending:"Ascendente",sortAscendingTitle:"Ordenar o campo selecionado por ordem ascendente",sortDescending:"Descendente",sortDescendingTitle:"Ordenar o campo selecionado por ordem descendente",string:"Texto",transform:"Transformar",transformTitle:"Filtrar, ordenar ou transformar os filhos deste ${type}",transformTitleShort:"Filtrar, ordenar ou transformar conteúdos",transformQueryTitle:"Insira uma expressão JMESPath",transformWizardLabel:"Assistente",transformWizardFilter:"Filtro",transformWizardSortBy:"Ordenar por",transformWizardSelectFields:"Selecionar campos",transformQueryLabel:"Expressão",transformPreviewLabel:"Visualizar",type:"Tipo",typeTitle:"Mudar o tipo deste campo",openUrl:"Ctrl+Click ou Ctrl+Enter para abrir link em nova janela",undo:"Desfazer último ação (Ctrl+Z)",validationCannotMove:"Não pode mover um campo como filho dele mesmo",autoType:'Campo do tipo "auto". O tipo do campo é determinao automaticamente a partir do seu valor e pode ser texto, número, verdade/falso ou nulo.',objectType:'Campo do tipo "objeto". Um objeto contém uma lista de pares com chave e valor.',arrayType:'Campo do tipo "lista". Uma lista contem uma coleção de valores ordenados.',stringType:'Campo do tipo "string". Campo do tipo nao é determinado através do seu valor, mas sempre retornara um texto.',examples:"Exemplos",default:"Revelia",containsInvalidProperties:"Contém propriedades inválidas",containsInvalidItems:"Contém itens inválidos"},tr:{array:"Dizin",auto:"Otomatik",appendText:"Ekle",appendTitle:"Bu alanın altına 'otomatik' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)",appendSubmenuTitle:"Eklenecek alanın tipini seç",appendTitleAuto:"'Otomatik' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)",ascending:"Artan",ascendingTitle:"${type}'ın alt tiplerini artan düzende sırala",actionsMenu:"Aksiyon menüsünü açmak için tıklayın (Ctrl+M)",collapseAll:"Tüm alanları kapat",descending:"Azalan",descendingTitle:"${type}'ın alt tiplerini azalan düzende sırala",drag:"Bu alanı taşımak için sürükleyin (Alt+Shift+Arrows)",duplicateKey:"Var olan anahtar",duplicateText:"Aşağıya kopyala",duplicateTitle:"Seçili alanlardan bir daha oluştur (Ctrl+D)",duplicateField:"Bu alandan bir daha oluştur (Ctrl+D)",duplicateFieldError:"Duplicate field name",cannotParseFieldError:"Alan JSON'a ayrıştırılamıyor",cannotParseValueError:"JSON'a değer ayrıştırılamıyor",empty:"boş",expandAll:"Tüm alanları aç",expandTitle:"Bu alanı açmak/kapatmak için tıkla (Ctrl+E). \nAlt alanlarda dahil tüm alanları açmak için Ctrl+Click ",insert:"Ekle",insertTitle:"Bu alanın üstüne 'otomatik' tipinde yeni bir alan ekle (Ctrl+Ins)",insertSub:"Araya eklenecek alanın tipini seç",object:"Nesne",ok:"Tamam",redo:"Yeniden yap (Ctrl+Shift+Z)",removeText:"Kaldır",removeTitle:"Seçilen alanları kaldır (Ctrl+Del)",removeField:"Bu alanı kaldır (Ctrl+Del)",selectNode:"Bir nesne seç...",showAll:"tümünü göster",showMore:"daha fazla göster",showMoreStatus:"${totalChilds} alanın ${visibleChilds} alt alanları gösteriliyor",sort:"Sırala",sortTitle:"${type}'ın alt alanlarını sırala",sortTitleShort:"İçerikleri sırala",sortFieldLabel:"Alan:",sortDirectionLabel:"Yön:",sortFieldTitle:"Diziyi veya nesneyi sıralamak için iç içe geçmiş alanı seçin",sortAscending:"Artan",sortAscendingTitle:"Seçili alanı artan düzende sırala",sortDescending:"Azalan",sortDescendingTitle:"Seçili alanı azalan düzende sırala",string:"Karakter Dizisi",transform:"Dönüştür",transformTitle:"${type}'ın alt alanlarını filtrele, sırala veya dönüştür",transformTitleShort:"İçerikleri filterele, sırala veya dönüştür",transformQueryTitle:"JMESPath sorgusu gir",transformWizardLabel:"Sihirbaz",transformWizardFilter:"Filtre",transformWizardSortBy:"Sırala",transformWizardSelectFields:"Alanları seç",transformQueryLabel:"Sorgu",transformPreviewLabel:"Önizleme",type:"Tip",typeTitle:"Bu alanın tipini değiştir",openUrl:"URL'i yeni bir pencerede açmak için Ctrl+Click veya Ctrl+Enter",undo:"Son değişikliği geri al (Ctrl+Z)",validationCannotMove:"Alt alan olarak taşınamıyor",autoType:'Alan tipi "otomatik". Alan türü otomatik olarak değerden belirlenirve bir dize, sayı, boolean veya null olabilir.',objectType:'Alan tipi "nesne". Bir nesne, sıralanmamış bir anahtar / değer çifti kümesi içerir.',arrayType:'Alan tipi "dizi". Bir dizi, düzenli değerler koleksiyonu içerir.',stringType:'Alan tipi "karakter dizisi". Alan türü değerden belirlenmez,ancak her zaman karakter dizisi olarak döndürülür.',modeCodeText:"Kod",modeCodeTitle:"Kod vurgulayıcıya geç",modeFormText:"Form",modeFormTitle:"Form düzenleyiciye geç",modeTextText:"Metin",modeTextTitle:"Düz metin düzenleyiciye geç",modeTreeText:"Ağaç",modeTreeTitle:"Ağaç düzenleyiciye geç",modeViewText:"Görünüm",modeViewTitle:"Ağaç görünümüne geç",examples:"Örnekler",default:"Varsayılan",containsInvalidProperties:"Geçersiz özellikler içeriyor",containsInvalidItems:"Geçersiz öğeler içeriyor"},ja:{array:"配列",auto:"オート",appendText:"追加",appendTitle:'次のフィールドに"オート"のフィールドを追加 (Ctrl+Shift+Ins)',appendSubmenuTitle:"追加するフィールドの型を選択してください",appendTitleAuto:'"オート"のフィールドを追加 (Ctrl+Shift+Ins)',ascending:"昇順",ascendingTitle:"${type}の子要素を昇順に並べ替え",actionsMenu:"クリックしてアクションメニューを開く (Ctrl+M)",collapseAll:"すべてを折りたたむ",descending:"降順",descendingTitle:"${type}の子要素を降順に並べ替え",drag:"ドラッグして選択中のフィールドを移動 (Alt+Shift+Arrows)",duplicateKey:"複製キー",duplicateText:"複製",duplicateTitle:"選択中のフィールドを複製 (Ctrl+D)",duplicateField:"選択中のフィールドを複製 (Ctrl+D)",duplicateFieldError:"フィールド名が重複しています",cannotParseFieldError:"JSONのフィールドを解析できません",cannotParseValueError:"JSONの値を解析できません",empty:"空",expandAll:"すべてを展開",expandTitle:"クリックしてフィールドを展開/折りたたむ (Ctrl+E). \nCtrl+Click ですべての子要素を展開/折りたたむ",insert:"挿入",insertTitle:"選択中のフィールドの前に新しいフィールドを挿入 (Ctrl+Ins)",insertSub:"挿入するフィールドの型を選択",object:"オブジェクト",ok:"実行",redo:"やり直す (Ctrl+Shift+Z)",removeText:"削除",removeTitle:"選択中のフィールドを削除 (Ctrl+Del)",removeField:"選択中のフィールドを削除 (Ctrl+Del)",selectNode:"ノードを選択...",showAll:"すべてを表示",showMore:"もっと見る",showMoreStatus:"${totalChilds}個のアイテムのうち ${visibleChilds}個を表示しています。",sort:"並べ替え",sortTitle:"${type}の子要素を並べ替え",sortTitleShort:"並べ替え",sortFieldLabel:"フィールド:",sortDirectionLabel:"順序:",sortFieldTitle:"配列またはオブジェクトを並び替えるためのフィールドを選択",sortAscending:"昇順",sortAscendingTitle:"選択中のフィールドを昇順に並び替え",sortDescending:"降順",sortDescendingTitle:"選択中のフィールドを降順に並び替え",string:"文字列",transform:"変換",transformTitle:"${type}の子要素をフィルター・並び替え・変換する",transformTitleShort:"内容をフィルター・並び替え・変換する",extract:"抽出",extractTitle:"${type}を抽出",transformQueryTitle:"JMESPathクエリを入力",transformWizardLabel:"ウィザード",transformWizardFilter:"フィルター",transformWizardSortBy:"並び替え",transformWizardSelectFields:"フィールドを選択",transformQueryLabel:"クエリ",transformPreviewLabel:"プレビュー",type:"型",typeTitle:"選択中のフィールドの型を変更",openUrl:"Ctrl+Click または Ctrl+Enter で 新規ウィンドウでURLを開く",undo:"元に戻す (Ctrl+Z)",validationCannotMove:"子要素に移動できません ",autoType:"オート： フィールドの型は値から自動的に決定されます。 (文字列・数値・ブール・null)",objectType:"オブジェクト： オブジェクトは順序が決まっていないキーと値のペア組み合わせです。",arrayType:"配列： 配列は順序が決まっている値の集合体です。",stringType:"文字列： フィールド型は値から決定されませんが、常に文字列として返されます。",modeCodeText:"コードモード",modeCodeTitle:"ハイライトモードに切り替え",modeFormText:"フォームモード",modeFormTitle:"フォームモードに切り替え",modeTextText:"テキストモード",modeTextTitle:"テキストモードに切り替え",modeTreeText:"ツリーモード",modeTreeTitle:"ツリーモードに切り替え",modeViewText:"ビューモード",modeViewTitle:"ビューモードに切り替え",modePreviewText:"プレビュー",modePreviewTitle:"プレビューに切り替え",examples:"例",default:"デフォルト",containsInvalidProperties:"無効なプロパティが含まれています",containsInvalidItems:"無効なアイテムが含まれています"},"fr-FR":{array:"Liste",auto:"Auto",appendText:"Ajouter",appendTitle:"Ajouter un champ de type 'auto' après ce champ (Ctrl+Shift+Ins)",appendSubmenuTitle:"Sélectionner le type du champ à ajouter",appendTitleAuto:"Ajouter un champ de type 'auto' (Ctrl+Shift+Ins)",ascending:"Ascendant",ascendingTitle:"Trier les enfants de ce ${type} par ordre ascendant",actionsMenu:"Ouvrir le menu des actions (Ctrl+M)",collapseAll:"Regrouper",descending:"Descendant",descendingTitle:"Trier les enfants de ce ${type} par ordre descendant",drag:"Déplacer (Alt+Shift+Arrows)",duplicateKey:"Dupliquer la clé",duplicateText:"Dupliquer",duplicateTitle:"Dupliquer les champs sélectionnés (Ctrl+D)",duplicateField:"Dupliquer ce champ (Ctrl+D)",duplicateFieldError:"Dupliquer le nom de champ",cannotParseFieldError:"Champ impossible à parser en JSON",cannotParseValueError:"Valeur impossible à parser en JSON",empty:"vide",expandAll:"Étendre",expandTitle:"Étendre/regrouper ce champ (Ctrl+E). \nCtrl+Click pour étendre/regrouper avec tous les champs.",insert:"Insérer",insertTitle:"Insérer un champ de type 'auto' avant ce champ (Ctrl+Ins)",insertSub:"Sélectionner le type de champ à insérer",object:"Objet",ok:"Ok",redo:"Rejouer (Ctrl+Shift+Z)",removeText:"Supprimer",removeTitle:"Supprimer les champs sélectionnés (Ctrl+Del)",removeField:"Supprimer ce champ (Ctrl+Del)",searchTitle:"Rechercher champs et valeurs",searchNextResultTitle:"Résultat suivant (Enter)",searchPreviousResultTitle:"Résultat précédent (Shift + Enter)",selectNode:"Sélectionner un nœud...",showAll:"voir tout",showMore:"voir plus",showMoreStatus:"${visibleChilds} éléments affichés de ${totalChilds}.",sort:"Trier",sortTitle:"Trier les champs de ce ${type}",sortTitleShort:"Trier",sortFieldLabel:"Champ:",sortDirectionLabel:"Direction:",sortFieldTitle:"Sélectionner les champs permettant de trier les listes et objet",sortAscending:"Ascendant",sortAscendingTitle:"Trier les champs sélectionnés par ordre ascendant",sortDescending:"Descendant",sortDescendingTitle:"Trier les champs sélectionnés par ordre descendant",string:"Chaîne",transform:"Transformer",transformTitle:"Filtrer, trier, or transformer les enfants de ce ${type}",transformTitleShort:"Filtrer, trier ou transformer le contenu",extract:"Extraire",extractTitle:"Extraire ce ${type}",transformQueryTitle:"Saisir une requête JMESPath",transformWizardLabel:"Assistant",transformWizardFilter:"Filtrer",transformWizardSortBy:"Trier par",transformWizardSelectFields:"Sélectionner les champs",transformQueryLabel:"Requête",transformPreviewLabel:"Prévisualisation",type:"Type",typeTitle:"Changer le type de ce champ",openUrl:"Ctrl+Click ou Ctrl+Enter pour ouvrir l'url dans une autre fenêtre",undo:"Annuler la dernière action (Ctrl+Z)",validationCannotMove:"Cannot move a field into a child of itself",autoType:'Champe de type "auto". Ce type de champ est automatiquement déterminé en fonction de la valeur et peut être de type "chaîne", "nombre", "booléen" ou null.',objectType:'Champ de type "objet". Un objet contient un ensemble non ordonné de paires clé/valeur.',arrayType:'Champ de type "liste". Une liste contient une collection ordonnée de valeurs.',stringType:'Champ de type "chaîne". Ce type de champ n\'est pas déterminé en fonction de la valeur, mais retourne systématiquement une chaîne de caractères.',modeEditorTitle:"Changer mode d'édition",modeCodeText:"Code",modeCodeTitle:"Activer surlignage code",modeFormText:"Formulaire",modeFormTitle:"Activer formulaire",modeTextText:"Texte",modeTextTitle:"Activer éditeur texte",modeTreeText:"Arbre",modeTreeTitle:"Activer éditeur arbre",modeViewText:"Lecture seule",modeViewTitle:"Activer vue arbre",modePreviewText:"Prévisualisation",modePreviewTitle:"Activer mode prévisualiser",examples:"Exemples",default:"Défaut",containsInvalidProperties:"Contient des propriétés non valides",containsInvalidItems:"Contient des éléments invalides"},de:{array:"Auflistung",auto:"Auto",appendText:"anhängen",appendTitle:"Fügen Sie nach diesem Feld ein neues Feld mit dem Typ 'auto' ein (Strg+Umschalt+Ein)",appendSubmenuTitle:"Wählen Sie den Typ des neuen Feldes",appendTitleAuto:"Ein neues Feld vom Typ 'auto' hinzufügen (Strg+Umschalt+Ein)",ascending:"Aufsteigend",ascendingTitle:"Sortieren Sie die Elemente dieses ${type} in aufsteigender Reihenfolge",actionsMenu:"Klicken Sie zum Öffnen des Aktionsmenüs (Strg+M)",cannotParseFieldError:"Feld kann nicht in JSON geparst werden",cannotParseValueError:"Wert kann nicht in JSON geparst werden",collapseAll:"Alle Felder zuklappen",compactTitle:"JSON-Daten verdichten, alle Leerzeichen entfernen (Strg+Umschalt+\\)",descending:"Absteigend",descendingTitle:"Sortieren Sie die Elemente dieses ${type} in absteigender Reihenfolge",drag:"Ziehen, um dieses Feld zu verschieben (Alt+Umschalt+Pfeile)",duplicateKey:"Doppelter Schlüssel",duplicateText:"Duplikat",duplicateTitle:"Ausgewählte Felder duplizieren (Strg+D)",duplicateField:"Dieses Feld duplizieren (Strg+D)",duplicateFieldError:"Doppelter Feldname",empty:"leer",expandAll:"Alle Felder anzeigen",expandTitle:"Klicken Sie, um dieses Feld zu erweitern/zu kollabieren (Strg+E). \nStrg+Klicken Sie, um dieses Feld einschließlich aller Elemente zu erweitern/zu kollabieren.",formatTitle:"JSON-Daten mit korrekter Einrückung und Zeilenvorschüben formatieren (Strg+\\)",insert:"einfügen",insertTitle:"Fügen Sie vor diesem Feld ein neues Feld mit dem Typ 'auto' ein (Strg+Einfg)",insertSub:"Wählen Sie den Typ des neuen Feldes",object:"Objekt",ok:"Ok",redo:"Wiederholen (Strg+Umschalt+Z)",removeText:"entfernen",removeTitle:"Ausgewählte Felder entfernen (Strg+Entf)",removeField:"Dieses Feld entfernen (Strg+Entf)",repairTitle:"JSON reparieren: Anführungszeichen und Escape-Zeichen korrigieren, Kommentare und JSONP-Notation entfernen, JavaScript-Objekte in JSON umwandeln.",searchTitle:"Suchfelder und Werte",searchNextResultTitle:"Nächstes Ergebnis (Enter)",searchPreviousResultTitle:"Vorheriges Ergebnis (Umschalt + Eingabe)",selectNode:"Wählen Sie einen Knoten aus...",showAll:"alle anzeigen",showMore:"mehr anzeigen",showMoreStatus:"Anzeige von ${visibleChilds} von ${totalChilds}-Elementen.",sort:"Sortieren",sortTitle:"Sortieren Sie die Elemente dieses ${type}",sortTitleShort:"Inhalt sortieren",sortFieldLabel:"Feld:",sortDirectionLabel:"Richtung:",sortFieldTitle:"Wählen Sie das verschachtelte Feld, nach dem das Array oder Objekt sortiert werden soll.",sortAscending:"Aufsteigend",sortAscendingTitle:"Sortieren Sie das ausgewählte Feld in aufsteigender Reihenfolge",sortDescending:"Absteigend",sortDescendingTitle:"Sortieren Sie das ausgewählte Feld in absteigender Reihenfolge",string:"Zeichenfolge",transform:"Verwandeln",transformTitle:"Die Elemente dieses ${type} filtern, sortieren oder transformieren",transformTitleShort:"Inhalte filtern, sortieren oder transformieren",extract:"Auszug",extractTitle:"Extrahieren Sie diesen ${type}",transformQueryTitle:"Eine JMESPath-Abfrage eingeben",transformWizardLabel:"Zauberer",transformWizardFilter:"Filter",transformWizardSortBy:"Sortieren nach",transformWizardSelectFields:"Felder auswählen",transformQueryLabel:"Anfrage",transformPreviewLabel:"Vorschau",type:"Geben Sie  ein.",typeTitle:"Ändern Sie den Typ dieses Feldes",openUrl:"Strg+Klicken oder Strg+Eingabe, um die URL in einem neuen Fenster zu öffnen",undo:"Letzte Aktion rückgängig machen (Strg+Z)",validationCannotMove:"Kann ein Feld nicht in ein Kind seiner selbst verschieben",autoType:'Feldtyp "auto". Der Feldtyp wird automatisch aus dem Wert bestimmt und kann ein String, eine Zahl, boolesch oder null sein.',objectType:'Feldtyp "Objekt". Ein Objekt enthält eine ungeordnete Menge von Schlüssel/Wert-Paaren.',arrayType:'Feldtyp "Array". Ein Array enthält eine geordnete Sammlung von Werten.',stringType:'Feldtyp "Zeichenfolge". Der Feldtyp wird nicht aus dem Wert bestimmt, sondern immer als Zeichenfolge zurückgegeben.',modeEditorTitle:"Editor-Modus umschalten",modeCodeText:"Code",modeCodeTitle:"Umschalten auf Code-Highlighter",modeFormText:"Formular",modeFormTitle:"Zum Formular-Editor wechseln",modeTextText:"Text",modeTextTitle:"Zum Editor für einfachen Text wechseln",modeTreeText:"Baum",modeTreeTitle:"Zum Baum-Editor wechseln",modeViewText:"Siehe",modeViewTitle:"Zur Baumansicht wechseln",modePreviewText:"Vorschau",modePreviewTitle:"In den Vorschau-Modus wechseln",examples:"Beispiele",default:"Standardmäßig",containsInvalidProperties:"Enthält ungültige Eigenschaften",containsInvalidItems:"Enthält ungültige Elemente"},ru:{array:"Массив",auto:"Авто",appendText:"Добавить",appendTitle:"Добавить новое поле с типом 'авто' после этого поля (Ctrl+Shift+Ins)",appendSubmenuTitle:"Выбрать тип поля для добавления",appendTitleAuto:"Добавить новое поле с типом 'авто' (Ctrl+Shift+Ins)",ascending:"По возрастанию",ascendingTitle:"Сортировать ${type} по возрастанию",actionsMenu:"Нажмите для открытия меню действий (Ctrl+M)",cannotParseFieldError:"Невозможно преобразовать поле в JSON",cannotParseValueError:"Невозможно преобразовать значение в JSON",collapseAll:"Свернуть все",compactTitle:"Минификация JSON (Ctrl+Shift+I)",descending:"По убыванию",descendingTitle:"Сортировать ${type} по убыванию",drag:"Потяните для перемещения этого поля (Alt+Shift+Arrows)",duplicateKey:"повторяющийся ключ",duplicateText:"Дублировать",duplicateTitle:"Дублирование полей (Ctrl+D)",duplicateField:"Дублировать поле (Ctrl+D)",duplicateFieldError:"Дублирование названия поля",empty:"пустой",expandAll:"Развернуть все",expandTitle:"Нажмите для раскрытия/скрытия поля (Ctrl+E)\nили Ctrl+Click для раскрытия/скрытия всех потомков.",formatTitle:"Форматирование JSON (Ctrl+I)",insert:"Вставить",insertTitle:"Вставить новое поле с типом 'авто' перед этим полем (Ctrl+Ins)",insertSub:"Выбрать тип поля для вставки",object:"Объект",ok:"ОК",redo:"Повторить (Ctrl+Shift+Z)",removeText:"Удалить",removeTitle:"Удалить выбранные поля (Ctrl+Del)",removeField:"Удалить поле (Ctrl+Del)",repairTitle:"Восстановите JSON: исправьте кавычки и escape-символы, удалите комментарии и нотацию JSONP, модифицируйте объекты JavaScript в JSON.",searchTitle:"Поиск",searchNextResultTitle:"Следующий результат (Enter)",searchPreviousResultTitle:"Предыдущий результат (Shift + Enter)",selectNode:"Выбор узла...",showAll:"показать все",showMore:"больше",showMoreStatus:"${visibleChilds} из ${totalChilds}",sort:"Сортировка",sortTitle:"Сортировка потомков типа ${type}",sortTitleShort:"Сортировка содержимого",sortFieldLabel:"Поле:",sortDirectionLabel:"Направление:",sortFieldTitle:"Выберите поле для сортировки массива или объекта",sortAscending:"По возрастанию",sortAscendingTitle:"Сортировка выбранного поря по возрастанию",sortDescending:"По убыванию",sortDescendingTitle:"Сортировка выбранного поря по убыванию",string:"Строка",transform:"Модификация",transformTitle:"Фильтрация, сортировка или модификация данных типа ${type}",transformTitleShort:"Фильтрация, сортировка или модификация данных",extract:"Извлечение",extractTitle:"Извлечь тип ${type}",transformQueryTitle:"Введите JMESpath запрос",transformWizardLabel:"Мастер",transformWizardFilter:"Фильтр",transformWizardSortBy:"Сортировка",transformWizardSelectFields:"Поля",transformQueryLabel:"Запрос",transformPreviewLabel:"Просмотр",type:"Тип",typeTitle:"Изменить тип этого поля",openUrl:"Ctrl+Click или Ctrl+Enter для открытия url в новом окне",undo:"Отменить (Ctrl+Z)",validationCannotMove:"Поле не может быть перемещено в потомка",autoType:"Тип поля автоматически определяется по значению и может быть строкой, числом, логическим значением или null.",objectType:"Объект содержит неупорядоченный набор пар ключ/значение.",arrayType:"Массив содержит упорядоченный набор значений.",stringType:"Тип поля не определяется из значения, но всегда возвращается как строка.",modeEditorTitle:"Переключение режима редактора",modeCodeText:"Код",modeCodeTitle:"Переключить в режим редактора кода",modeFormText:"Форма",modeFormTitle:"Переключить в режим формы",modeTextText:"Текст",modeTextTitle:"Переключить в режим редактора текста",modeTreeText:"Дерево",modeTreeTitle:"Переключить в режим редактора дерева",modeViewText:"Просмотр дерева",modeViewTitle:"Переключить в режим просмотра дерева",modePreviewText:"Просмотр",modePreviewTitle:"Переключить в режим просмотра",examples:"Примеры",default:"По умолчанию",containsInvalidProperties:"Содержит недопустимые свойства",containsInvalidItems:"Содержит недопустимые элементы"},ko:{array:"배열",auto:"자동",appendText:"추가",appendTitle:'선택한 요소 아래에 "자동" 요소를 추가합니다. (Ctrl + Shift + Ins)',appendSubmenuTitle:"추가할 요소의 유형을 선택해주세요.",appendTitleAuto:'"자동" 요소를 추가합니다. (Ctrl + Shift + Ins)',ascending:"오름차순",ascendingTitle:"선택한 ${type}의 하위 요소를 오름차순 정렬합니다.",actionsMenu:"메뉴 열기 (Ctrl + M)",cannotParseFieldError:"JSON의 요소를 해석할 수 없습니다.",cannotParseValueError:"JSON의 값을 해석할 수 없습니다.",collapseAll:"모두 접기",compactTitle:"모든 공백을 제거하여 JSON 데이터를 작게 만듭니다. (Ctrl + Shift + I)",descending:"내림차순",descendingTitle:"선택한 ${type}의 하위 요소를 내림차순으로 정렬",drag:"드래그하여 요소를 이동합니다. (Alt + Shift + Arrows)",duplicateKey:"복제키",duplicateText:"복제",duplicateTitle:"선택한 요소를 복제합니다. (Ctrl + D)",duplicateField:"선택한 요소를 복제합니다. (Ctrl + D)",duplicateFieldError:"요소 이름이 중복되었습니다.",empty:"비어있음",expandAll:"모두 열기",expandTitle:"클릭하여 요소를 열거나 닫습니다. (Ctrl + E) \nCtrl + Click으로 모든 하위 요소를 열거나 닫습니다.",formatTitle:"적절한 들여쓰기 및 줄바꿈으로 JSON 데이터를 정형화합니다. (Ctrl + I)",insert:"삽입",insertTitle:"선택한 요소 위에 새요소를 삽입합니다. (Ctrl + Ins)",insertSub:"삽입할 요소의 유형을 선택해주세요.",object:"객체",ok:"확인",redo:"다시 실행 (Ctrl + Shift + Z)",removeText:"삭제",removeTitle:"선택한 요소를 삭제합니다. (Ctrl + Del)",removeField:"선택한 요소를 삭제합니다. (Ctrl + Del)",repairTitle:"JSON 교정: JSON 내의 주석과 JSONP 표기법을 지우고 따옴표와 이스케이프 문자를 수정합니다.",searchTitle:"요소 또는 값 찾기",searchNextResultTitle:"다음으로 찾기 (Enter)",searchPreviousResultTitle:"이전으로 찾기 (Shift + Enter)",selectNode:"요소를 선택해주세요...",showAll:"모두보기",showMore:"더보기",showMoreStatus:"${totalChilds} 개의 항목 중 ${visibleChilds} 개를 표시합니다.",sort:"정렬",sortTitle:"선택한 ${type}의 하위 요소를 정렬합니다.",sortTitleShort:"정렬",sortFieldLabel:"요소:",sortDirectionLabel:"순서:",sortFieldTitle:"배열이나 객체를 정렬하는 요소를 선택해주세요.",sortAscending:"오름차순",sortAscendingTitle:"선택한 요소를 오름차순으로 정렬합니다.",sortDescending:"내림차순",sortDescendingTitle:"선택한 요소를 내림차순으로 정렬합니다.",string:"문자",transform:"변환",transformTitle:"선택한 ${type}의 하위 요소를 필터하거나 정렬 또는 변환합니다.",transformTitleShort:"내용을 필터하거나 정렬 또는 변환합니다.",extract:"추출",extractTitle:"선택한 ${type}의 값을 최상위에 위치시킵니다.",transformQueryTitle:"JMESPath 쿼리를 입력해주세요.",transformWizardLabel:"마법사",transformWizardFilter:"필터",transformWizardSortBy:"정렬",transformWizardSelectFields:"요소를 선택해주세요.",transformQueryLabel:"쿼리",transformPreviewLabel:"미리보기",type:"유형",typeTitle:"선택한 요소의 유형을 변경합니다.",openUrl:"Ctrl + Click 또는 Ctrl + Enter로 새 창에서 URL 열기",undo:"실행 취소 (Ctrl + Z)",validationCannotMove:"하위 요소로 이동할 수 없습니다.",autoType:"자동: 요소의 형식이 값의 유형으로 결정됩니다. 문자, 숫자, 부울, 또는 null만 허용됩니다.",objectType:"객체: 순서대로 나열되지 않은 이름/값 쌍으로 이루어진 집합입니다.",arrayType:"배열: 순서대로 나열된 값의 집합입니다.",stringType:"문자: 요소의 유형이 값에서 결정되지 않지만 항상 문자로 반환됩니다.",modeEditorTitle:"편집기 유형 변경",modeCodeText:"코드",modeCodeTitle:"형식 교정을 도와주는 기능이 포함된 문자 편집기",modeFormText:"입력 양식",modeFormTitle:"정해진 요소에 값을 입력하는 편집기",modeTextText:"문자",modeTextTitle:"단순 문자 편집기",modeTreeText:"트리",modeTreeTitle:"트리 구조로 표시되는 편집기",modeViewText:"보기",modeViewTitle:"읽기전용 트리 구조로 JSON을 표시",modePreviewText:"미리보기",modePreviewTitle:"읽기전용 문자로 JSON을 표시",examples:"예제",default:"기본값",containsInvalidProperties:"잘못된 속성이 포함되어 있습니다.",containsInvalidItems:"잘못된 항목이 포함되어 있습니다"}},o=Object.keys(i),r="en",s="undefined"!=typeof navigator?navigator.language||navigator.userLanguage:void 0,a=o.find((function(e){return e===s}))||r;function l(e){var t;e&&((t=o.find((function(t){return t===e})))?a=t:console.error("Language not found"))}function d(e){if(e)for(var t in e)!function(t){o.find((function(e){return e===t}))||o.push(t),i[t]=Object.assign({},i.en,i[t],e[t])}(t)}function c(e,t,n){var o=i[n=n||a][e]||i.en[e]||e;if(t)for(var r in t)o=o.replace("${"+r+"}",t[r]);return o}},56:function(e,t,n){"use strict";n.d(t,{r:function(){return r},J:function(){return s}}),t=n(156);var i=n.n(t),o=n(791);function r(e,t){var n=t.sort,i=t.filter,r=t.projection,s="";return i?(t="@"!==i.field?["0"].concat((0,o.parsePath)("."+i.field)):["0"],t="string"==typeof(0,o.get)(e,t)?i.value:(0,o.parseString)(i.value),s+="[? "+i.field+" "+i.relation+" `"+JSON.stringify(t)+"`]"):s+=Array.isArray(e)?"[*]":"@",n&&("desc"===n.direction?s+=" | reverse(sort_by(@, &"+n.field+"))":s+=" | sort_by(@, &"+n.field+")"),r&&("]"!==s[s.length-1]&&(s+=" | [*]"),1===r.fields.length?s+="."+r.fields[0]:1<r.fields.length&&(s+=".{"+r.fields.map((function(e){var t=e.split(".");return t[t.length-1]+": "+e})).join(", ")+"}")),s}function s(e,t){return i().search(e,t)}},987:function(){function e(e){"remove"in e||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){void 0!==this.parentNode&&this.parentNode.removeChild(this)}})}"undefined"!=typeof Element&&(void 0!==window.Element&&e(window.Element.prototype),void 0!==window.CharacterData&&e(window.CharacterData.prototype),void 0!==window.DocumentType&&e(window.DocumentType.prototype)),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){for(var t=0;t<this.length;t++){var n=this[t];if(e.call(this,n,t,this))return t}return-1},configurable:!0,writable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){return this[e=this.findIndex(e)]},configurable:!0,writable:!0}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})},341:function(e,t,n){"use strict";n.r(t),n.d(t,{previewModeMixins:function(){return m}}),t=n(664);var i=n.n(t),o=n(188),r=n(436),s=n(474);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onChange=t,this.calculateItemSize=n||function(){return 1},this.limit=i,this.items=[],this.index=-1}var t,n;return t=e,(n=[{key:"add",value:function(e){for(;this._calculateHistorySize()>this.limit&&1<this.items.length;)this.items.shift(),this.index--;this.items=this.items.slice(0,this.index+1),this.items.push(e),this.index++,this.onChange()}},{key:"_calculateHistorySize",value:function(){var e=this.calculateItemSize,t=0;return this.items.forEach((function(n){t+=e(n)})),t}},{key:"undo",value:function(){if(this.canUndo())return this.index--,this.onChange(),this.items[this.index]}},{key:"redo",value:function(){if(this.canRedo())return this.index++,this.onChange(),this.items[this.index]}},{key:"canUndo",value:function(){return 0<this.index}},{key:"canRedo",value:function(){return this.index<this.items.length-1}},{key:"clear",value:function(){this.items=[],this.index=-1,this.onChange()}}])&&a(t.prototype,n),e}(),d=n(907),c=n(56),h=n(617),u=n(210),p=n(558),f=(t=n(956),n(791));n=t.textModeMixins[0].mixin,(t={create:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};void 0===t.statusBar&&(t.statusBar=!0),t.mainMenuBar=!1!==t.mainMenuBar,t.enableSort=!1!==t.enableSort,t.enableTransform=!1!==t.enableTransform,t.createQuery=t.createQuery||c.r,t.executeQuery=t.executeQuery||c.J,"number"==typeof(this.options=t).indentation?this.indentation=Number(t.indentation):this.indentation=2,(0,d.cC)(this.options.languages),(0,d.m0)(this.options.language),this.mode="preview";var n,i=this;this.container=e,this.dom={},this.json=void 0,this.text="",this._debouncedValidate=(0,f.debounce)(this.validate.bind(this),this.DEBOUNCE_INTERVAL),this.width=e.clientWidth,this.height=e.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-preview",this.frame.onclick=function(e){e.preventDefault()},e={target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null},this.frameFocusTracker=new s.R(e),this.content=document.createElement("div"),this.content.className="jsoneditor-outer",this.dom.busy=document.createElement("div"),this.dom.busy.className="jsoneditor-busy",this.dom.busyContent=document.createElement("span"),this.dom.busyContent.textContent="busy...",this.dom.busy.appendChild(this.dom.busyContent),this.content.appendChild(this.dom.busy),this.dom.previewContent=document.createElement("pre"),this.dom.previewContent.className="jsoneditor-preview",this.dom.previewText=document.createTextNode(""),this.dom.previewContent.appendChild(this.dom.previewText),this.content.appendChild(this.dom.previewContent),this.options.mainMenuBar&&((0,f.addClassName)(this.content,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu),(e=document.createElement("button")).type="button",e.className="jsoneditor-format",e.title=(0,d.Iu)("formatTitle"),this.menu.appendChild(e),e.onclick=function(){i.executeWithBusyMessage((function(){try{i.format()}catch(e){i._onError(e)}}),"formatting...")},(e=document.createElement("button")).type="button",e.className="jsoneditor-compact",e.title=(0,d.Iu)("compactTitle"),this.menu.appendChild(e),e.onclick=function(){i.executeWithBusyMessage((function(){try{i.compact()}catch(e){i._onError(e)}}),"compacting...")},this.options.enableSort&&((e=document.createElement("button")).type="button",e.className="jsoneditor-sort",e.title=(0,d.Iu)("sortTitleShort"),e.onclick=function(){i._showSortModal()},this.menu.appendChild(e)),this.options.enableTransform&&((n=document.createElement("button")).type="button",n.title=(0,d.Iu)("transformTitleShort"),n.className="jsoneditor-transform",n.onclick=function(){i._showTransformModal()},this.dom.transform=n,this.menu.appendChild(n)),(n=document.createElement("button")).type="button",n.className="jsoneditor-repair",n.title=(0,d.Iu)("repairTitle"),this.menu.appendChild(n),!(n.onclick=function(){void 0===i.json&&i.executeWithBusyMessage((function(){try{i.repair()}catch(e){i._onError(e)}}),"repairing...")})!==this.options.history&&(this.history=new l((function(){i.dom.undo.disabled=!i.history.canUndo(),i.dom.redo.disabled=!i.history.canRedo()}),(function(e){return 2*e.text.length}),o.oW),(n=document.createElement("button")).type="button",n.className="jsoneditor-undo jsoneditor-separator",n.title=(0,d.Iu)("undo"),n.onclick=function(){var e=i.history.undo();e&&i._applyHistory(e)},this.menu.appendChild(n),this.dom.undo=n,(n=document.createElement("button")).type="button",n.className="jsoneditor-redo",n.title=(0,d.Iu)("redo"),n.onclick=function(){var e=i.history.redo();e&&i._applyHistory(e)},this.menu.appendChild(n),this.dom.redo=n,this.history.onChange()),this.options&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new h.x(this.menu,this.options.modes,this.options.mode,(function(e){i.setMode(e),i.modeSwitcher.focus()})))),this.errorTable=new r.Q({errorTableVisible:!0,onToggleVisibility:function(){i.validate()},onFocusLine:null,onChangeHeight:function(e){e=e+(i.dom.statusBar?i.dom.statusBar.clientHeight:0)+1,i.content.style.marginBottom=-e+"px",i.content.style.paddingBottom=e+"px"}}),this.frame.appendChild(this.content),this.frame.appendChild(this.errorTable.getErrorTable()),this.container.appendChild(this.frame),t.statusBar&&((0,f.addClassName)(this.content,"has-status-bar"),t=document.createElement("div"),(this.dom.statusBar=t).className="jsoneditor-statusbar",this.frame.appendChild(t),this.dom.fileSizeInfo=document.createElement("span"),this.dom.fileSizeInfo.className="jsoneditor-size-info",this.dom.fileSizeInfo.innerText="",t.appendChild(this.dom.fileSizeInfo),this.dom.arrayInfo=document.createElement("span"),this.dom.arrayInfo.className="jsoneditor-size-info",this.dom.arrayInfo.innerText="",t.appendChild(this.dom.arrayInfo),t.appendChild(this.errorTable.getErrorCounter()),t.appendChild(this.errorTable.getWarningIcon()),t.appendChild(this.errorTable.getErrorIcon())),this._renderPreview(),this.setSchema(this.options.schema,this.options.schemaRefs)},_renderPreview:function(){var e=this.getText();this.dom.previewText.nodeValue=(0,f.limitCharacters)(e,o.WF),this.dom.fileSizeInfo&&(this.dom.fileSizeInfo.innerText="Size: "+(0,f.formatSize)(e.length)),this.dom.arrayInfo&&(Array.isArray(this.json)?this.dom.arrayInfo.innerText="Array: "+this.json.length+" items":this.dom.arrayInfo.innerText="")},_onChange:function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(e){console.error("Error in onChange callback: ",e)}if(this.options.onChangeJSON)try{this.options.onChangeJSON(this.get())}catch(e){console.error("Error in onChangeJSON callback: ",e)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(e){console.error("Error in onChangeText callback: ",e)}},_showSortModal:function(){var e=this;this.executeWithBusyMessage((function(){var t=e.options.modalAnchor||o.qD,n=e.get();e._renderPreview(),(0,u.showSortModal)(t,n,(function(t){e.executeWithBusyMessage((function(){var i,o,r;i=n,o=t,Array.isArray(i)&&(r=(0,f.sort)(i,o.path,o.direction),e.sortedBy=o,e._setAndFireOnChange(r)),(0,f.isObject)(i)&&(i=(0,f.sortObjectKeys)(i,o.direction),e.sortedBy=o,e._setAndFireOnChange(i))}),"sorting...")}),e.sortedBy)}),"parsing...")},_showTransformModal:function(){var e=this;this.executeWithBusyMessage((function(){var t=(r=e.options).createQuery,n=r.executeQuery,i=r.modalAnchor,r=r.queryDescription,s=e.get();e._renderPreview(),(0,p.showTransformModal)({container:i||o.qD,json:s,queryDescription:r,createQuery:t,executeQuery:n,onTransform:function(t){e.executeWithBusyMessage((function(){var i=n(s,t);e._setAndFireOnChange(i)}),"transforming...")}})}),"parsing...")},destroy:function(){this.frame&&this.container&&this.frame.parentNode===this.container&&this.container.removeChild(this.frame),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this._debouncedValidate=null,this.history&&(this.history.clear(),this.history=null),this.frameFocusTracker.destroy()},compact:function(){var e=this.get(),t=JSON.stringify(e);this._setTextAndFireOnChange(t,e)},format:function(){var e=this.get(),t=JSON.stringify(e,null,this.indentation);this._setTextAndFireOnChange(t,e)},repair:function(){var e=this.getText();try{var t=i()(e);this._setTextAndFireOnChange(t)}catch(e){}},focus:function(){this.dom.transform.focus()},set:function(e){this.history&&this.history.clear(),this._set(e)},update:function(e){this._set(e)},_set:function(e){this.text=void 0,this.json=e,this._renderPreview(),this._pushHistory(),this._debouncedValidate()},_setAndFireOnChange:function(e){this._set(e),this._onChange()},get:function(){var e;return void 0===this.json&&(e=this.getText(),this.json=(0,f.parse)(e)),this.json},getText:function(){return void 0===this.text&&(this.text=JSON.stringify(this.json,null,this.indentation),!0===this.options.escapeUnicode&&(this.text=(0,f.escapeUnicodeChars)(this.text))),this.text},setText:function(e){this.history&&this.history.clear(),this._setText(e)},updateText:function(e){this.getText()!==e&&this._setText(e)},_setText:function(e,t){var n;!0===this.options.escapeUnicode?this.text=(0,f.escapeUnicodeChars)(e):this.text=e,this.json=t,this._renderPreview(),void 0===this.json?(n=this).executeWithBusyMessage((function(){try{n.json=n.get(),n._renderPreview(),n._pushHistory()}catch(e){}}),"parsing..."):this._pushHistory(),this._debouncedValidate()},_setTextAndFireOnChange:function(e,t){this._setText(e,t),this._onChange()},_applyHistory:function(e){this.json=e.json,this.text=e.text,this._renderPreview(),this._debouncedValidate()},_pushHistory:function(){var e;this.history&&(e={text:this.text,json:this.json},this.history.add(e))},executeWithBusyMessage:function(e,t){var n;this.getText().length>o.EX?((0,f.addClassName)((n=this).frame,"busy"),n.dom.busyContent.innerText=t,setTimeout((function(){e(),(0,f.removeClassName)(n.frame,"busy"),n.dom.busyContent.innerText=""}),100)):e()}}).validate=n.validate,t._renderErrors=n._renderErrors;var m=[{mode:"preview",mixin:t,data:"json"}]},210:function(e,t,n){"use strict";n.r(t),n.d(t,{showSortModal:function(){return s}}),t=n(483);var i=n.n(t),o=n(907),r=n(791);function s(e,t,n,s){var a=Array.isArray(t)?(0,r.getChildPaths)(t):[""],l=s&&s.path&&(0,r.contains)(a,s.path)?s.path:a[0],d=s&&s.direction||"asc";s='<div class="pico-modal-contents"><div class="pico-modal-header">'+(0,o.Iu)("sort")+"</div><form><table><tbody><tr>  <td>"+(0,o.Iu)("sortFieldLabel")+' </td>  <td class="jsoneditor-modal-input">  <div class="jsoneditor-select-wrapper">    <select id="field" title="'+(0,o.Iu)("sortFieldTitle")+'">    </select>  </div>  </td></tr><tr>  <td>'+(0,o.Iu)("sortDirectionLabel")+' </td>  <td class="jsoneditor-modal-input">  <div id="direction" class="jsoneditor-button-group"><input type="button" value="'+(0,o.Iu)("sortAscending")+'" title="'+(0,o.Iu)("sortAscendingTitle")+'" data-value="asc" class="jsoneditor-button-first jsoneditor-button-asc"/><input type="button" value="'+(0,o.Iu)("sortDescending")+'" title="'+(0,o.Iu)("sortDescendingTitle")+'" data-value="desc" class="jsoneditor-button-last jsoneditor-button-desc"/>  </div>  </td></tr><tr><td colspan="2" class="jsoneditor-modal-input jsoneditor-modal-actions">  <input type="submit" id="ok" value="'+(0,o.Iu)("ok")+'" /></td></tr></tbody></table></form></div>',i()({parent:e,content:s,overlayClass:"jsoneditor-modal-overlay",overlayStyles:{backgroundColor:"rgb(1,1,1)",opacity:.3},modalClass:"jsoneditor-modal jsoneditor-modal-sort"}).afterCreate((function(e){var t=e.modalElem().querySelector("form"),i=e.modalElem().querySelector("#ok"),o=e.modalElem().querySelector("#field"),r=e.modalElem().querySelector("#direction");function s(e){r.value=e,r.className="jsoneditor-button-group jsoneditor-button-group-value-"+r.value}a.forEach((function(e){var t,n=document.createElement("option");n.text=""===(t=e)?"@":"."===t[0]?t.slice(1):t,n.value=e,o.appendChild(n)})),o.value=l||a[0],s(d||"asc"),r.onclick=function(e){s(e.target.getAttribute("data-value"))},i.onclick=function(t){t.preventDefault(),t.stopPropagation(),e.close(),n({path:o.value,direction:r.value})},t&&(t.onsubmit=i.onclick)})).afterClose((function(e){e.destroy()})).show()}},558:function(e,t,n){"use strict";n.r(t),n.d(t,{showTransformModal:function(){return h}}),t=n(483);var i=n.n(t),o=(t=n(879),n.n(t)),r=n(907);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n,i){return"boolean"==typeof e||e instanceof Boolean||null===e||"number"==typeof e||e instanceof Number||"string"==typeof e||e instanceof String||e instanceof Date?JSON.stringify(e):Array.isArray(e)?function(e,t,n,i){for(var o=t?n+t:void 0,r=t?"[\n":"[",s=0;s<e.length;s++){var l=e[s];if(t&&(r+=o),r+=void 0!==l&&"function"!=typeof l?a(l,t,o,i):"null",s<e.length-1&&(r+=t?",\n":","),r.length>i)return r+"..."}return r+(t?"\n"+n+"]":"]")}(e,t,n,i):e&&"object"===s(e)?function(e,t,n,i){var o,r=t?n+t:void 0,s=!0,l=t?"{\n":"{";if("function"==typeof e.toJSON)return a(e.toJSON(),t,n,i);for(o in e)if(function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(e,o)&&(s?s=!1:l+=t?",\n":",",l+=t?r+'"'+o+'": ':'"'+o+'":',(l+=a(e[o],t,r,i)).length>i))return l+"...";return l+(t?"\n"+n+"}":"}")}(e,t,n,i):void 0}function l(e,t){for(var n="";0<t--;)n+=e;return n}var d=n(791),c=n(188);function h(e){var t=e.container,n=e.json,s=void 0===(s=e.queryDescription)?'Enter a <a href="http://jmespath.org" target="_blank">JMESPath</a> query to filter, sort, or transform the JSON data.<br/>To learn JMESPath, go to <a href="http://jmespath.org/tutorial.html" target="_blank">the interactive tutorial</a>.':s,h=e.createQuery,u=e.executeQuery,p=e.onTransform,f=n;s='<label class="pico-modal-contents"><div class="pico-modal-header">'+(0,r.Iu)("transform")+"</div><p>"+s+'</p><div class="jsoneditor-jmespath-label">'+(0,r.Iu)("transformWizardLabel")+' </div><div id="wizard" class="jsoneditor-jmespath-block jsoneditor-jmespath-wizard">  <table class="jsoneditor-jmespath-wizard-table">    <tbody>      <tr>        <th>'+(0,r.Iu)("transformWizardFilter")+'</th>        <td class="jsoneditor-jmespath-filter">          <div class="jsoneditor-inline jsoneditor-jmespath-filter-field" >            <select id="filterField">            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-filter-relation" >            <select id="filterRelation">              <option value="==">==</option>              <option value="!=">!=</option>              <option value="<">&lt;</option>              <option value="<=">&lt;=</option>              <option value=">">&gt;</option>              <option value=">=">&gt;=</option>            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-filter-value" >            <input type="text" class="value" placeholder="value..." id="filterValue" />          </div>        </td>      </tr>      <tr>        <th>'+(0,r.Iu)("transformWizardSortBy")+'</th>        <td class="jsoneditor-jmespath-filter">          <div class="jsoneditor-inline jsoneditor-jmespath-sort-field">            <select id="sortField">            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-sort-order" >            <select id="sortOrder">              <option value="asc">Ascending</option>              <option value="desc">Descending</option>            </select>          </div>        </td>      </tr>      <tr id="selectFieldsPart">        <th>'+(0,r.Iu)("transformWizardSelectFields")+'</th>        <td class="jsoneditor-jmespath-filter">          <select class="jsoneditor-jmespath-select-fields" id="selectFields" multiple></select>        </td>      </tr>    </tbody>  </table></div><div class="jsoneditor-jmespath-label">'+(0,r.Iu)("transformQueryLabel")+' </div><div class="jsoneditor-jmespath-block">  <textarea id="query"             rows="4"             autocomplete="off"             autocorrect="off"             autocapitalize="off"             spellcheck="false"            title="'+(0,r.Iu)("transformQueryTitle")+'">[*]</textarea></div><div class="jsoneditor-jmespath-label">'+(0,r.Iu)("transformPreviewLabel")+' </div><div class="jsoneditor-jmespath-block">  <textarea id="preview"       class="jsoneditor-transform-preview"      readonly> </textarea></div><div class="jsoneditor-jmespath-block jsoneditor-modal-actions">  <input type="submit" id="ok" value="'+(0,r.Iu)("ok")+'" autofocus /></div></div>',i()({parent:t,content:s,overlayClass:"jsoneditor-modal-overlay",overlayStyles:{backgroundColor:"rgb(1,1,1)",opacity:.3},modalClass:"jsoneditor-modal jsoneditor-modal-transform",focus:!1}).afterCreate((function(e){var t=e.modalElem(),i=t.querySelector("#wizard"),r=t.querySelector("#ok"),s=t.querySelector("#filterField"),m=t.querySelector("#filterRelation"),g=t.querySelector("#filterValue"),v=t.querySelector("#sortField"),y=t.querySelector("#sortOrder"),b=t.querySelector("#selectFields"),x=t.querySelector("#query"),C=t.querySelector("#preview");Array.isArray(f)||(i.style.fontStyle="italic",i.textContent="(wizard not available for objects, only for arrays)"),(0,d.getChildPaths)(n).forEach((function(e){var t=k(e);(e=document.createElement("option")).text=t,e.value=t,s.appendChild(e),(e=document.createElement("option")).text=t,e.value=t,v.appendChild(e)})),0<(S=(0,d.getChildPaths)(n,!0).filter((function(e){return""!==e}))).length?S.forEach((function(e){var t=k(e);(e=document.createElement("option")).text=t,e.value=t,b.appendChild(e)})):(E=t.querySelector("#selectFieldsPart"))&&(E.style.display="none");var w=new(o())(s,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"field..."}),T=new(o())(m,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"compare..."}),S=(i=new(o())(v,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"field..."}),new(o())(y,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"order..."})),E=new(o())(b,{multiple:!0,clearable:!0,defaultSelected:!1,placeholder:"select fields..."});function k(e){return""===e?"@":"."===e[0]?e.slice(1):e}w.on("selectr.change",I),T.on("selectr.change",I),g.oninput=I,i.on("selectr.change",I),S.on("selectr.change",I),E.on("selectr.change",I),t.querySelector(".pico-modal-contents").onclick=function(e){"A"!==e.target.nodeName&&e.preventDefault()};var N=(0,d.debounce)((function(){try{var e=u(f,x.value);C.className="jsoneditor-transform-preview",C.value=(t=e,n=c.WF,(t=a(t,i=l(" ",2),"",n)).length>n?(i=t,("number"==typeof(n=n)?i.slice(0,n):i)+"..."):t),r.disabled=!1}catch(e){C.className="jsoneditor-transform-preview jsoneditor-error",C.value=e.toString(),r.disabled=!0}var t,n,i}),300);function _(e,t){try{x.value=h(e,t),r.disabled=!1,N()}catch(e){t='Error: an error happened when executing "createQuery": '+(e.message||e.toString()),x.value="",r.disabled=!0,C.className="jsoneditor-transform-preview jsoneditor-error",C.value=t}}function I(){var e={};if(s.value&&m.value&&g.value&&(e.filter={field:s.value,relation:m.value,value:g.value}),v.value&&y.value&&(e.sort={field:v.value,direction:y.value}),b.value){for(var t,i=[],o=0;o<b.options.length;o++)b.options[o].selected&&(t=b.options[o].value,i.push(t));e.projection={fields:i}}_(n,e)}x.oninput=N,r.onclick=function(t){t.preventDefault(),t.stopPropagation(),e.close(),p(x.value)},_(n,{}),setTimeout((function(){x.select(),x.focus(),x.selectionStart=3,x.selectionEnd=3}))})).afterClose((function(e){e.destroy()})).show()}},956:function(e,t,n){"use strict";n.r(t),n.d(t,{textModeMixins:function(){return y}}),t=n(664);var i=n.n(t),o=(t=n(170),n.n(t)),r=n(188),s=n(436),a=n(474),l=n(907),d=n(56),c=n(617),h=n(210),u=n(558),p=n(49),f=n(791);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g="ace/theme/jsoneditor";function v(){try{this.format()}catch(e){}}(n={}).create=function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};void 0===n.statusBar&&(n.statusBar=!0),n.mainMenuBar=!1!==n.mainMenuBar,n.enableSort=!1!==n.enableSort,n.enableTransform=!1!==n.enableTransform,n.createQuery=n.createQuery||d.r,n.executeQuery=n.executeQuery||d.J,"number"==typeof(this.options=n).indentation?this.indentation=Number(n.indentation):this.indentation=2,(0,l.cC)(this.options.languages),(0,l.m0)(this.options.language);var i=n.ace||o();this.mode="code"===n.mode?"code":"text","code"===this.mode&&void 0===i&&(this.mode="text",console.warn("Failed to load Ace editor, falling back to plain text mode. Please use a JSONEditor bundle including Ace, or pass Ace as via the configuration option `ace`.")),this.theme=n.theme||g,this.theme===g&&i&&(0,p.O)(),n.onTextSelectionChange&&this.onTextSelectionChange(n.onTextSelectionChange);var r,h,u=this;this.container=e,this.dom={},this.aceEditor=void 0,this.textarea=void 0,this.validateSchema=null,this.annotations=[],this.lastSchemaErrors=void 0,this._debouncedValidate=(0,f.debounce)(this._validateAndCatch.bind(this),this.DEBOUNCE_INTERVAL),this.width=e.clientWidth,this.height=e.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.frame.onclick=function(e){e.preventDefault()},this.frame.onkeydown=function(e){u._onKeyDown(e)},e={target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null},this.frameFocusTracker=new a.R(e),this.content=document.createElement("div"),this.content.className="jsoneditor-outer",this.options.mainMenuBar&&((0,f.addClassName)(this.content,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu),(e=document.createElement("button")).type="button",e.className="jsoneditor-format",e.title=(0,l.Iu)("formatTitle"),this.menu.appendChild(e),e.onclick=function(){try{u.format(),u._onChange()}catch(e){u._onError(e)}},(e=document.createElement("button")).type="button",e.className="jsoneditor-compact",e.title=(0,l.Iu)("compactTitle"),this.menu.appendChild(e),e.onclick=function(){try{u.compact(),u._onChange()}catch(e){u._onError(e)}},this.options.enableSort&&((e=document.createElement("button")).type="button",e.className="jsoneditor-sort",e.title=(0,l.Iu)("sortTitleShort"),e.onclick=function(){u._showSortModal()},this.menu.appendChild(e)),this.options.enableTransform&&((r=document.createElement("button")).type="button",r.title=(0,l.Iu)("transformTitleShort"),r.className="jsoneditor-transform",r.onclick=function(){u._showTransformModal()},this.menu.appendChild(r)),(r=document.createElement("button")).type="button",r.className="jsoneditor-repair",r.title=(0,l.Iu)("repairTitle"),this.menu.appendChild(r),r.onclick=function(){try{u.repair(),u._onChange()}catch(e){u._onError(e)}},"code"===this.mode&&((x=document.createElement("button")).type="button",x.className="jsoneditor-undo jsoneditor-separator",x.title=(0,l.Iu)("undo"),x.onclick=function(){t.aceEditor.getSession().getUndoManager().undo()},this.menu.appendChild(x),this.dom.undo=x,(x=document.createElement("button")).type="button",x.className="jsoneditor-redo",x.title=(0,l.Iu)("redo"),x.onclick=function(){t.aceEditor.getSession().getUndoManager().redo()},this.menu.appendChild(x),this.dom.redo=x),this.options&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new c.x(this.menu,this.options.modes,this.options.mode,(function(e){u.setMode(e),u.modeSwitcher.focus()}))),"code"===this.mode&&((h=document.createElement("a")).appendChild(document.createTextNode("powered by ace")),h.href="https://ace.c9.io/",h.target="_blank",h.className="jsoneditor-poweredBy",h.onclick=function(){window.open(h.href,h.target,"noopener")},this.menu.appendChild(h)));var v,y,b,x=this.options.onEditable&&m("function"===this.options.onEditable)&&!this.options.onEditable({});this.frame.appendChild(this.content),this.container.appendChild(this.frame),"code"===this.mode?(this.editorDom=document.createElement("div"),this.editorDom.style.height="100%",this.editorDom.style.width="100%",this.content.appendChild(this.editorDom),i=(y=i.edit(this.editorDom)).getSession(),y.$blockScrolling=1/0,y.setTheme(this.theme),y.setOptions({readOnly:x}),y.setShowPrintMargin(!1),y.setFontSize("13px"),i.setMode("ace/mode/json"),i.setTabSize(this.indentation),i.setUseSoftTabs(!0),i.setUseWrapMode(!0),v=i.setAnnotations,i.setAnnotations=function(e){v.call(this,e&&e.length?e:u.annotations)},y.commands.bindKey("Ctrl-L",null),y.commands.bindKey("Command-L",null),y.commands.bindKey("Ctrl-\\",null),y.commands.bindKey("Command-\\",null),y.commands.bindKey("Ctrl-Shift-\\",null),y.commands.bindKey("Command-Shift-\\",null),(this.aceEditor=y).on("change",this._onChange.bind(this)),y.on("changeSelection",this._onSelect.bind(this))):((b=document.createElement("textarea")).className="jsoneditor-text",b.spellcheck=!1,this.content.appendChild(b),this.textarea=b,this.textarea.readOnly=x,null===this.textarea.oninput?this.textarea.oninput=this._onChange.bind(this):this.textarea.onchange=this._onChange.bind(this),b.onselect=this._onSelect.bind(this),b.onmousedown=this._onMouseDown.bind(this),b.onblur=this._onBlur.bind(this)),this._updateHistoryButtons(),this.errorTable=new s.Q({errorTableVisible:"text"===this.mode,onToggleVisibility:function(){u._validateAndCatch()},onFocusLine:function(e){u.isFocused=!0,isNaN(e)||u.setTextSelection({row:e,column:1},{row:e,column:1e3})},onChangeHeight:function(e){e=e+(u.dom.statusBar?u.dom.statusBar.clientHeight:0)+1,u.content.style.marginBottom=-e+"px",u.content.style.paddingBottom=e+"px"}}),this.frame.appendChild(this.errorTable.getErrorTable()),n.statusBar&&((0,f.addClassName)(this.content,"has-status-bar"),this.curserInfoElements={},y=document.createElement("div"),(this.dom.statusBar=y).className="jsoneditor-statusbar",this.frame.appendChild(y),(x=document.createElement("span")).className="jsoneditor-curserinfo-label",x.innerText="Ln:",(b=document.createElement("span")).className="jsoneditor-curserinfo-val",b.innerText="1",y.appendChild(x),y.appendChild(b),(n=document.createElement("span")).className="jsoneditor-curserinfo-label",n.innerText="Col:",(x=document.createElement("span")).className="jsoneditor-curserinfo-val",x.innerText="1",y.appendChild(n),y.appendChild(x),this.curserInfoElements.colVal=x,this.curserInfoElements.lnVal=b,(x=document.createElement("span")).className="jsoneditor-curserinfo-label",x.innerText="characters selected",x.style.display="none",(b=document.createElement("span")).className="jsoneditor-curserinfo-count",b.innerText="0",b.style.display="none",this.curserInfoElements.countLabel=x,this.curserInfoElements.countVal=b,y.appendChild(b),y.appendChild(x),y.appendChild(this.errorTable.getErrorCounter()),y.appendChild(this.errorTable.getWarningIcon()),y.appendChild(this.errorTable.getErrorIcon())),this.setSchema(this.options.schema,this.options.schemaRefs)},n._onChange=function(){var e=this;if(!this.onChangeDisabled){if(setTimeout((function(){e._updateHistoryButtons&&e._updateHistoryButtons()})),this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(e){console.error("Error in onChange callback: ",e)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(e){console.error("Error in onChangeText callback: ",e)}}},n._updateHistoryButtons=function(){var e;this.aceEditor&&this.dom.undo&&this.dom.redo&&(e=this.aceEditor.getSession().getUndoManager())&&e.hasUndo&&e.hasRedo&&(this.dom.undo.disabled=!e.hasUndo(),this.dom.redo.disabled=!e.hasRedo())},n._showSortModal=function(){var e=this,t=this.options.modalAnchor||r.qD,n=this.get();(0,h.showSortModal)(t,n,(function(t){var i;Array.isArray(n)&&(i=(0,f.sort)(n,t.path,t.direction),e.sortedBy=t,e.update(i)),(0,f.isObject)(n)&&(i=(0,f.sortObjectKeys)(n,t.direction),e.sortedBy=t,e.update(i))}),e.sortedBy)},n._showTransformModal=function(){var e=this,t=(o=this.options).modalAnchor,n=o.createQuery,i=o.executeQuery,o=o.queryDescription,s=this.get();(0,u.showTransformModal)({container:t||r.qD,json:s,queryDescription:o,createQuery:n,executeQuery:i,onTransform:function(t){t=i(s,t),e.update(t)}})},n._onSelect=function(){this._updateCursorInfo(),this._emitSelectionChange()},n._onKeyDown=function(e){var t=!1;73===(e.which||e.keyCode)&&e.ctrlKey&&(e.shiftKey?this.compact():this.format(),this._onChange(),t=!0),t&&(e.preventDefault(),e.stopPropagation()),this._updateCursorInfo(),this._emitSelectionChange()},n._onMouseDown=function(){this._updateCursorInfo(),this._emitSelectionChange()},n._onBlur=function(){var e=this;setTimeout((function(){e.isFocused||(e._updateCursorInfo(),e._emitSelectionChange()),e.isFocused=!1}))},n._updateCursorInfo=function(){var e,t,n,i,o,r=this;function s(){r.curserInfoElements.countVal.innerText!==o&&(r.curserInfoElements.countVal.innerText=o,r.curserInfoElements.countVal.style.display=o?"inline":"none",r.curserInfoElements.countLabel.style.display=o?"inline":"none"),r.curserInfoElements.lnVal.innerText=n,r.curserInfoElements.colVal.innerText=i}this.textarea?setTimeout((function(){var e=(0,f.getInputSelection)(r.textarea);e.startIndex!==e.endIndex&&(o=e.endIndex-e.startIndex),i=o&&r.cursorInfo&&r.cursorInfo.line===e.end.row&&r.cursorInfo.column===e.end.column?(n=e.start.row,e.start.column):(n=e.end.row,e.end.column),r.cursorInfo={line:n,column:i,count:o},r.options.statusBar&&s()}),0):this.aceEditor&&this.curserInfoElements&&(e=this.aceEditor.getCursorPosition(),t=this.aceEditor.getSelectedText(),n=e.row+1,i=e.column+1,o=t.length,r.cursorInfo={line:n,column:i,count:o},this.options.statusBar&&s())},n._emitSelectionChange=function(){var e;this._selectionChangedHandler&&(e=this.getTextSelection(),this._selectionChangedHandler(e.start,e.end,e.text))},n._refreshAnnotations=function(){var e,t=this.aceEditor&&this.aceEditor.getSession();t&&(e=t.getAnnotations().filter((function(e){return"error"===e.type})),t.setAnnotations(e))},n.destroy=function(){this.aceEditor&&(this.aceEditor.destroy(),this.aceEditor=null),this.frame&&this.container&&this.frame.parentNode===this.container&&this.container.removeChild(this.frame),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this.textarea=null,this._debouncedValidate=null,this.frameFocusTracker.destroy()},n.compact=function(){var e=this.get();e=JSON.stringify(e),this.updateText(e)},n.format=function(){var e=this.get();e=JSON.stringify(e,null,this.indentation),this.updateText(e)},n.repair=function(){var e=this.getText();try{var t=i()(e);this.updateText(t)}catch(e){}},n.focus=function(){this.textarea&&this.textarea.focus(),this.aceEditor&&this.aceEditor.focus()},n.resize=function(){this.aceEditor&&this.aceEditor.resize(!1)},n.set=function(e){this.setText(JSON.stringify(e,null,this.indentation))},n.update=function(e){this.updateText(JSON.stringify(e,null,this.indentation))},n.get=function(){var e=this.getText();return(0,f.parse)(e)},n.getText=function(){return this.textarea?this.textarea.value:this.aceEditor?this.aceEditor.getValue():""},n._setText=function(e,t){var n,i=this;e=!0===this.options.escapeUnicode?(0,f.escapeUnicodeChars)(e):e,this.textarea&&(this.textarea.value=e),this.aceEditor&&(this.onChangeDisabled=!0,this.aceEditor.setValue(e,-1),this.onChangeDisabled=!1,t&&(n=this,setTimeout((function(){n.aceEditor&&n.aceEditor.session.getUndoManager().reset()}))),setTimeout((function(){i._updateHistoryButtons&&i._updateHistoryButtons()}))),this._debouncedValidate()},n.setText=function(e){this._setText(e,!0)},n.updateText=function(e){this.getText()!==e&&this._setText(e,!1)},n.validate=function(){var e,t=this,n=[],i=[];try{var o=this.get();this.validateSchema&&(this.validateSchema(o)||(n=this.validateSchema.errors.map((function(e){return e.type="validation",(0,f.improveSchemaError)(e)})))),this.validationSequence=(this.validationSequence||0)+1;var r=this,s=this.validationSequence;return function(e,t){if(!t)return Promise.resolve([]);try{var n=t(e);return((0,f.isPromise)(n)?n:Promise.resolve(n)).then((function(e){return Array.isArray(e)?e.filter((function(e){var t=(0,f.isValidValidationError)(e);return t||console.warn('Ignoring a custom validation error with invalid structure. Expected structure: {path: [...], message: "..."}. Actual error:',e),t})).map((function(e){return{dataPath:(0,f.stringifyPath)(e.path),message:e.message,type:"customValidation"}})):[]}))}catch(e){return Promise.reject(e)}}(o,this.options.onValidate).then((function(e){return s===r.validationSequence&&(e=n.concat(i).concat(e),r._renderErrors(e),"function"==typeof t.options.onValidationError&&(0,f.isValidationErrorChanged)(e,t.lastSchemaErrors)&&t.options.onValidationError.call(t,e),t.lastSchemaErrors=e),t.lastSchemaErrors}))}catch(t){return this.getText()&&((o=/\w*line\s*(\d+)\w*/g.exec(t.message))&&(e=+o[1]),i=[{type:"error",message:t.message.replace(/\n/g,"<br>"),line:e}]),this._renderErrors(i),"function"==typeof this.options.onValidationError&&(0,f.isValidationErrorChanged)(i,this.lastSchemaErrors)&&this.options.onValidationError.call(this,i),this.lastSchemaErrors=i,Promise.resolve(this.lastSchemaErrors)}},n._validateAndCatch=function(){this.validate().catch((function(e){console.error("Error running validation:",e)}))},n._renderErrors=function(e){var t=this.getText(),n=[];e.reduce((function(e,t){return"string"==typeof t.dataPath&&-1===e.indexOf(t.dataPath)&&e.push(t.dataPath),e}),n),n=(0,f.getPositionForPath)(t,n),this.aceEditor&&(this.annotations=n.map((function(t){var n=e.filter((function(e){return e.dataPath===t.path})),i=n.map((function(e){return e.message})).join("\n");return i?{row:t.line,column:t.column,text:"Schema validation error"+(1!==n.length?"s":"")+": \n"+i,type:"warning",source:"jsoneditor"}:{}})),this._refreshAnnotations()),this.errorTable.setErrors(e,n),this.aceEditor&&this.aceEditor.resize(!1)},n.getTextSelection=function(){var e={};if(this.textarea){var t=(0,f.getInputSelection)(this.textarea);return this.cursorInfo&&this.cursorInfo.line===t.end.row&&this.cursorInfo.column===t.end.column?(e.start=t.end,e.end=t.start):e=t,{start:e.start,end:e.end,text:this.textarea.value.substring(t.startIndex,t.endIndex)}}if(this.aceEditor){var n=this.aceEditor.getSelection(),i=this.aceEditor.getSelectedText();return t=n.getRange(),(n=n.getSelectionLead()).row===t.end.row&&n.column===t.end.column?e=t:(e.start=t.end,e.end=t.start),{start:{row:e.start.row+1,column:e.start.column+1},end:{row:e.end.row+1,column:e.end.column+1},text:i}}},n.onTextSelectionChange=function(e){"function"==typeof e&&(this._selectionChangedHandler=(0,f.debounce)(e,this.DEBOUNCE_INTERVAL))},n.setTextSelection=function(e,t){var n,i,o;e&&t&&(this.textarea?(n=(0,f.getIndexForPosition)(this.textarea,e.row,e.column),i=(0,f.getIndexForPosition)(this.textarea,t.row,t.column),-1<n&&-1<i&&(this.textarea.setSelectionRange?(this.textarea.focus(),this.textarea.setSelectionRange(n,i)):this.textarea.createTextRange&&((o=this.textarea.createTextRange()).collapse(!0),o.moveEnd("character",i),o.moveStart("character",n),o.select()),o=(this.textarea.value.match(/\n/g)||[]).length+1,o=this.textarea.scrollHeight/o,o=e.row*o,this.textarea.scrollTop=o>this.textarea.clientHeight?o-this.textarea.clientHeight/2:0)):this.aceEditor&&(t={start:{row:e.row-1,column:e.column-1},end:{row:t.row-1,column:t.column-1}},this.aceEditor.selection.setRange(t),this.aceEditor.scrollToLine(e.row-1,!0)))};var y=[{mode:"text",mixin:n,data:"text",load:v},{mode:"code",mixin:n,data:"text",load:v}]},38:function(e,t,n){"use strict";n.r(t),n.d(t,{treeModeMixins:function(){return V}});var i={start:function(e,t,n){return 0===t.indexOf(e)},contain:function(e,t,n){return-1<t.indexOf(e)}},o=n(897),r=n(474);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.locked=!1}var t,n;return t=e,(n=[{key:"highlight",value:function(e){this.locked||(this.node!==e&&(this.node&&this.node.setHighlight(!1),this.node=e,this.node.setHighlight(!0)),this._cancelUnhighlight())}},{key:"unhighlight",value:function(){var e;this.locked||(e=this).node&&(this._cancelUnhighlight(),this.unhighlightTimer=setTimeout((function(){e.node.setHighlight(!1),e.node=void 0,e.unhighlightTimer=void 0}),0))}},{key:"_cancelUnhighlight",value:function(){this.unhighlightTimer&&(clearTimeout(this.unhighlightTimer),this.unhighlightTimer=void 0)}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}}])&&s(t.prototype,n),e}(),l=n(907),d=n(56),c=n(617),h=(t=n(233),n.n(t)),u=n(602),p=n(791),f=n(210),m=n(558),g=n(188);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,o,r=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return r}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){s=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw o}}}}function b(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var T=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editor=t,this.dom={},this.expanded=!1,n&&n instanceof Object?(this.setField(n.field,n.fieldEditable),"value"in n&&this.setValue(n.value,n.type),"internalValue"in n&&this.setInternalValue(n.internalValue)):(this.setField(""),this.setValue(null)),this._debouncedOnChangeValue=(0,p.debounce)(this._onChangeValue.bind(this),e.prototype.DEBOUNCE_INTERVAL),this._debouncedOnChangeField=(0,p.debounce)(this._onChangeField.bind(this),e.prototype.DEBOUNCE_INTERVAL),this.visibleChilds=this.getMaxVisibleChilds()}var t,n;return t=e,(n=[{key:"getMaxVisibleChilds",value:function(){return this.editor&&this.editor.options&&this.editor.options.maxVisibleChilds?this.editor.options.maxVisibleChilds:S}},{key:"_updateEditability",value:function(){var e;this.editable={field:!0,value:!0},this.editor&&(this.editable.field="tree"===this.editor.options.mode,this.editable.value="view"!==this.editor.options.mode,"tree"!==this.editor.options.mode&&"form"!==this.editor.options.mode||"function"!=typeof this.editor.options.onEditable||("boolean"==typeof(e=this.editor.options.onEditable({field:this.field,value:this.value,path:this.getPath()}))?(this.editable.field=e,this.editable.value=e):"object"===C(e)&&null!==e?("boolean"==typeof e.field&&(this.editable.field=e.field),"boolean"==typeof e.value&&(this.editable.value=e.value)):(console.error("Invalid return value for function onEditable.","Actual value:",e,".","Either a boolean or object { field: boolean, value: boolean } expected."),this.editable.field=!1,this.editable.value=!1)))}},{key:"getPath",value:function(){for(var e=this,t=[];e;){var n=e.getName();void 0!==n&&t.unshift(n),e=e.parent}return t}},{key:"getInternalPath",value:function(){for(var e=this,t=[];e;)e.parent&&t.unshift(e.getIndex()),e=e.parent;return t}},{key:"getName",value:function(){return this.parent?"array"!==this.parent.type?this.field:this.index:void 0}},{key:"findNodeByPath",value:function(e){if(e){if(0===e.length)return this;if(e.length&&this.childs&&this.childs.length)for(var t=0;t<this.childs.length;++t)if(""+e[0]==""+this.childs[t].getName())return this.childs[t].findNodeByPath(e.slice(1))}}},{key:"findNodeByInternalPath",value:function(e){if(e){for(var t=this,n=0;n<e.length&&t;n++){var i=e[n];t=t.childs[i]}return t}}},{key:"serialize",value:function(){return{value:this.getValue(),path:this.getPath()}}},{key:"findNode",value:function(e){for(var t=(0,p.parsePath)(e),n=this;n&&0<t.length;)!function(){var e=t.shift();if("number"==typeof e){if("array"!==n.type)throw new Error("Cannot get child node at index "+e+": node is no array");n=n.childs[e]}else{if("object"!==n.type)throw new Error("Cannot get child node "+e+": node is no object");n=n.childs.filter((function(t){return t.field===e}))[0]}}();return n}},{key:"findParents",value:function(){for(var e=[],t=this.parent;t;)e.unshift(t),t=t.parent;return e}},{key:"setError",value:function(e,t){this.error=e,this.errorChild=t,this.dom&&this.dom.tr&&this.updateError()}},{key:"updateError",value:function(){var e=this,t=this.fieldError||this.valueError||this.error,n=this.dom.tdError;if(t&&this.dom&&this.dom.tr){(0,p.addClassName)(this.dom.tr,"jsoneditor-validation-error"),n||(n=document.createElement("td"),this.dom.tdError=n,this.dom.tdValue.parentNode.appendChild(n));var i=document.createElement("button");i.type="button",i.className="jsoneditor-button jsoneditor-schema-error";var o=function(){e.dom.popupAnchor&&e.dom.popupAnchor.destroy()},r=function(){delete e.dom.popupAnchor},s=function(n){var o=e.editor.frame;e.dom.popupAnchor=(0,u.w)(i,e.editor.getPopupAnchor(),r,n),n=i.getBoundingClientRect(),o=120<o.getBoundingClientRect().width-n.x?"jsoneditor-above":"jsoneditor-left",(n=document.createElement("div")).className="jsoneditor-popover "+o,n.appendChild(document.createTextNode(t.message)),e.dom.popupAnchor.appendChild(n)};i.onmouseover=function(){e.dom.popupAnchor||s(!0)},i.onfocus=function(){o(),s(!1)},i.onblur=function(){o()};var a=this.errorChild;for(a&&(i.onclick=function(){a.findParents().forEach((function(e){e.expand(!1)})),a.scrollTo((function(){a.focus()}))});n.firstChild;)n.removeChild(n.firstChild);n.appendChild(i)}else this.dom.tr&&(0,p.removeClassName)(this.dom.tr,"jsoneditor-validation-error"),n&&(this.dom.tdError.parentNode.removeChild(this.dom.tdError),delete this.dom.tdError)}},{key:"getIndex",value:function(){if(this.parent){var e=this.parent.childs.indexOf(this);return-1!==e?e:null}return-1}},{key:"setParent",value:function(e){this.parent=e}},{key:"setField",value:function(e,t){this.field=e,this.previousField=e,this.fieldEditable=!0===t}},{key:"getField",value:function(){return void 0===this.field&&this._getDomField(),this.field}},{key:"setValue",value:function(t,n){var i,o,r,s,a,l,d=this.childs;if(this.type=this._getType(t),n&&n!==this.type){if("string"!==n||"auto"!==this.type)throw new Error('Type mismatch: cannot cast value of type "'+this.type+' to the specified type "'+n+'"');this.type=n}if("array"===this.type){for(this.childs||(this.childs=[]),i=0;i<t.length;i++)void 0===(a=t[i])||a instanceof Function||(i<this.childs.length?((r=this.childs[i]).fieldEditable=!1,r.index=i,r.setValue(a)):(r=new e(this.editor,{value:a}),s=i<this.getMaxVisibleChilds(),this.appendChild(r,s,!1)));for(o=this.childs.length;o>=t.length;o--)this.removeChild(this.childs[o],!1)}else if("object"===this.type){for(this.childs||(this.childs=[]),o=this.childs.length-1;0<=o;o--)N(t,this.childs[o].field)||this.removeChild(this.childs[o],!1);for(var c in i=0,t)N(t,c)&&(void 0===(a=t[c])||a instanceof Function||((l=this.findChildByProperty(c))?(l.setField(c,!0),l.setValue(a)):(l=new e(this.editor,{field:c,value:a}),c=i<this.getMaxVisibleChilds(),this.appendChild(l,c,!1))),i++);!(this.value="")===this.editor.options.sortObjectKeys&&this.sort([],"asc",!1)}else this.hideChilds(),delete this.append,delete this.showMore,delete this.expanded,delete this.childs,this.value=t;Array.isArray(d)!==Array.isArray(this.childs)&&this.recreateDom(),this.updateDom({updateIndexes:!0}),this.previousValue=this.value}},{key:"setInternalValue",value:function(t){var n,i,o,r,s,a=this.childs;if(this.type=t.type,"array"===t.type){for(this.childs||(this.childs=[]),r=0;r<t.childs.length;r++)void 0===(n=t.childs[r])||n instanceof Function||(r<this.childs.length?((i=this.childs[r]).fieldEditable=!1,i.index=r,i.setInternalValue(n)):(i=new e(this.editor,{internalValue:n}),o=r<this.getMaxVisibleChilds(),this.appendChild(i,o,!1)));for(s=this.childs.length;s>=t.childs.length;s--)this.removeChild(this.childs[s],!1)}else if("object"===t.type){for(this.childs||(this.childs=[]),r=0;r<t.childs.length;r++)void 0===(n=t.childs[r])||n instanceof Function||(r<this.childs.length?(delete(i=this.childs[r]).index,i.setField(n.field,!0),i.setInternalValue(n.value)):(i=new e(this.editor,{field:n.field,internalValue:n.value}),o=r<this.getMaxVisibleChilds(),this.appendChild(i,o,!1)));for(s=this.childs.length;s>=t.childs.length;s--)this.removeChild(this.childs[s],!1)}else this.hideChilds(),delete this.append,delete this.showMore,delete this.expanded,delete this.childs,this.value=t.value;Array.isArray(a)!==Array.isArray(this.childs)&&this.recreateDom(),this.updateDom({updateIndexes:!0}),this.previousValue=this.value}},{key:"recreateDom",value:function(){var e;this.dom&&this.dom.tr&&this.dom.tr.parentNode?(e=this._detachFromDom(),this.clearDom(),this._attachToDom(e)):this.clearDom()}},{key:"getValue",value:function(){if("array"===this.type){var e=[];return this.childs.forEach((function(t){e.push(t.getValue())})),e}if("object"!==this.type)return void 0===this.value&&this._getDomValue(),this.value;var t={};return this.childs.forEach((function(e){t[e.getField()]=e.getValue()})),t}},{key:"getInternalValue",value:function(){return"array"===this.type?{type:this.type,childs:this.childs.map((function(e){return e.getInternalValue()}))}:"object"===this.type?{type:this.type,childs:this.childs.map((function(e){return{field:e.getField(),value:e.getInternalValue()}}))}:(void 0===this.value&&this._getDomValue(),{type:this.type,value:this.value})}},{key:"getLevel",value:function(){return this.parent?this.parent.getLevel()+1:0}},{key:"getNodePath",value:function(){var e=this.parent?this.parent.getNodePath():[];return e.push(this),e}},{key:"clone",value:function(){var t,n;return(t=new e(this.editor)).type=this.type,t.field=this.field,t.fieldInnerText=this.fieldInnerText,t.fieldEditable=this.fieldEditable,t.previousField=this.previousField,t.value=this.value,t.valueInnerText=this.valueInnerText,t.previousValue=this.previousValue,t.expanded=this.expanded,t.visibleChilds=this.visibleChilds,this.childs?(n=[],this.childs.forEach((function(e){(e=e.clone()).setParent(t),n.push(e)})),t.childs=n):t.childs=void 0,t}},{key:"expand",value:function(e){this.childs&&(this.expanded=!0,this.dom.expand&&(this.dom.expand.className="jsoneditor-button jsoneditor-expanded"),this.showChilds(),!1!==e&&this.childs.forEach((function(t){t.expand(e)})),this.updateDom({recurse:!1}))}},{key:"collapse",value:function(e){this.childs&&(this.hideChilds(),!1!==e&&this.childs.forEach((function(t){t.collapse(e)})),this.dom.expand&&(this.dom.expand.className="jsoneditor-button jsoneditor-collapsed"),this.expanded=!1,this.updateDom({recurse:!1}))}},{key:"showChilds",value:function(){var e=this.childs;if(e&&this.expanded){var t=this.dom.tr,n=t?t.parentNode:void 0;if(n){(e=this.getAppendDom()).parentNode||((o=t.nextSibling)?n.insertBefore(e,o):n.appendChild(e));for(var i=Math.min(this.childs.length,this.visibleChilds),o=this._getNextTr(),r=0;r<i;r++){var s=this.childs[r];s.getDom().parentNode||n.insertBefore(s.getDom(),o),s.showChilds()}e=this.getShowMoreDom(),o=this._getNextTr(),e.parentNode||n.insertBefore(e,o),this.showMore.updateDom()}}}},{key:"_getNextTr",value:function(){return this.showMore&&this.showMore.getDom().parentNode?this.showMore.getDom():this.append&&this.append.getDom().parentNode?this.append.getDom():void 0}},{key:"hide",value:function(e){var t=this.dom.tr,n=t?t.parentNode:void 0;n&&n.removeChild(t),this.dom.popupAnchor&&this.dom.popupAnchor.destroy(),this.hideChilds(e)}},{key:"hideChilds",value:function(e){var t;this.childs&&this.expanded&&((t=this.getAppendDom()).parentNode&&t.parentNode.removeChild(t),this.childs.forEach((function(e){e.hide()})),(t=this.getShowMoreDom()).parentNode&&t.parentNode.removeChild(t),e&&!e.resetVisibleChilds||(this.visibleChilds=this.getMaxVisibleChilds()))}},{key:"_updateCssClassName",value:function(){var e;this.dom.field&&this.editor&&this.editor.options&&"function"==typeof this.editor.options.onClassName&&this.dom.tree&&((0,p.removeAllClassNames)(this.dom.tree),e=this.editor.options.onClassName({path:this.getPath(),field:this.field,value:this.value})||"",(0,p.addClassName)(this.dom.tree,"jsoneditor-values "+e))}},{key:"recursivelyUpdateCssClassesOnNodes",value:function(){if(this._updateCssClassName(),Array.isArray(this.childs))for(var e=0;e<this.childs.length;e++)this.childs[e].recursivelyUpdateCssClassesOnNodes()}},{key:"expandTo",value:function(){for(var e=this.parent;e;)e.expanded||e.expand(),e=e.parent}},{key:"appendChild",value:function(e,t,n){var i,o;this._hasChilds()&&(e.setParent(this),e.fieldEditable="object"===this.type,"array"===this.type&&(e.index=this.childs.length),"object"===this.type&&void 0===e.field&&e.setField(""),this.childs.push(e),this.expanded&&!1!==t&&(i=e.getDom(),t=(o=this._getNextTr())?o.parentNode:void 0,o&&t&&t.insertBefore(i,o),e.showChilds(),this.visibleChilds++),!1!==n&&(this.updateDom({updateIndexes:!0}),e.updateDom({recurse:!0})))}},{key:"moveBefore",value:function(e,t,n){var i,o,r;this._hasChilds()&&((i=this.dom.tr?this.dom.tr.parentNode:void 0)&&((o=document.createElement("tr")).style.height=i.clientHeight+"px",i.appendChild(o)),e.parent&&e.parent.removeChild(e),t instanceof _||!t?this.childs.length+1>this.visibleChilds?(r=this.childs[this.visibleChilds-1],this.insertBefore(e,r,n)):this.appendChild(e,!0,n):this.insertBefore(e,t,n),i&&o&&i.removeChild(o))}},{key:"insertBefore",value:function(e,t,n){if(this._hasChilds()){if(this.visibleChilds++,"object"===this.type&&void 0===e.field&&e.setField(""),t===this.append)e.setParent(this),e.fieldEditable="object"===this.type,this.childs.push(e);else{var i=this.childs.indexOf(t);if(-1===i)throw new Error("Node not found");e.setParent(this),e.fieldEditable="object"===this.type,this.childs.splice(i,0,e)}var o;this.expanded&&(o=e.getDom(),t=(i=t.getDom())?i.parentNode:void 0,i&&t&&t.insertBefore(o,i),e.showChilds(),this.showChilds()),!1!==n&&(this.updateDom({updateIndexes:!0}),e.updateDom({recurse:!0}))}}},{key:"insertAfter",value:function(e,t){this._hasChilds()&&(t=this.childs.indexOf(t),(t=this.childs[t+1])?this.insertBefore(e,t):this.appendChild(e))}},{key:"search",value:function(e,t){Array.isArray(t)||(t=[]);var n=e?e.toLowerCase():void 0;return delete this.searchField,delete this.searchValue,void 0!==this.field&&t.length<=this.MAX_SEARCH_RESULTS&&(-1!==String(this.field).toLowerCase().indexOf(n)&&(this.searchField=!0,t.push({node:this,elem:"field"})),this._updateDomField()),this._hasChilds()?this.childs&&this.childs.forEach((function(n){n.search(e,t)})):void 0!==this.value&&t.length<=this.MAX_SEARCH_RESULTS&&(-1!==String(this.value).toLowerCase().indexOf(n)&&(this.searchValue=!0,t.push({node:this,elem:"value"})),this._updateDomValue()),t}},{key:"scrollTo",value:function(e){this.expandPathToNode(),this.dom.tr&&this.dom.tr.parentNode&&this.editor.scrollTo(this.dom.tr.offsetTop,e)}},{key:"expandPathToNode",value:function(){for(var e=this;e&&e.parent;){for(var t="array"===e.parent.type?e.index:e.parent.childs.indexOf(e);e.parent.visibleChilds<t+1;)e.parent.visibleChilds+=this.getMaxVisibleChilds();e.parent.expand(!1),e=e.parent}}},{key:"focus",value:function(t){if(e.focusElement=t,this.dom.tr&&this.dom.tr.parentNode){var n=this.dom;switch(t){case"drag":(n.drag||n.menu).focus();break;case"menu":n.menu.focus();break;case"expand":this._hasChilds()?n.expand.focus():n.field&&this.fieldEditable?(n.field.focus(),(0,p.selectContentEditable)(n.field)):n.value&&!this._hasChilds()?(n.value.focus(),(0,p.selectContentEditable)(n.value)):n.menu.focus();break;case"field":n.field&&this.fieldEditable?(n.field.focus(),(0,p.selectContentEditable)(n.field)):n.value&&!this._hasChilds()?(n.value.focus(),(0,p.selectContentEditable)(n.value)):(this._hasChilds()?n.expand:n.menu).focus();break;case"value":default:n.select?n.select.focus():n.value&&!this._hasChilds()?(n.value.focus(),(0,p.selectContentEditable)(n.value)):n.field&&this.fieldEditable?(n.field.focus(),(0,p.selectContentEditable)(n.field)):(this._hasChilds()?n.expand:n.menu).focus()}}}},{key:"containsNode",value:function(e){if(this===e)return!0;var t=this.childs;if(t)for(var n=0,i=t.length;n<i;n++)if(t[n].containsNode(e))return!0;return!1}},{key:"removeChild",value:function(e,t){if(this.childs){var n=this.childs.indexOf(e);if(-1!==n)return n<this.visibleChilds&&this.expanded&&this.visibleChilds--,e.hide(),delete e.searchField,delete e.searchValue,(n=this.childs.splice(n,1)[0]).parent=null,!1!==t&&this.updateDom({updateIndexes:!0}),n}}},{key:"_remove",value:function(e){this.removeChild(e)}},{key:"changeType",value:function(e){var t,n=this.type;n!==e&&("string"!==e&&"auto"!==e||"string"!==n&&"auto"!==n?(t=this._detachFromDom(),this.clearDom(),"object"===(this.type=e)?(this.childs||(this.childs=[]),this.childs.forEach((function(e){e.clearDom(),delete e.index,e.fieldEditable=!0,void 0===e.field&&(e.field="")})),"string"!==n&&"auto"!==n||(this.expanded=!0)):"array"===e?(this.childs||(this.childs=[]),this.childs.forEach((function(e,t){e.clearDom(),e.fieldEditable=!1,e.index=t})),"string"!==n&&"auto"!==n||(this.expanded=!0)):this.expanded=!1,this._attachToDom(t)):this.type=e,"auto"!==e&&"string"!==e||(this.value="string"===e?String(this.value):(0,p.parseString)(String(this.value)),this.focus()),this.updateDom({updateIndexes:!0}))}},{key:"deepEqual",value:function(e){var t;if("array"===this.type){if(!Array.isArray(e))return!1;if(this.childs.length!==e.length)return!1;for(t=0;t<this.childs.length;t++)if(!this.childs[t].deepEqual(e[t]))return!1}else if("object"===this.type){if("object"!==C(e)||!e)return!1;var n=Object.keys(e);if(this.childs.length!==n.length)return!1;for(t=0;t<n.length;t++){var i=this.childs[t];if(i.field!==n[t]||!i.deepEqual(e[i.field]))return!1}}else if(this.value!==e)return!1;return!0}},{key:"_getDomValue",value:function(){if(this._clearValueError(),this.dom.value&&"array"!==this.type&&"object"!==this.type&&(this.valueInnerText=(0,p.getInnerText)(this.dom.value),""===this.valueInnerText&&""!==this.dom.value.innerHTML&&(this.dom.value.textContent="")),void 0!==this.valueInnerText)try{var e,t;(t="string"===this.type?this._unescapeHTML(this.valueInnerText):(e=this._unescapeHTML(this.valueInnerText),(0,p.parseString)(e)))!==this.value&&(this.value=t,this._debouncedOnChangeValue())}catch(e){this._setValueError((0,l.Iu)("cannotParseValueError"))}}},{key:"_setValueError",value:function(e){this.valueError={message:e},this.updateError()}},{key:"_clearValueError",value:function(){this.valueError&&(this.valueError=null,this.updateError())}},{key:"_setFieldError",value:function(e){this.fieldError={message:e},this.updateError()}},{key:"_clearFieldError",value:function(){this.fieldError&&(this.fieldError=null,this.updateError())}},{key:"_onChangeValue",value:function(){var e=this.editor.getDomSelection();e.range&&(t=(0,p.textDiff)(String(this.value),String(this.previousValue)),e.range.startOffset=t.start,e.range.endOffset=t.end);var t,n=this.editor.getDomSelection();n.range&&(t=(0,p.textDiff)(String(this.previousValue),String(this.value)),n.range.startOffset=t.start,n.range.endOffset=t.end),this.editor._onAction("editValue",{path:this.getInternalPath(),oldValue:this.previousValue,newValue:this.value,oldSelection:e,newSelection:n}),this.previousValue=this.value}},{key:"_onChangeField",value:function(){var e=this.editor.getDomSelection(),t=this.previousField||"";e.range&&(n=(0,p.textDiff)(this.field,t),e.range.startOffset=n.start,e.range.endOffset=n.end);var n=this.editor.getDomSelection();n.range&&(t=(0,p.textDiff)(t,this.field),n.range.startOffset=t.start,n.range.endOffset=t.end),this.editor._onAction("editField",{parentPath:this.parent.getInternalPath(),index:this.getIndex(),oldValue:this.previousField,newValue:this.field,oldSelection:e,newSelection:n}),this.previousField=this.field}},{key:"_updateDomValue",value:function(){var e=this.dom.value;if(e){var t=["jsoneditor-value"],n=this.value,i="auto"===this.type?(0,p.getType)(n):this.type,o="string"===i&&(0,p.isUrl)(n);if(t.push("jsoneditor-"+i),o&&t.push("jsoneditor-url"),""===String(this.value)&&"array"!==this.type&&"object"!==this.type&&t.push("jsoneditor-empty"),this.searchValueActive&&t.push("jsoneditor-highlight-active"),this.searchValue&&t.push("jsoneditor-highlight"),e.className=t.join(" "),"array"===i||"object"===i?(t=this.childs?this.childs.length:0,e.title=this.type+" containing "+t+" items"):o&&this.editable.value?e.title=(0,l.Iu)("openUrl"):e.title="","boolean"===i&&this.editable.value?(this.dom.checkbox||(this.dom.checkbox=document.createElement("input"),this.dom.checkbox.type="checkbox",this.dom.tdCheckbox=document.createElement("td"),this.dom.tdCheckbox.className="jsoneditor-tree",this.dom.tdCheckbox.appendChild(this.dom.checkbox),this.dom.tdValue.parentNode.insertBefore(this.dom.tdCheckbox,this.dom.tdValue)),this.dom.checkbox.checked=this.value):this.dom.tdCheckbox&&(this.dom.tdCheckbox.parentNode.removeChild(this.dom.tdCheckbox),delete this.dom.tdCheckbox,delete this.dom.checkbox),this.enum&&this.editable.value){if(!this.dom.select){this.dom.select=document.createElement("select"),this.id=this.field+"_"+(new Date).getUTCMilliseconds(),this.dom.select.id=this.id,this.dom.select.name=this.dom.select.id;var r=document.createElement("option");r.value="",r.textContent="--",this.dom.select.appendChild(r);for(var s=0;s<this.enum.length;s++){var a=document.createElement("option");a.value=this.enum[s],a.textContent=this.enum[s],this.dom.select.appendChild(a)}this.dom.tdSelect=document.createElement("td"),this.dom.tdSelect.className="jsoneditor-tree",this.dom.tdSelect.appendChild(this.dom.select),this.dom.tdValue.parentNode.insertBefore(this.dom.tdSelect,this.dom.tdValue)}this.dom.select.value=-1!==this.enum.indexOf(this.value)?this.value:"",!this.schema||N(this.schema,"oneOf")||N(this.schema,"anyOf")||N(this.schema,"allOf")?delete this.valueFieldHTML:(this.valueFieldHTML=this.dom.tdValue.innerHTML,this.dom.tdValue.style.visibility="hidden",this.dom.tdValue.textContent="")}else this.dom.tdSelect&&(this.dom.tdSelect.parentNode.removeChild(this.dom.tdSelect),delete this.dom.tdSelect,delete this.dom.select,this.dom.tdValue.innerHTML=this.valueFieldHTML,this.dom.tdValue.style.visibility="",delete this.valueFieldHTML);if(this.editable.value&&this.editor.options.colorPicker&&"string"==typeof n&&(0,p.isValidColor)(n)?(this.dom.color||(this.dom.color=document.createElement("div"),this.dom.color.className="jsoneditor-color",this.dom.tdColor=document.createElement("td"),this.dom.tdColor.className="jsoneditor-tree",this.dom.tdColor.appendChild(this.dom.color),this.dom.tdValue.parentNode.insertBefore(this.dom.tdColor,this.dom.tdValue)),(0,p.addClassName)(this.dom.value,"jsoneditor-color-value"),this.dom.color.style.backgroundColor=n):this._deleteDomColor(),this._showTimestampTag()){if(this.dom.date||(this.dom.date=document.createElement("div"),this.dom.date.className="jsoneditor-date",this.dom.value.parentNode.appendChild(this.dom.date)),r=null,r="function"==typeof this.editor.options.timestampFormat?this.editor.options.timestampFormat({field:this.field,value:this.value,path:this.getPath()}):r){for(;this.dom.date.firstChild;)this.dom.date.removeChild(this.dom.date.firstChild);this.dom.date.appendChild(document.createTextNode(r))}else this.dom.date.textContent=new Date(n).toISOString();this.dom.date.title=new Date(n).toString()}else this.dom.date&&(this.dom.date.parentNode.removeChild(this.dom.date),delete this.dom.date);(0,p.stripFormatting)(e),this._updateDomDefault()}}},{key:"_deleteDomColor",value:function(){this.dom.color&&(this.dom.tdColor.parentNode.removeChild(this.dom.tdColor),delete this.dom.tdColor,delete this.dom.color,(0,p.removeClassName)(this.dom.value,"jsoneditor-color-value"))}},{key:"_updateDomField",value:function(){var e,t=this.dom.field;t&&((e=(0,p.makeFieldTooltip)(this.schema,this.editor.options.language))&&(t.title=e),(""===String(this.field)&&this.parent&&"array"!==this.parent.type?p.addClassName:p.removeClassName)(t,"jsoneditor-empty"),(this.searchFieldActive?p.addClassName:p.removeClassName)(t,"jsoneditor-highlight-active"),(this.searchField?p.addClassName:p.removeClassName)(t,"jsoneditor-highlight"),(0,p.stripFormatting)(t))}},{key:"_getDomField",value:function(e){if(this._clearFieldError(),this.dom.field&&this.fieldEditable&&(this.fieldInnerText=(0,p.getInnerText)(this.dom.field),""===this.fieldInnerText&&""!==this.dom.field.innerHTML&&(this.dom.field.textContent="")),void 0!==this.fieldInnerText)try{var t=this._unescapeHTML(this.fieldInnerText),n=this.parent.getFieldNames(this);-1!==n.indexOf(t)?e?(t=(0,p.findUniqueName)(t,n))!==this.field&&(this.field=t,this._debouncedOnChangeField()):this._setFieldError((0,l.Iu)("duplicateFieldError")):t!==this.field&&(this.field=t,this._debouncedOnChangeField())}catch(e){this._setFieldError((0,l.Iu)("cannotParseFieldError"))}}},{key:"_updateDomDefault",value:function(){var e;!this.schema||void 0===this.schema.default||this._hasChilds()||(e=this.dom.select||this.dom.value)&&(this.value===this.schema.default?(e.title=(0,l.Iu)("default"),(0,p.addClassName)(e,"jsoneditor-is-default"),(0,p.removeClassName)(e,"jsoneditor-is-not-default")):(e.removeAttribute("title"),(0,p.removeClassName)(e,"jsoneditor-is-default"),(0,p.addClassName)(e,"jsoneditor-is-not-default")))}},{key:"_showTimestampTag",value:function(){if("number"!=typeof this.value)return!1;var e=this.editor.options.timestampTag;return"function"!=typeof e?!0===e&&(0,p.isTimestamp)(this.field,this.value):"boolean"==typeof(e=e({field:this.field,value:this.value,path:this.getPath()}))?e:(0,p.isTimestamp)(this.field,this.value)}},{key:"clearDom",value:function(){this.dom={}}},{key:"getDom",value:function(){var e,t=this.dom;if(t.tr)return t.tr;this._updateEditability(),t.tr=document.createElement("tr"),"tree"===(t.tr.node=this).editor.options.mode&&(e=document.createElement("td"),this.editable.field&&this.parent&&((n=document.createElement("button")).type="button",(t.drag=n).className="jsoneditor-button jsoneditor-dragarea",n.title=(0,l.Iu)("drag"),e.appendChild(n)),t.tr.appendChild(e),n=document.createElement("td"),(e=document.createElement("button")).type="button",(t.menu=e).className="jsoneditor-button jsoneditor-contextmenu-button",e.title=(0,l.Iu)("actionsMenu"),n.appendChild(t.menu),t.tr.appendChild(n));var n=document.createElement("td");return t.tr.appendChild(n),t.tree=this._createDomTree(),n.appendChild(t.tree),this.updateDom({updateIndexes:!0}),t.tr}},{key:"isVisible",value:function(){return this.dom&&this.dom.tr&&this.dom.tr.parentNode||!1}},{key:"isDescendantOf",value:function(e){for(var t=this.parent;t;){if(t===e)return!0;t=t.parent}return!1}},{key:"_createDomField",value:function(){return document.createElement("div")}},{key:"setHighlight",value:function(e){this.dom.tr&&((e?p.addClassName:p.removeClassName)(this.dom.tr,"jsoneditor-highlight"),this.append&&this.append.setHighlight(e),this.childs&&this.childs.forEach((function(t){t.setHighlight(e)})))}},{key:"setSelected",value:function(e,t){this.selected=e,this.dom.tr&&((e?p.addClassName:p.removeClassName)(this.dom.tr,"jsoneditor-selected"),(t?p.addClassName:p.removeClassName)(this.dom.tr,"jsoneditor-first"),this.append&&this.append.setSelected(e),this.showMore&&this.showMore.setSelected(e),this.childs&&this.childs.forEach((function(t){t.setSelected(e)})))}},{key:"updateValue",value:function(e){this.value=e,this.previousValue=e,this.valueError=void 0,this.updateDom()}},{key:"updateField",value:function(e){this.field=e,this.previousField=e,this.fieldError=void 0,this.updateDom()}},{key:"updateDom",value:function(t){var n=this.dom.tree;n&&(n.style.marginLeft=24*this.getLevel()+"px"),(n=this.dom.field)&&(this.fieldEditable?(n.contentEditable=this.editable.field,n.spellcheck=!1,n.className="jsoneditor-field"):(n.contentEditable=!1,n.className="jsoneditor-readonly"),i=void 0!==this.index?this.index:void 0!==this.field?this.field:(i=this.editor.options.schema?e._findSchema(this.editor.options.schema,this.editor.options.schemaRefs||{},this.getPath()):void 0)&&i.title?i.title:this._hasChilds()?this.type:"",i=this._escapeHTML(i),document.activeElement!==n&&i!==this._unescapeHTML((0,p.getInnerText)(n))&&(n.innerHTML=i),this._updateSchema());var i=this.dom.value;i&&("array"===this.type||"object"===this.type?this.updateNodeName():(o=this._escapeHTML(this.value),document.activeElement!==i&&o!==this._unescapeHTML((0,p.getInnerText)(i))&&(i.innerHTML=o)));var o=this.dom.tr;o&&("array"===this.type||"object"===this.type?((0,p.addClassName)(o,"jsoneditor-expandable"),this.expanded?((0,p.addClassName)(o,"jsoneditor-expanded"),(0,p.removeClassName)(o,"jsoneditor-collapsed")):((0,p.addClassName)(o,"jsoneditor-collapsed"),(0,p.removeClassName)(o,"jsoneditor-expanded"))):((0,p.removeClassName)(o,"jsoneditor-expandable"),(0,p.removeClassName)(o,"jsoneditor-expanded"),(0,p.removeClassName)(o,"jsoneditor-collapsed"))),this._updateDomField(),this._updateDomValue(),t&&!0===t.updateIndexes&&this._updateDomIndexes(),t&&!0===t.recurse&&this.childs&&this.childs.forEach((function(e){e.updateDom(t)})),this.error&&this.updateError(),this.append&&this.append.updateDom(),this.showMore&&this.showMore.updateDom(),this._updateCssClassName()}},{key:"_updateSchema",value:function(){this.editor&&this.editor.options&&(this.schema=this.editor.options.schema?e._findSchema(this.editor.options.schema,this.editor.options.schemaRefs||{},this.getPath()):null,this.schema?this.enum=e._findEnum(this.schema):delete this.enum)}},{key:"_updateDomIndexes",value:function(){var e=this.dom.value,t=this.childs;e&&t&&("array"===this.type?t.forEach((function(e,t){e.index=t,(e=e.dom.field)&&(e.textContent=t)})):"object"===this.type&&t.forEach((function(e){void 0!==e.index&&(delete e.index,void 0===e.field&&(e.field=""))})))}},{key:"_createDomValue",value:function(){var e;return"array"===this.type?(e=document.createElement("div")).textContent="[...]":"object"===this.type?(e=document.createElement("div")).textContent="{...}":(!this.editable.value&&(0,p.isUrl)(this.value)?(e=document.createElement("a")).href=this.value:((e=document.createElement("div")).contentEditable=this.editable.value,e.spellcheck=!1),e.innerHTML=this._escapeHTML(this.value)),e}},{key:"_createDomExpandButton",value:function(){var e=document.createElement("button");return e.type="button",this._hasChilds()?(e.className=this.expanded?"jsoneditor-button jsoneditor-expanded":"jsoneditor-button jsoneditor-collapsed",e.title=(0,l.Iu)("expandTitle")):(e.className="jsoneditor-button jsoneditor-invisible",e.title=""),e}},{key:"_createDomTree",value:function(){var e=this.dom,t=document.createElement("table"),n=document.createElement("tbody");t.style.borderCollapse="collapse",t.className="jsoneditor-values",t.appendChild(n);var i=document.createElement("tr");return n.appendChild(i),(n=document.createElement("td")).className="jsoneditor-tree",i.appendChild(n),e.expand=this._createDomExpandButton(),n.appendChild(e.expand),e.tdExpand=n,(n=document.createElement("td")).className="jsoneditor-tree",i.appendChild(n),e.field=this._createDomField(),n.appendChild(e.field),e.tdField=n,(n=document.createElement("td")).className="jsoneditor-tree",i.appendChild(n),"object"!==this.type&&"array"!==this.type&&(n.appendChild(document.createTextNode(":")),n.className="jsoneditor-separator"),e.tdSeparator=n,(n=document.createElement("td")).className="jsoneditor-tree",i.appendChild(n),e.value=this._createDomValue(),n.appendChild(e.value),e.tdValue=n,t}},{key:"onEvent",value:function(e){var t,n=e.type,i=e.target||e.srcElement,o=this.dom,r=this,s=this._hasChilds();i!==o.drag&&i!==o.menu||("mouseover"===n?this.editor.highlighter.highlight(this):"mouseout"===n&&this.editor.highlighter.unhighlight()),"click"===n&&i===o.menu&&((t=r.editor.highlighter).highlight(r),t.lock(),(0,p.addClassName)(o.menu,"jsoneditor-selected"),this.showContextMenu(o.menu,(function(){(0,p.removeClassName)(o.menu,"jsoneditor-selected"),t.unlock(),t.unhighlight()}))),"click"===n&&i===o.expand&&s&&(h=e.ctrlKey,this._onExpand(h)),"click"!==n||e.target!==r.dom.tdColor&&e.target!==r.dom.color||this._showColorPicker(),"change"===n&&i===o.checkbox&&(this.dom.value.textContent=String(!this.value),this._getDomValue(),this._updateDomDefault()),"change"===n&&i===o.select&&(this.dom.value.innerHTML=this._escapeHTML(o.select.value),this._getDomValue(),this._updateDomValue());var a=o.value;if(i===a)switch(n){case"blur":case"change":this._getDomValue(),this._clearValueError(),this._updateDomValue();var l=this._escapeHTML(this.value);l!==this._unescapeHTML((0,p.getInnerText)(a))&&(a.innerHTML=l);break;case"input":this._getDomValue(),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getDomSelection();break;case"click":e.ctrlKey&&this.editable.value&&(0,p.isUrl)(this.value)&&(e.preventDefault(),window.open(this.value,"_blank","noopener"));break;case"keyup":this._getDomValue(),this._updateDomValue();break;case"cut":case"paste":setTimeout((function(){r._getDomValue(),r._updateDomValue()}),1)}var d=o.field;if(i===d)switch(n){case"blur":this._getDomField(!0),this._updateDomField();var c=this._escapeHTML(this.field);c!==this._unescapeHTML((0,p.getInnerText)(d))&&(d.innerHTML=c);break;case"input":this._getDomField(),this._updateSchema(),this._updateDomField(),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getDomSelection();break;case"keyup":this._getDomField(),this._updateDomField();break;case"cut":case"paste":setTimeout((function(){r._getDomField(),r._updateDomField()}),1)}var h=o.tree;h&&i===h.parentNode&&"click"===n&&!e.hasMoved&&((void 0!==e.offsetX?e.offsetX<24*(this.getLevel()+1):e.pageX<(0,p.getAbsoluteLeft)(o.tdSeparator))||s?d&&((0,p.setEndOfContentEditable)(d),d.focus()):a&&!this.enum&&((0,p.setEndOfContentEditable)(a),a.focus())),(i!==o.tdExpand||s)&&i!==o.tdField&&i!==o.tdSeparator||"click"!==n||e.hasMoved||d&&((0,p.setEndOfContentEditable)(d),d.focus()),"keydown"===n&&this.onKeyDown(e),"function"==typeof this.editor.options.onEvent&&this._onEvent(e)}},{key:"_onEvent",value:function(e){var t=(n=e.target)===this.dom.field,n=n===this.dom.value||n===this.dom.checkbox||n===this.dom.select;(t||n)&&(t={field:this.getField(),path:this.getPath()},n&&!this._hasChilds()&&(t.value=this.getValue()),this.editor.options.onEvent(t,e))}},{key:"onKeyDown",value:function(t){var n,i,o,r,s,a,l,d,c,h,u,f,m,g,v,y,b,x=t.which||t.keyCode,C=t.target||t.srcElement,w=t.ctrlKey,T=t.shiftKey,S=t.altKey,E=!1,N="tree"===this.editor.options.mode,I=0<this.editor.multiselection.nodes.length?this.editor.multiselection.nodes:[this],D=I[0],A=I[I.length-1];13===x?C===this.dom.value?this.editable.value&&!t.ctrlKey||(0,p.isUrl)(this.value)&&(window.open(this.value,"_blank","noopener"),E=!0):C===this.dom.expand&&this._hasChilds()&&(u=t.ctrlKey,this._onExpand(u),C.focus(),E=!0):68===x?w&&N&&(e.onDuplicate(I),E=!0):69===x?w&&(this._onExpand(T),C.focus(),E=!0):77===x&&N?w&&(this.showContextMenu(C),E=!0):46===x&&N?w&&(e.onRemove(I),E=!0):45===x&&N?w&&!T?(this._onInsertBefore(),E=!0):w&&T&&(this._onInsertAfter(),E=!0):35===x?S&&((u=this._lastNode())&&u.focus(e.focusElement||this._getElementName(C)),E=!0):36===x?S&&((f=this._firstNode())&&f.focus(e.focusElement||this._getElementName(C)),E=!0):37===x?S&&!T?((f=this._previousElement(C))&&this.focus(this._getElementName(f)),E=!0):S&&T&&N&&(g=A.expanded?(g=A.getAppendDom())?g.nextSibling:void 0:A.getDom().nextSibling)&&(m=e.getNodeFromTarget(g),g=g.nextSibling,v=e.getNodeFromTarget(g),m&&m instanceof _&&1!==A.parent.childs.length&&v&&v.parent&&(i=this.editor.getDomSelection(),o=(r=D.parent).childs[A.getIndex()+1]||r.append,s=D.getIndex(),a=v.getIndex(),l=r.getInternalPath(),d=v.parent.getInternalPath(),I.forEach((function(e){v.parent.moveBefore(e,v)})),this.focus(e.focusElement||this._getElementName(C)),this.editor._onAction("moveNodes",{count:I.length,fieldNames:I.map(k),oldParentPath:r.getInternalPath(),newParentPath:D.parent.getInternalPath(),oldIndex:o.getIndex(),newIndex:D.getIndex(),oldIndexRedo:s,newIndexRedo:a,oldParentPathRedo:l,newParentPathRedo:d,oldSelection:i,newSelection:this.editor.getDomSelection()}))):38===x?S&&!T?((n=this._previousNode())&&(this.editor.deselect(!0),n.focus(e.focusElement||this._getElementName(C))),E=!0):!S&&w&&T&&N?((n=this._previousNode())&&((h=this.editor.multiselection).start=h.start||this,h.end=n,c=this.editor._findTopLevelNodes(h.start,h.end),this.editor.select(c),n.focus("field")),E=!0):S&&T&&N&&((n=D._previousNode())&&n.parent&&(i=this.editor.getDomSelection(),o=(r=D.parent).childs[A.getIndex()+1]||r.append,s=D.getIndex(),a=n.getIndex(),l=r.getInternalPath(),d=n.parent.getInternalPath(),I.forEach((function(e){n.parent.moveBefore(e,n)})),this.focus(e.focusElement||this._getElementName(C)),this.editor._onAction("moveNodes",{count:I.length,fieldNames:I.map(k),oldParentPath:r.getInternalPath(),newParentPath:D.parent.getInternalPath(),oldIndex:o.getIndex(),newIndex:D.getIndex(),oldIndexRedo:s,newIndexRedo:a,oldParentPathRedo:l,newParentPathRedo:d,oldSelection:i,newSelection:this.editor.getDomSelection()})),E=!0):39===x?S&&!T?((y=this._nextElement(C))&&this.focus(this._getElementName(y)),E=!0):S&&T&&N&&(y=D.getDom().previousSibling)&&(n=e.getNodeFromTarget(y))&&n.parent&&!n.isVisible()&&(i=this.editor.getDomSelection(),o=(r=D.parent).childs[A.getIndex()+1]||r.append,s=D.getIndex(),a=n.getIndex(),l=r.getInternalPath(),d=n.parent.getInternalPath(),I.forEach((function(e){n.parent.moveBefore(e,n)})),this.focus(e.focusElement||this._getElementName(C)),this.editor._onAction("moveNodes",{count:I.length,fieldNames:I.map(k),oldParentPath:r.getInternalPath(),newParentPath:D.parent.getInternalPath(),oldIndex:o.getIndex(),newIndex:D.getIndex(),oldIndexRedo:s,newIndexRedo:a,oldParentPathRedo:l,newParentPathRedo:d,oldSelection:i,newSelection:this.editor.getDomSelection()})):40===x&&(S&&!T?((m=this._nextNode())&&(this.editor.deselect(!0),m.focus(e.focusElement||this._getElementName(C))),E=!0):!S&&w&&T&&N?((m=this._nextNode())&&((h=this.editor.multiselection).start=h.start||this,h.end=m,c=this.editor._findTopLevelNodes(h.start,h.end),this.editor.select(c),m.focus("field")),E=!0):S&&T&&N&&((b=(m=(m=(m=A.expanded?A.append?A.append._nextNode():void 0:A._nextNode())&&!m.isVisible()?m.parent.showMore:m)&&m instanceof _?A:m)&&(m._nextNode()||m.parent.append))&&b.parent&&(i=this.editor.getDomSelection(),o=(r=D.parent).childs[A.getIndex()+1]||r.append,s=D.getIndex(),a=b.getIndex(),l=r.getInternalPath(),d=b.parent.getInternalPath(),I.forEach((function(e){b.parent.moveBefore(e,b)})),this.focus(e.focusElement||this._getElementName(C)),this.editor._onAction("moveNodes",{count:I.length,fieldNames:I.map(k),oldParentPath:r.getInternalPath(),newParentPath:D.parent.getInternalPath(),oldParentPathRedo:l,newParentPathRedo:d,oldIndexRedo:s,newIndexRedo:a,oldIndex:o.getIndex(),newIndex:D.getIndex(),oldSelection:i,newSelection:this.editor.getDomSelection()})),E=!0)),E&&(t.preventDefault(),t.stopPropagation())}},{key:"_onExpand",value:function(e){var t,n,i;e&&(i=(n=(t=this.dom.tr.parentNode).parentNode).scrollTop,n.removeChild(t)),this.expanded?this.collapse(e):this.expand(e),e&&(n.appendChild(t),n.scrollTop=i)}},{key:"_showColorPicker",value:function(){var e,t;"function"==typeof this.editor.options.onColorPicker&&this.dom.color&&((e=this)._deleteDomColor(),e.updateDom(),t=(0,u.w)(this.dom.color,this.editor.getPopupAnchor()),this.editor.options.onColorPicker(t,this.value,(function(t){"string"==typeof t&&t!==e.value&&(e._deleteDomColor(),e.value=t,e.updateDom(),e._debouncedOnChangeValue())})))}},{key:"getFieldNames",value:function(e){return"object"===this.type?this.childs.filter((function(t){return t!==e})).map((function(e){return e.field})):[]}},{key:"_onInsertBefore",value:function(t,n,i){var o=this.editor.getDomSelection();(t=new e(this.editor,{field:void 0!==t?t:"",value:void 0!==n?n:"",type:i})).expand(!0),n=this.getInternalPath(),this.parent.insertBefore(t,this),this.editor.highlighter.unhighlight(),t.focus("field"),i=this.editor.getDomSelection(),this.editor._onAction("insertBeforeNodes",{nodes:[t],paths:[t.getInternalPath()],beforePath:n,parentPath:this.parent.getInternalPath(),oldSelection:o,newSelection:i})}},{key:"_onInsertAfter",value:function(t,n,i){var o=this.editor.getDomSelection();(n=new e(this.editor,{field:void 0!==t?t:"",value:void 0!==n?n:"",type:i})).expand(!0),this.parent.insertAfter(n,this),this.editor.highlighter.unhighlight(),n.focus("field"),i=this.editor.getDomSelection(),this.editor._onAction("insertAfterNodes",{nodes:[n],paths:[n.getInternalPath()],afterPath:this.getInternalPath(),parentPath:this.parent.getInternalPath(),oldSelection:o,newSelection:i})}},{key:"_onAppend",value:function(t,n,i){var o=this.editor.getDomSelection();(n=new e(this.editor,{field:void 0!==t?t:"",value:void 0!==n?n:"",type:i})).expand(!0),this.parent.appendChild(n),this.editor.highlighter.unhighlight(),n.focus("field"),i=this.editor.getDomSelection(),this.editor._onAction("appendNodes",{nodes:[n],paths:[n.getInternalPath()],parentPath:this.parent.getInternalPath(),oldSelection:o,newSelection:i})}},{key:"_onChangeType",value:function(e){var t,n,i=this.type;e!==i&&(t=this.editor.getDomSelection(),this.changeType(e),n=this.editor.getDomSelection(),this.editor._onAction("changeType",{path:this.getInternalPath(),oldType:i,newType:e,oldSelection:t,newSelection:n}))}},{key:"sort",value:function(e,t){var n,i,o=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];"string"==typeof e&&(e=(0,p.parsePath)(e)),this._hasChilds()&&(this.hideChilds(),n=this.childs,this.childs=this.childs.concat(),i="desc"===t?-1:1,"object"===this.type?this.childs.sort((function(e,t){return i*h()(e.field,t.field)})):this.childs.sort((function(t,n){return t=t.getNestedChild(e),n=n.getNestedChild(e),t?n?(t=t.value,n=n.value,"string"!=typeof t&&"string"!=typeof n?n<t?i:t<n?-i:0:i*h()(t,n)):-i:i})),this._updateDomIndexes(),this.showChilds(),!0===o&&this.editor._onAction("sort",{path:this.getInternalPath(),oldChilds:n,newChilds:this.childs}))}},{key:"update",value:function(e){var t=this.getInternalValue();this.setValue(e),this.editor._onAction("transform",{path:this.getInternalPath(),oldValue:t,newValue:this.getInternalValue()})}},{key:"_detachFromDom",value:function(){var e=this.dom.tr?this.dom.tr.parentNode:void 0,t=(t=this.expanded?this.getAppendDom():this.getDom())&&t.parentNode?t.nextSibling:void 0;return this.hide({resetVisibleChilds:!1}),{table:e,nextTr:t}}},{key:"_attachToDom",value:function(e){e.table&&(e.nextTr?e.table.insertBefore(this.getDom(),e.nextTr):e.table.appendChild(this.getDom())),this.expanded&&this.showChilds()}},{key:"transform",value:function(e){if(this._hasChilds()){this.hideChilds();try{var t=this.getInternalValue(),n=this.getValue(),i=this.editor.options.executeQuery(n,e);this.setValue(i);var o=this.getInternalValue();this.editor._onAction("transform",{path:this.getInternalPath(),oldValue:t,newValue:o}),this.showChilds()}catch(e){this.showChilds(),this.editor._onError(e)}}}},{key:"extract",value:function(){this.editor.node.hideChilds(),this.hideChilds();try{var e=this.editor.node.getInternalValue();this.editor._setRoot(this);var t=this.editor.node.getInternalValue();this.editor._onAction("transform",{path:this.editor.node.getInternalPath(),oldValue:e,newValue:t})}catch(e){this.editor._onError(e)}finally{this.updateDom({recurse:!0}),this.showChilds()}}},{key:"getNestedChild",value:function(e){for(var t=0,n=this;n&&t<e.length;)n=n.findChildByProperty(e[t]),t++;return n}},{key:"findChildByProperty",value:function(e){if("object"===this.type)return this.childs.find((function(t){return t.field===e}))}},{key:"getAppendDom",value:function(){return this.append||(this.append=new _(this.editor),this.append.setParent(this)),this.append.getDom()}},{key:"getShowMoreDom",value:function(){return this.showMore||(this.showMore=new D(this.editor,this)),this.showMore.getDom()}},{key:"nextSibling",value:function(){var e=this.parent.childs.indexOf(this);return this.parent.childs[e+1]||this.parent.append}},{key:"_previousNode",value:function(){var t=null,n=this.getDom();if(n&&n.parentNode)for(var i=n;i=i.previousSibling,t=e.getNodeFromTarget(i),i&&t&&t instanceof _&&!t.isVisible(););return t}},{key:"_nextNode",value:function(){var t=null,n=this.getDom();if(n&&n.parentNode)for(var i=n;i=i.nextSibling,t=e.getNodeFromTarget(i),i&&t&&t instanceof _&&!t.isVisible(););return t}},{key:"_firstNode",value:function(){var t=null,n=this.getDom();return n&&n.parentNode&&(n=n.parentNode.firstChild,t=e.getNodeFromTarget(n)),t}},{key:"_lastNode",value:function(){var t=null,n=this.getDom();if(n&&n.parentNode){var i=n.parentNode.lastChild;for(t=e.getNodeFromTarget(i);i&&t&&!t.isVisible();)i=i.previousSibling,t=e.getNodeFromTarget(i)}return t}},{key:"_previousElement",value:function(e){var t=this.dom;switch(e){case t.value:if(this.fieldEditable)return t.field;case t.field:if(this._hasChilds())return t.expand;case t.expand:return t.menu;case t.menu:if(t.drag)return t.drag;default:return null}}},{key:"_nextElement",value:function(e){var t=this.dom;switch(e){case t.drag:return t.menu;case t.menu:if(this._hasChilds())return t.expand;case t.expand:if(this.fieldEditable)return t.field;case t.field:if(!this._hasChilds())return t.value;default:return null}}},{key:"_getElementName",value:function(e){var t=this;return Object.keys(this.dom).find((function(n){return t.dom[n]===e}))}},{key:"_hasChilds",value:function(){return"array"===this.type||"object"===this.type}},{key:"addTemplates",value:function(e,t){var n=this,i=n.editor.options.templates;null!=i&&(i.length&&e.push({type:"separator"}),i.forEach((function(i){e.push({text:i.text,className:i.className||"jsoneditor-type-object",title:i.title,click:(t?function(e,t){n._onAppend(e,t)}:function(e,t){n._onInsertBefore(e,t)}).bind(this,i.field,i.value)})})))}},{key:"showContextMenu",value:function(t,n){var i,r,s=this,a=[];this.editable.value&&a.push({text:(0,l.Iu)("type"),title:(0,l.Iu)("typeTitle"),className:"jsoneditor-type-"+this.type,submenu:[{text:(0,l.Iu)("auto"),className:"jsoneditor-type-auto"+("auto"===this.type?" jsoneditor-selected":""),title:(0,l.Iu)("autoType"),click:function(){s._onChangeType("auto")}},{text:(0,l.Iu)("array"),className:"jsoneditor-type-array"+("array"===this.type?" jsoneditor-selected":""),title:(0,l.Iu)("arrayType"),click:function(){s._onChangeType("array")}},{text:(0,l.Iu)("object"),className:"jsoneditor-type-object"+("object"===this.type?" jsoneditor-selected":""),title:(0,l.Iu)("objectType"),click:function(){s._onChangeType("object")}},{text:(0,l.Iu)("string"),className:"jsoneditor-type-string"+("string"===this.type?" jsoneditor-selected":""),title:(0,l.Iu)("stringType"),click:function(){s._onChangeType("string")}}]}),this._hasChilds()&&(this.editor.options.enableSort&&a.push({text:(0,l.Iu)("sort"),title:(0,l.Iu)("sortTitle",{type:this.type}),className:"jsoneditor-sort-asc",click:function(){s.showSortModal()}}),this.editor.options.enableTransform&&a.push({text:(0,l.Iu)("transform"),title:(0,l.Iu)("transformTitle",{type:this.type}),className:"jsoneditor-transform",click:function(){s.showTransformModal()}}),this.parent&&a.push({text:(0,l.Iu)("extract"),title:(0,l.Iu)("extractTitle",{type:this.type}),className:"jsoneditor-extract",click:function(){s.extract()}})),this.parent&&this.parent._hasChilds()&&(a.length&&a.push({type:"separator"}),i=s.parent.childs,s===i[i.length-1]&&(r=[{text:(0,l.Iu)("auto"),className:"jsoneditor-type-auto",title:(0,l.Iu)("autoType"),click:function(){s._onAppend("","","auto")}},{text:(0,l.Iu)("array"),className:"jsoneditor-type-array",title:(0,l.Iu)("arrayType"),click:function(){s._onAppend("",[])}},{text:(0,l.Iu)("object"),className:"jsoneditor-type-object",title:(0,l.Iu)("objectType"),click:function(){s._onAppend("",{})}},{text:(0,l.Iu)("string"),className:"jsoneditor-type-string",title:(0,l.Iu)("stringType"),click:function(){s._onAppend("","","string")}}],s.addTemplates(r,!0),a.push({text:(0,l.Iu)("appendText"),title:(0,l.Iu)("appendTitle"),submenuTitle:(0,l.Iu)("appendSubmenuTitle"),className:"jsoneditor-append",click:function(){s._onAppend("","","auto")},submenu:r})),r=[{text:(0,l.Iu)("auto"),className:"jsoneditor-type-auto",title:(0,l.Iu)("autoType"),click:function(){s._onInsertBefore("","","auto")}},{text:(0,l.Iu)("array"),className:"jsoneditor-type-array",title:(0,l.Iu)("arrayType"),click:function(){s._onInsertBefore("",[])}},{text:(0,l.Iu)("object"),className:"jsoneditor-type-object",title:(0,l.Iu)("objectType"),click:function(){s._onInsertBefore("",{})}},{text:(0,l.Iu)("string"),className:"jsoneditor-type-string",title:(0,l.Iu)("stringType"),click:function(){s._onInsertBefore("","","string")}}],s.addTemplates(r,!1),a.push({text:(0,l.Iu)("insert"),title:(0,l.Iu)("insertTitle"),submenuTitle:(0,l.Iu)("insertSub"),className:"jsoneditor-insert",click:function(){s._onInsertBefore("","","auto")},submenu:r}),this.editable.field&&(a.push({text:(0,l.Iu)("duplicateText"),title:(0,l.Iu)("duplicateField"),className:"jsoneditor-duplicate",click:function(){e.onDuplicate(s)}}),a.push({text:(0,l.Iu)("removeText"),title:(0,l.Iu)("removeField"),className:"jsoneditor-remove",click:function(){e.onRemove(s)}}))),this.editor.options.onCreateMenu&&(r=s.getPath(),a=this.editor.options.onCreateMenu(a,{type:"single",path:r,paths:[r]})),new o.x(a,{close:n}).show(t,this.editor.getPopupAnchor())}},{key:"showSortModal",value:function(){var e=this,t=this.editor.options.modalAnchor||g.qD,n=this.getValue();(0,f.showSortModal)(t,n,(function(t){var n=t.path;n=(0,p.parsePath)(n),e.sortedBy=t,e.sort(n,t.direction)}),e.sortedBy)}},{key:"showTransformModal",value:function(){var e=this,t=(r=this.editor.options).modalAnchor,n=r.createQuery,i=r.executeQuery,o=r.queryDescription,r=this.getValue();(0,m.showTransformModal)({container:t||g.qD,json:r,queryDescription:o,createQuery:n,executeQuery:i,onTransform:function(t){e.transform(t)}})}},{key:"_getType",value:function(e){return e instanceof Array?"array":e instanceof Object?"object":"string"==typeof e&&"string"!=typeof(0,p.parseString)(e)?"string":"auto"}},{key:"_escapeHTML",value:function(e){return"string"!=typeof e?String(e):(e=String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ {2}/g," &nbsp;").replace(/^ /,"&nbsp;").replace(/ $/,"&nbsp;"),e=(e=JSON.stringify(e)).substring(1,e.length-1),!0===this.editor.options.escapeUnicode?(0,p.escapeUnicodeChars)(e):e)}},{key:"_unescapeHTML",value:function(e){return e='"'+this._escapeJSON(e)+'"',(0,p.parse)(e).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;|\u00A0/g," ").replace(/&amp;/g,"&")}},{key:"_escapeJSON",value:function(e){for(var t="",n=0;n<e.length;){var i=e.charAt(n);"\n"===i?t+="\\n":"\\"===i?(t+=i,n++,""!==(i=e.charAt(n))&&-1!=='"\\/bfnrtu'.indexOf(i)||(t+="\\"),t+=i):t+='"'===i?'\\"':i,n++}return t}},{key:"updateNodeName",value:function(){var e,t=this.childs?this.childs.length:0;if("object"===this.type||"array"===this.type){if(this.editor.options.onNodeName)try{e=this.editor.options.onNodeName({path:this.getPath(),size:t,type:this.type})}catch(e){console.error("Error in onNodeName callback: ",e)}this.dom.value.textContent="object"===this.type?"{"+(e||t)+"}":"["+(e||t)+"]"}}},{key:"recursivelyUpdateNodeName",value:function(){if(this.expanded&&(this.updateNodeName(),"undefined"!==this.childs))for(var e in this.childs)this.childs[e].recursivelyUpdateNodeName()}}])&&w(t.prototype,n),e}();T.prototype.DEBOUNCE_INTERVAL=150,T.prototype.MAX_SEARCH_RESULTS=999;var S=100;function E(e){return e.getInternalPath()}function k(e){return e.getField()}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}T.focusElement=void 0,T.select=function(e){setTimeout((function(){(0,p.selectContentEditable)(e)}),0)},T.onDragStart=function(e,t){if(!Array.isArray(e))return T.onDragStart([e],t);var n,i,o,r,s;0!==e.length&&(n=e[0],i=e[e.length-1],o=n.parent,s=T.getNodeFromTarget(t.target),r=n.editor,s=(0,p.getAbsoluteTop)(s.dom.tr)-(0,p.getAbsoluteTop)(n.dom.tr),r.mousemove||(r.mousemove=(0,p.addEventListener)(t.view,"mousemove",(function(t){T.onDrag(e,t)}))),r.mouseup||(r.mouseup=(0,p.addEventListener)(t.view,"mouseup",(function(t){T.onDragEnd(e,t)}))),r.highlighter.lock(),r.drag={oldCursor:document.body.style.cursor,oldSelection:r.getDomSelection(),oldPaths:e.map(E),oldParent:o,oldNextNode:o.childs[i.getIndex()+1]||o.append,oldParentPathRedo:o.getInternalPath(),oldIndexRedo:n.getIndex(),mouseX:t.pageX,offsetY:s,level:n.getLevel()},document.body.style.cursor="move",t.preventDefault())},T.onDrag=function(e,t){if(!Array.isArray(e))return T.onDrag([e],t);if(0!==e.length){var n,i,o,r,s,a=e[0].editor,l=t.pageY-a.drag.offsetY,d=t.pageX,c=!1,h=e[0],u=h.dom.tr,f=(0,p.getAbsoluteTop)(u),m=u.offsetHeight;if(l<f){for(x=u;x=x.previousSibling,C=T.getNodeFromTarget(x),o=x?(0,p.getAbsoluteTop)(x):0,x&&l<o;);(C=C&&!C.parent?void 0:C)||(x=(g=u.parentNode.firstChild)?g.nextSibling:void 0,(C=T.getNodeFromTarget(x))===h&&(C=void 0)),!(C=C&&C.isVisible()&&(o=(x=C.dom.tr)?(0,p.getAbsoluteTop)(x):0)+m<l?void 0:C)||!1!==a.options.limitDragging&&C.parent!==e[0].parent||(e.forEach((function(e){C.parent.moveBefore(e,C)})),c=!0)}else{var g,v=e[e.length-1];if(m=(g=v.expanded&&v.append?v.append.getDom():v.dom.tr)?g.nextSibling:void 0){for(r=(0,p.getAbsoluteTop)(m),n=m;i=T.getNodeFromTarget(n),n&&(s=n.nextSibling?(0,p.getAbsoluteTop)(n.nextSibling):0,s=n?s-r:0,i&&i.parent.childs.length===e.length&&i.parent.childs[e.length-1]===v&&(f+=27),n=n.nextSibling),n&&f+s<l;);if(i&&i.parent){m=d-a.drag.mouseX,m=Math.round(m/24/2);for(var y=a.drag.level+m,b=i.getLevel(),x=i.dom.tr&&i.dom.tr.previousSibling;b<y&&x;){var C=T.getNodeFromTarget(x),w=e.some((function(e){return e===C||C.isDescendantOf(e)}));if(!w){if(!(C instanceof _))break;if((w=C.parent.childs).length===e.length&&w[e.length-1]===v)break;b=(i=T.getNodeFromTarget(x)).getLevel()}x=x.previousSibling}(i=i instanceof _&&!i.isVisible()&&i.parent.showMore.isVisible()?i._nextNode():i)&&(!1===a.options.limitDragging||i.parent===e[0].parent)&&i.dom.tr&&i.dom.tr!==g.nextSibling&&(e.forEach((function(e){i.parent.moveBefore(e,i)})),c=!0)}}}c&&(a.drag.mouseX=d,a.drag.level=h.getLevel()),a.startAutoScroll(l),t.preventDefault()}},T.onDragEnd=function(e,t){if(!Array.isArray(e))return T.onDrag([e],t);var n,i,o,r,s,a,l,d,c;0!==e.length&&(c=e[0],n=c.editor,c&&c.dom.menu&&c.dom.menu.focus(),i=n.drag.oldParent.getInternalPath(),o=c.parent.getInternalPath(),r=n.drag.oldParent===c.parent,s=n.drag.oldNextNode.getIndex(),a=c.getIndex(),l=n.drag.oldParentPathRedo,d=n.drag.oldIndexRedo,c=r&&d<a?a+e.length:a,r&&d===a||n._onAction("moveNodes",{count:e.length,fieldNames:e.map(k),oldParentPath:i,newParentPath:o,oldIndex:s,newIndex:a,oldIndexRedo:d,newIndexRedo:c,oldParentPathRedo:l,newParentPathRedo:null,oldSelection:n.drag.oldSelection,newSelection:n.getDomSelection()}),document.body.style.cursor=n.drag.oldCursor,n.highlighter.unlock(),e.forEach((function(e){e.updateDom(),t.target!==e.dom.drag&&t.target!==e.dom.menu&&n.highlighter.unhighlight()})),delete n.drag,n.mousemove&&((0,p.removeEventListener)(t.view,"mousemove",n.mousemove),delete n.mousemove),n.mouseup&&((0,p.removeEventListener)(t.view,"mouseup",n.mouseup),delete n.mouseup),n.stopAutoScroll(),t.preventDefault())},T._findEnum=function(e){return e.enum?e.enum:(e=e.oneOf||e.anyOf||e.allOf)&&0<(e=e.filter((function(e){return e.enum}))).length?e[0].enum:null},T._findSchema=function(e,t,n){for(var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e,o=n.slice(1,n.length),r=n[0],s=[i],a=0,l=[i.oneOf,i.anyOf,i.allOf];a<l.length;a++){var d=l[a];Array.isArray(d)&&(s=s.concat(d))}var c,h=y(s);try{for(h.s();!(c=h.n()).done;){if("$ref"in(i=c.value)&&"string"==typeof i.$ref){var u,p=i.$ref;if(p in t)i=t[p];else{if(!p.startsWith("#/")){if(1!==(null===(u=p.match(/#\//g))||void 0===u?void 0:u.length))throw Error("Unable to resolve reference ".concat(p));var f=v(p.split("#/"),2),m=f[0],g=f[1];if(m in t){var b=t[m],x={$ref:"#/".concat(g)};return T._findSchema(b,t,o,x)}throw Error("Unable to resolve reference ".concat(p))}var w,S=p.substring(2).split("/"),E=(i=e,y(S));try{for(E.s();!(w=E.n()).done;){var k=w.value;if(!(k in i))throw Error("Unable to resovle reference ".concat(p));i=i[k]}}catch(e){E.e(e)}finally{E.f()}}}if(void 0===r)return i;if("string"!=typeof r){if("number"==typeof r&&"object"===C(i.items)&&null!==i.items)return i=i.items,T._findSchema(e,t,o,i)}else{if("object"===C(i.properties)&&null!==i.properties&&r in i.properties)return i=i.properties[r],T._findSchema(e,t,o,i);if("object"===C(i.patternProperties)&&null!==i.patternProperties)for(var N in i.patternProperties)if(r.match(N))return i=i.patternProperties[N],T._findSchema(e,t,o,i);if("object"===C(i.additionalProperties))return i=i.additionalProperties,T._findSchema(e,t,o,i)}}}catch(e){h.e(e)}finally{h.f()}return null},T.onRemove=function(e){if(!Array.isArray(e))return T.onRemove([e]);var t,n,i,o,r,s;e&&0<e.length&&(t=(s=e[0]).parent,n=s.editor,i=s.getIndex(),n.highlighter.unhighlight(),o=n.getDomSelection(),T.blurNodes(e),r=n.getDomSelection(),s=e.map(E),e.forEach((function(e){e.parent._remove(e)})),n._onAction("removeNodes",{nodes:e,paths:s,parentPath:t.getInternalPath(),index:i,oldSelection:o,newSelection:r}))},T.onDuplicate=function(e){if(!Array.isArray(e))return T.onDuplicate([e]);var t,n,i,o,r,s,a;e&&0<e.length&&(t=e[e.length-1],n=t.parent,(i=t.editor).deselect(i.multiselection.nodes),o=i.getDomSelection(),r=t,s=e.map((function(e){var t,i=e.clone();return"object"===e.parent.type&&(t=e.parent.getFieldNames(),i.field=(0,p.findUniqueName)(e.field,t)),n.insertAfter(i,r),r=i})),1===e.length?"object"===s[0].parent.type?(s[0].dom.field.innerHTML=e[0]._escapeHTML(e[0].field),s[0].focus("field")):s[0].focus():i.select(s),a=i.getDomSelection(),i._onAction("duplicateNodes",{paths:e.map(E),clonePaths:s.map(E),afterPath:t.getInternalPath(),parentPath:n.getInternalPath(),oldSelection:o,newSelection:a}))},T.getNodeFromTarget=function(e){for(;e;){if(e.node)return e.node;e=e.parentNode}},T.targetIsColorPicker=function(e){var t=T.getNodeFromTarget(e);if(t)for(var n=e&&e.parentNode;n;){if(n===t.dom.color)return!0;n=n.parentNode}return!1},T.blurNodes=function(e){var t,n;Array.isArray(e)?(t=(n=e[0]).parent,n=n.getIndex(),(t.childs[n+e.length]?t.childs[n+e.length]:t.childs[n-1]||t).focus()):T.blurNodes([e])};var _=((I.prototype=new T).getDom=function(){var e=this.dom;if(e.tr)return e.tr;this._updateEditability();var t=document.createElement("tr");t.className="jsoneditor-append",t.node=this,e.tr=t,"tree"===this.editor.options.mode&&(e.tdDrag=document.createElement("td"),i=document.createElement("td"),e.tdMenu=i,(n=document.createElement("button")).type="button",n.className="jsoneditor-button jsoneditor-contextmenu-button",n.title="Click to open the actions menu (Ctrl+M)",e.menu=n,i.appendChild(e.menu));var n=document.createElement("td"),i=document.createElement("div");return i.appendChild(document.createTextNode("("+(0,l.Iu)("empty")+")")),i.className="jsoneditor-readonly",n.appendChild(i),e.td=n,e.text=i,this.updateDom(),t},I.prototype.getPath=function(){return null},I.prototype.getIndex=function(){return null},I.prototype.updateDom=function(e){var t=this.dom,n=t.td;n&&(n.style.paddingLeft=24*this.getLevel()+26+"px");var i=t.text;i&&(i.firstChild.nodeValue="("+(0,l.Iu)("empty")+" "+this.parent.type+")"),i=t.tr,this.isVisible()?t.tr.firstChild||(t.tdDrag&&i.appendChild(t.tdDrag),t.tdMenu&&i.appendChild(t.tdMenu),i.appendChild(n)):t.tr.firstChild&&(t.tdDrag&&i.removeChild(t.tdDrag),t.tdMenu&&i.removeChild(t.tdMenu),i.removeChild(n))},I.prototype.isVisible=function(){return 0===this.parent.childs.length},I.prototype.showContextMenu=function(e,t){var n=this,i=[{text:(0,l.Iu)("auto"),className:"jsoneditor-type-auto",title:(0,l.Iu)("autoType"),click:function(){n._onAppend("","","auto")}},{text:(0,l.Iu)("array"),className:"jsoneditor-type-array",title:(0,l.Iu)("arrayType"),click:function(){n._onAppend("",[])}},{text:(0,l.Iu)("object"),className:"jsoneditor-type-object",title:(0,l.Iu)("objectType"),click:function(){n._onAppend("",{})}},{text:(0,l.Iu)("string"),className:"jsoneditor-type-string",title:(0,l.Iu)("stringType"),click:function(){n._onAppend("","","string")}}];n.addTemplates(i,!0);var r=[{text:(0,l.Iu)("appendText"),title:(0,l.Iu)("appendTitleAuto"),submenuTitle:(0,l.Iu)("appendSubmenuTitle"),className:"jsoneditor-insert",click:function(){n._onAppend("","","auto")},submenu:i}];this.editor.options.onCreateMenu&&(i=n.parent.getPath(),r=this.editor.options.onCreateMenu(r,{type:"append",path:i,paths:[i]})),new o.x(r,{close:t}).show(e,this.editor.getPopupAnchor())},I.prototype.onEvent=function(e){var t,n=e.type,i=e.target||e.srcElement,o=this.dom;i===o.menu&&("mouseover"===n?this.editor.highlighter.highlight(this.parent):"mouseout"===n&&this.editor.highlighter.unhighlight()),"click"===n&&i===o.menu&&((t=this.editor.highlighter).highlight(this.parent),t.lock(),(0,p.addClassName)(o.menu,"jsoneditor-selected"),this.showContextMenu(o.menu,(function(){(0,p.removeClassName)(o.menu,"jsoneditor-selected"),t.unlock(),t.unhighlight()}))),"keydown"===n&&this.onKeyDown(e)},I);function I(e){this.editor=e,this.dom={}}var D=((A.prototype=new T).getDom=function(){return this.dom.tr||(this._updateEditability(),this.dom.tr||(t=(e=this).parent,(o=document.createElement("a")).appendChild(document.createTextNode((0,l.Iu)("showMore"))),o.href="#",o.onclick=function(n){return t.visibleChilds=Math.floor(t.visibleChilds/t.getMaxVisibleChilds()+1)*t.getMaxVisibleChilds(),e.updateDom(),t.showChilds(),n.preventDefault(),!1},(r=document.createElement("a")).appendChild(document.createTextNode((0,l.Iu)("showAll"))),r.href="#",r.onclick=function(n){return t.visibleChilds=1/0,e.updateDom(),t.showChilds(),n.preventDefault(),!1},n=document.createElement("div"),i=document.createTextNode(this._getShowMoreText()),n.className="jsoneditor-show-more",n.appendChild(i),n.appendChild(o),n.appendChild(document.createTextNode(". ")),n.appendChild(r),n.appendChild(document.createTextNode(". ")),(o=document.createElement("td")).appendChild(n),r=document.createElement("tr"),"tree"===this.editor.options.mode&&(r.appendChild(document.createElement("td")),r.appendChild(document.createElement("td"))),r.appendChild(o),r.className="jsoneditor-show-more",this.dom.tr=r,this.dom.moreContents=n,this.dom.moreText=i),this.updateDom(),this.dom.tr);var e,t,n,i,o,r},A.prototype.updateDom=function(e){var t;this.isVisible()?(this.dom.tr.node=this.parent.childs[this.parent.visibleChilds],this.dom.tr.parentNode||(t=this.parent._getNextTr())&&t.parentNode.insertBefore(this.dom.tr,t),this.dom.moreText.nodeValue=this._getShowMoreText(),this.dom.moreContents.style.marginLeft=24*(this.getLevel()+1)+"px"):this.dom.tr&&this.dom.tr.parentNode&&this.dom.tr.parentNode.removeChild(this.dom.tr)},A.prototype._getShowMoreText=function(){return(0,l.Iu)("showMoreStatus",{visibleChilds:this.parent.visibleChilds,totalChilds:this.parent.childs.length})+" "},A.prototype.isVisible=function(){return this.parent.expanded&&this.parent.childs.length>this.parent.visibleChilds},A.prototype.onEvent=function(e){"keydown"===e.type&&this.onKeyDown(e)},A);function A(e,t){this.editor=e,this.parent=t,this.dom={}}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var j=function(){function e(t){function n(e){return t.node.findNodeByInternalPath(e)}!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editor=t,this.history=[],this.index=-1,this.clear(),this.actions={editField:{undo:function(e){n(e.parentPath).childs[e.index].updateField(e.oldValue)},redo:function(e){n(e.parentPath).childs[e.index].updateField(e.newValue)}},editValue:{undo:function(e){n(e.path).updateValue(e.oldValue)},redo:function(e){n(e.path).updateValue(e.newValue)}},changeType:{undo:function(e){n(e.path).changeType(e.oldType)},redo:function(e){n(e.path).changeType(e.newType)}},appendNodes:{undo:function(e){var t=n(e.parentPath);e.paths.map(n).forEach((function(e){t.removeChild(e)}))},redo:function(e){var t=n(e.parentPath);e.nodes.forEach((function(e){t.appendChild(e)}))}},insertBeforeNodes:{undo:function(e){var t=n(e.parentPath);e.paths.map(n).forEach((function(e){t.removeChild(e)}))},redo:function(e){var t=n(e.parentPath),i=n(e.beforePath);e.nodes.forEach((function(e){t.insertBefore(e,i)}))}},insertAfterNodes:{undo:function(e){var t=n(e.parentPath);e.paths.map(n).forEach((function(e){t.removeChild(e)}))},redo:function(e){var t=n(e.parentPath),i=n(e.afterPath);e.nodes.forEach((function(e){t.insertAfter(e,i),i=e}))}},removeNodes:{undo:function(e){var t=n(e.parentPath),i=t.childs[e.index]||t.append;e.nodes.forEach((function(e){t.insertBefore(e,i)}))},redo:function(e){var t=n(e.parentPath);e.paths.map(n).forEach((function(e){t.removeChild(e)}))}},duplicateNodes:{undo:function(e){var t=n(e.parentPath);e.clonePaths.map(n).forEach((function(e){t.removeChild(e)}))},redo:function(e){var t=n(e.parentPath),i=n(e.afterPath);e.paths.map(n).forEach((function(e){var n,o=e.clone();"object"===t.type&&(n=t.getFieldNames(),o.field=(0,p.findUniqueName)(e.field,n)),t.insertAfter(o,i),i=o}))}},moveNodes:{undo:function(e){var t=n(e.oldParentPath),i=n(e.newParentPath),o=t.childs[e.oldIndex]||t.append;i.childs.slice(e.newIndex,e.newIndex+e.count).forEach((function(n,i){n.field=e.fieldNames[i],t.moveBefore(n,o)})),null===e.newParentPathRedo&&(e.newParentPathRedo=i.getInternalPath())},redo:function(e){var t=n(e.oldParentPathRedo),i=n(e.newParentPathRedo),o=i.childs[e.newIndexRedo]||i.append;t.childs.slice(e.oldIndexRedo,e.oldIndexRedo+e.count).forEach((function(t,n){t.field=e.fieldNames[n],i.moveBefore(t,o)}))}},sort:{undo:function(e){var t=n(e.path);t.hideChilds(),t.childs=e.oldChilds,t.updateDom({updateIndexes:!0}),t.showChilds()},redo:function(e){var t=n(e.path);t.hideChilds(),t.childs=e.newChilds,t.updateDom({updateIndexes:!0}),t.showChilds()}},transform:{undo:function(e){n(e.path).setInternalValue(e.oldValue)},redo:function(e){n(e.path).setInternalValue(e.newValue)}}}}var t,n;return t=e,(n=[{key:"onChange",value:function(){}},{key:"add",value:function(e,t){this.index++,this.history[this.index]={action:e,params:t,timestamp:new Date},this.index<this.history.length-1&&this.history.splice(this.index+1,this.history.length-this.index-1),this.onChange()}},{key:"clear",value:function(){this.history=[],this.index=-1,this.onChange()}},{key:"canUndo",value:function(){return 0<=this.index}},{key:"canRedo",value:function(){return this.index<this.history.length-1}},{key:"undo",value:function(){if(this.canUndo()){var e=this.history[this.index];if(e){var t=this.actions[e.action];if(t&&t.undo){if(t.undo(e.params),e.params.oldSelection)try{this.editor.setDomSelection(e.params.oldSelection)}catch(e){console.error(e)}}else console.error(new Error('unknown action "'+e.action+'"'))}this.index--,this.onChange()}}},{key:"redo",value:function(){if(this.canRedo()){this.index++;var e=this.history[this.index];if(e){var t=this.actions[e.action];if(t&&t.redo){if(t.redo(e.params),e.params.newSelection)try{this.editor.setDomSelection(e.params.newSelection)}catch(e){console.error(e)}}else console.error(new Error('unknown action "'+e.action+'"'))}this.onChange()}}},{key:"destroy",value:function(){this.editor=null,this.history=[],this.index=-1}}])&&P(t.prototype,n),e}();function F(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var O=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=this;this.editor=t,this.timeout=void 0,this.delay=200,this.lastText=void 0,this.results=null,this.dom={},this.dom.container=n,t=document.createElement("div"),(this.dom.wrapper=t).className="jsoneditor-search",n.appendChild(t),n=document.createElement("div"),(this.dom.results=n).className="jsoneditor-results",t.appendChild(n),n=document.createElement("div"),(this.dom.input=n).className="jsoneditor-frame",n.title=(0,l.Iu)("searchTitle"),t.appendChild(n),(t=document.createElement("button")).type="button",t.className="jsoneditor-refresh",n.appendChild(t);var o=document.createElement("input");o.type="text",(this.dom.search=o).oninput=function(e){i._onDelayedSearch(e)},o.onchange=function(e){i._onSearch()},o.onkeydown=function(e){i._onKeyDown(e)},o.onkeyup=function(e){i._onKeyUp(e)},t.onclick=function(e){o.select()},n.appendChild(o),(t=document.createElement("button")).type="button",t.title=(0,l.Iu)("searchNextResultTitle"),t.className="jsoneditor-next",t.onclick=function(){i.next()},n.appendChild(t),(t=document.createElement("button")).type="button",t.title=(0,l.Iu)("searchPreviousResultTitle"),t.className="jsoneditor-previous",t.onclick=function(){i.previous()},n.appendChild(t)}var t,n;return t=e,(n=[{key:"next",value:function(e){var t;this.results&&((t=null!==this.resultIndex?this.resultIndex+1:0)>this.results.length-1&&(t=0),this._setActiveResult(t,e))}},{key:"previous",value:function(e){var t,n;this.results&&(t=this.results.length-1,n=null!==this.resultIndex?this.resultIndex-1:t,this._setActiveResult(n=n<0?t:n,e))}},{key:"_setActiveResult",value:function(e,t){var n;if(this.activeResult&&(n=this.activeResult.node,"field"===this.activeResult.elem?delete n.searchFieldActive:delete n.searchValueActive,n.updateDom()),!this.results||!this.results[e])return this.resultIndex=void 0,void(this.activeResult=void 0);this.resultIndex=e;var i=this.results[this.resultIndex].node,o=this.results[this.resultIndex].elem;"field"===o?i.searchFieldActive=!0:i.searchValueActive=!0,this.activeResult=this.results[this.resultIndex],i.updateDom(),i.scrollTo((function(){t&&i.focus(o)}))}},{key:"_clearDelay",value:function(){void 0!==this.timeout&&(clearTimeout(this.timeout),delete this.timeout)}},{key:"_onDelayedSearch",value:function(e){this._clearDelay();var t=this;this.timeout=setTimeout((function(e){t._onSearch()}),this.delay)}},{key:"_onSearch",value:function(e){var t;if(this._clearDelay(),(t=0<(t=this.dom.search.value).length?t:void 0)!==this.lastText||e){this.lastText=t,this.results=this.editor.search(t),e=this.results[0]?this.results[0].node.MAX_SEARCH_RESULTS:1/0;var n=0;if(this.activeResult)for(var i=0;i<this.results.length;i++)if(this.results[i].node===this.activeResult.node){n=i;break}this._setActiveResult(n,!1),void 0!==t?(t=this.results.length,this.dom.results.textContent=0===t?"no results":1===t?"1 result":e<t?e+"+ results":t+" results"):this.dom.results.textContent=""}}},{key:"_onKeyDown",value:function(e){var t=e.which;27===t?(this.dom.search.value="",this._onSearch(),e.preventDefault(),e.stopPropagation()):13===t&&(e.ctrlKey?this._onSearch(!0):e.shiftKey?this.previous():this.next(),e.preventDefault(),e.stopPropagation())}},{key:"_onKeyUp",value:function(e){var t=e.keyCode;27!==t&&13!==t&&this._onDelayedSearch(e)}},{key:"clear",value:function(){this.dom.search.value="",this._onSearch()}},{key:"forceSearch",value:function(){this._onSearch(!0)}},{key:"isEmpty",value:function(){return""===this.dom.search.value}},{key:"destroy",value:function(){this.editor=null,this.dom.container.removeChild(this.dom.wrapper),this.dom=null,this.results=null,this.activeResult=null,this._clearDelay()}}])&&F(t.prototype,n),e}();function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var L=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.root=n,this.path=document.createElement("div"),this.path.className="jsoneditor-treepath",this.path.setAttribute("tabindex",0),this.contentMenuClicked=!1,t.appendChild(this.path),this.reset())}var t,n;return t=e,(n=[{key:"reset",value:function(){this.path.textContent=(0,l.Iu)("selectNode")}},{key:"setPath",value:function(e){var t=this;this.path.textContent="",e&&e.length&&e.forEach((function(n,i){var r,s=document.createElement("span");s.className="jsoneditor-treepath-element",s.innerText=n.name,s.onclick=function(e){this.selectionCallback&&this.selectionCallback(e)}.bind(t,n),t.path.appendChild(s),n.children.length&&((r=document.createElement("span")).className="jsoneditor-treepath-seperator",r.textContent="►",r.onclick=function(){t.contentMenuClicked=!0;var s=[];n.children.forEach((function(o){s.push({text:o.name,className:"jsoneditor-type-modes"+(e[i+1]+1&&e[i+1].name===o.name?" jsoneditor-selected":""),click:function(e,t){this.contextMenuCallback&&this.contextMenuCallback(e,t)}.bind(t,n,o.name)})})),new o.x(s,{limitHeight:!0}).show(r,t.root,!0)},t.path.appendChild(r)),i===e.length-1&&(s=(r||s).getBoundingClientRect().right,t.path.offsetWidth<s&&(t.path.scrollLeft=s),t.path.scrollLeft&&((s=document.createElement("span")).className="jsoneditor-treepath-show-all-btn",s.title="show all path",s.textContent="...",s.onclick=function(e){(t.contentMenuClicked=!1,p.addClassName)(t.path,"show-all"),t.path.style.width=t.path.parentNode.getBoundingClientRect().width-10+"px",t.path.onblur=function(){if(t.contentMenuClicked)return t.contentMenuClicked=!1,void t.path.focus();(0,p.removeClassName)(t.path,"show-all"),t.path.onblur=void 0,t.path.style.width="",t.setPath(e)}}.bind(t,e),t.path.insertBefore(s,t.path.firstChild)))}))}},{key:"onSectionSelected",value:function(e){"function"==typeof e&&(this.selectionCallback=e)}},{key:"onContextMenuItemSelected",value:function(e){"function"==typeof e&&(this.contextMenuCallback=e)}}])&&M(t.prototype,n),e}(),B=(t=n(37),n.n(t)),V=[{mode:"tree",mixin:t={create:function(e,t){if(!e)throw new Error("No container element provided.");this.container=e,this.dom={},this.highlighter=new a,this.selection=void 0,this.multiselection={nodes:[]},this.validateSchema=null,this.validationSequence=0,this.errorNodes=[],this.lastSchemaErrors=void 0,this.node=null,this.focusTarget=null,this._setOptions(t),t.autocomplete&&(this.autocomplete=function(e){(e=e||{}).filter=e.filter||"start",e.trigger=e.trigger||"keydown",e.confirmKeys=e.confirmKeys||[39,35,9],e.caseSensitive=e.caseSensitive||!1;var t="",n="",o=document.createElement("div");o.style.position="relative",o.style.outline="0",o.style.border="0",o.style.margin="0",o.style.padding="0";var r,s,a=document.createElement("div");function l(e){var t,n;document.createRange?((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(t)):document.selection&&((t=document.body.createTextRange()).moveToElementText(e),t.collapse(!1),t.select())}function d(e){return void 0===r&&((r=document.createElement("span")).style.visibility="hidden",r.style.position="fixed",r.style.outline="0",r.style.margin="0",r.style.padding="0",r.style.border="0",r.style.left="0",r.style.whiteSpace="pre",r.style.fontSize=t,r.style.fontFamily=n,r.style.fontWeight="normal",document.body.appendChild(r)),r.textContent=e,r.getBoundingClientRect().right}a.className="autocomplete dropdown",a.style.position="absolute",a.style.visibility="hidden";var c,h,u,p,f,m={onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},startFrom:0,options:[],element:null,elementHint:null,elementStyle:null,wrapper:o,show:function(e,i,r){var s=this;this.startFrom=i,this.wrapper.remove(),this.elementHint&&(this.elementHint.remove(),this.elementHint=null),""===t&&(t=window.getComputedStyle(e).getPropertyValue("font-size")),""===n&&(n=window.getComputedStyle(e).getPropertyValue("font-family")),a.style.marginLeft="0",a.style.marginTop=e.getBoundingClientRect().height+"px",this.options=r.map(String),this.element!==e&&(this.element=e,this.elementStyle={zIndex:this.element.style.zIndex,position:this.element.style.position,backgroundColor:this.element.style.backgroundColor,borderColor:this.element.style.borderColor}),this.element.style.zIndex=3,this.element.style.position="relative",this.element.style.backgroundColor="transparent",this.element.style.borderColor="transparent",this.elementHint=e.cloneNode(),this.elementHint.className="autocomplete hint",this.elementHint.style.zIndex=2,this.elementHint.style.position="absolute",this.elementHint.onfocus=function(){s.element.focus()},this.element.addEventListener&&(this.element.removeEventListener("keydown",x),this.element.addEventListener("keydown",x,!1),this.element.removeEventListener("blur",C),this.element.addEventListener("blur",C,!1)),o.appendChild(this.elementHint),o.appendChild(a),e.parentElement.appendChild(o),this.repaint(e)},setText:function(e){this.element.innerText=e},getText:function(){return this.element.innerText},hideDropDown:function(){this.wrapper.remove(),this.elementHint&&(this.elementHint.remove(),this.elementHint=null,g.hide(),this.element.style.zIndex=this.elementStyle.zIndex,this.element.style.position=this.elementStyle.position,this.element.style.backgroundColor=this.elementStyle.backgroundColor,this.element.style.borderColor=this.elementStyle.borderColor)},repaint:function(t){t=(t=t.innerText).replace("\n","");var n=this.options.length,i=t.substring(this.startFrom);s=t.substring(0,this.startFrom);for(var o=0;o<n;o++){var r=this.options[o];if(!e.caseSensitive&&0===r.toLowerCase().indexOf(i.toLowerCase())||e.caseSensitive&&0===r.indexOf(i)){this.elementHint.innerText=s+i+r.substring(i.length),this.elementHint.realInnerText=s+r;break}}a.style.left=d(s)+"px",g.refresh(i,this.options),this.elementHint.style.width=d(this.elementHint.innerText)+10+"px","hidden"===a.style.visibility||(this.elementHint.style.width=d(this.elementHint.innerText)+a.clientWidth+"px")}},g=(c=a,h=[],u=0,p=-1,f={rs:m,hide:function(){c.style.visibility="hidden"},refresh:function(t,n){c.style.visibility="hidden",u=0,c.textContent="";var o=window.innerHeight||document.documentElement.clientHeight,r=(s=c.parentNode.getBoundingClientRect()).top-6,s=o-s.bottom-6;h=[];var a="function"==typeof e.filter?e.filter:i[e.filter];n=a?n.filter((function(n){return a(e.caseSensitive?t:t.toLowerCase(),e.caseSensitive?n:n.toLowerCase(),e)})):[],0!==(h=n.map((function(e){var n=document.createElement("div");n.className="item",n.onmouseover=v,n.onmouseout=y,n.onmousedown=b,n.__hint=e,n.textContent="",n.appendChild(document.createTextNode(e.substring(0,t.length)));var i=document.createElement("b");return i.appendChild(document.createTextNode(e.substring(t.length))),n.appendChild(i),c.appendChild(n),n}))).length&&(1===h.length&&(t.toLowerCase()===h[0].__hint.toLowerCase()&&!e.caseSensitive||t===h[0].__hint&&e.caseSensitive)||h.length<2||(f.highlight(0),3*s<r?(c.style.maxHeight=r+"px",c.style.top="",c.style.bottom="100%"):(c.style.top="100%",c.style.bottom="",c.style.maxHeight=s+"px"),c.style.visibility="visible"))},highlight:function(e){-1!==p&&h[p]&&(h[p].className="item"),h[e].className="item hover",p=e},move:function(e){return"hidden"===c.style.visibility?"":(u+e===-1||u+e===h.length||(u+=e,f.highlight(u)),h[u].__hint)},onmouseselection:function(){}});function v(){this.style.backgroundColor="#ddd"}function y(){this.style.backgroundColor=""}function b(){f.hide(),f.onmouseselection(this.__hint,f.rs)}var x=function(t){var n=(t=t||window.event).keyCode;if(null!=this.elementHint&&33!==n&&34!==n){if(27===n)return m.hideDropDown(),m.element.focus(),t.preventDefault(),void t.stopPropagation();var i=(i=this.element.innerText).replace("\n","");if(0<=e.confirmKeys.indexOf(n))return 9===n&&0===this.elementHint.innerText.length&&m.onTab(),void(0<this.elementHint.innerText.length&&this.element.innerText!==this.elementHint.realInnerText&&(this.element.innerText=this.elementHint.realInnerText,m.hideDropDown(),l(this.element),9===n&&(m.element.focus(),t.preventDefault(),t.stopPropagation())));if(13!==n){if(40===n){var o=i.substring(this.startFrom),r=g.move(1);return""===r&&m.onArrowDown(),this.elementHint.innerText=s+o+r.substring(o.length),this.elementHint.realInnerText=s+r,t.preventDefault(),void t.stopPropagation()}38===n&&(i=i.substring(this.startFrom),""===(d=g.move(-1))&&m.onArrowUp(),this.elementHint.innerText=s+i+d.substring(i.length),this.elementHint.realInnerText=s+d,t.preventDefault(),t.stopPropagation())}else if(0===this.elementHint.innerText.length)m.onEnter();else{var d="hidden"===a.style.visibility;if(g.hide(),d)return m.hideDropDown(),m.element.focus(),void m.onEnter();this.element.innerText=this.elementHint.realInnerText,m.hideDropDown(),l(this.element),t.preventDefault(),t.stopPropagation()}}}.bind(m),C=function(e){m.hideDropDown()};return g.onmouseselection=function(e,t){t.element.innerText=t.elementHint.innerText=s+e,t.hideDropDown(),window.setTimeout((function(){t.element.focus(),l(t.element)}),1)},m}(t.autocomplete)),this.options.history&&"view"!==this.options.mode&&(this.history=new j(this)),this._createFrame(),this._createTable()},destroy:function(){this.frame&&this.container&&this.frame.parentNode===this.container&&(this.container.removeChild(this.frame),this.frame=null),this.container=null,this.dom=null,this.clear(),this.node=null,this.focusTarget=null,this.selection=null,this.multiselection=null,this.errorNodes=null,this.validateSchema=null,this._debouncedValidate=null,this.history&&(this.history.destroy(),this.history=null),this.searchBox&&(this.searchBox.destroy(),this.searchBox=null),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this.frameFocusTracker.destroy()},_setOptions:function(e){var t=this;this.options={search:!0,history:!0,mode:"tree",name:void 0,schema:null,schemaRefs:null,autocomplete:null,navigationBar:!0,mainMenuBar:!0,limitDragging:!1,onSelectionChange:null,colorPicker:!0,onColorPicker:function(e,t,n){var i;B()?(i=e.getBoundingClientRect().top,i=(0,p.getWindow)(e).innerHeight-i<300&&300<i,new(B())({parent:e,color:t,popup:i?"top":"bottom",onDone:function(e){e=1===e.rgba[3]?e.hex.substr(0,7):e.hex,n(e)}}).show()):console.warn("Cannot open color picker: the `vanilla-picker` library is not included in the bundle. Either use the full bundle or implement your own color picker using `onColorPicker`.")},timestampTag:!0,timestampFormat:null,createQuery:d.r,executeQuery:d.J,onEvent:null,enableSort:!0,enableTransform:!0},e&&(Object.keys(e).forEach((function(n){t.options[n]=e[n]})),null==e.limitDragging&&null!=e.schema&&(this.options.limitDragging=!0)),this.setSchema(this.options.schema,this.options.schemaRefs),this._debouncedValidate=(0,p.debounce)(this._validateAndCatch.bind(this),this.DEBOUNCE_INTERVAL),e.onSelectionChange&&this.onSelectionChange(e.onSelectionChange),(0,l.cC)(this.options.languages),(0,l.m0)(this.options.language)},set:function(e){e instanceof Function||void 0===e?this.clear():(this.content.removeChild(this.table),e={field:this.options.name,value:e},e=new T(this,e),this._setRoot(e),this._validateAndCatch(),this.node.expand(!1),this.content.appendChild(this.table)),this.history&&this.history.clear(),this.searchBox&&this.searchBox.clear()},update:function(e){var t,n;this.node.deepEqual(e)||(t=this.getSelection(),this.onChangeDisabled=!0,this.node.update(e),this.onChangeDisabled=!1,this._validateAndCatch(),this.searchBox&&!this.searchBox.isEmpty()&&this.searchBox.forceSearch(),t&&t.start&&t.end?(n=this.node.findNodeByPath(t.start.path),e=this.node.findNodeByPath(t.end.path),n&&e?this.setSelection(t.start,t.end):this.setSelection({},{})):this.setSelection({},{}))},get:function(){if(this.node)return this.node.getValue()},getText:function(){return JSON.stringify(this.get())},setText:function(e){try{this.set((0,p.parse)(e))}catch(t){e=(0,p.tryJsonRepair)(e),this.set((0,p.parse)(e))}},updateText:function(e){try{this.update((0,p.parse)(e))}catch(t){e=(0,p.tryJsonRepair)(e),this.update((0,p.parse)(e))}},setName:function(e){this.options.name=e,this.node&&this.node.updateField(this.options.name)},getName:function(){return this.options.name},focus:function(){var e=this.scrollableContent.querySelector("[contenteditable=true]");e?e.focus():this.node.dom.expand?this.node.dom.expand.focus():this.node.dom.menu?this.node.dom.menu.focus():(e=this.frame.querySelector("button"))&&e.focus()},clear:function(){this.node&&(this.node.hide(),delete this.node),this.treePath&&this.treePath.reset()},_setRoot:function(e){this.clear(),(this.node=e).setParent(null),e.setField(this.getName(),!1),delete e.index,this.tbody.appendChild(e.getDom())},search:function(e){var t;return this.node?(this.content.removeChild(this.table),t=this.node.search(e),this.content.appendChild(this.table)):t=[],t},expandAll:function(){this.node&&(this.content.removeChild(this.table),this.node.expand(),this.content.appendChild(this.table))},collapseAll:function(){this.node&&(this.content.removeChild(this.table),this.node.collapse(),this.content.appendChild(this.table))},_onAction:function(e,t){this.history&&this.history.add(e,t),this._onChange()},_onChange:function(){if(!this.onChangeDisabled){var e;if(this.selection=this.getDomSelection(),this._debouncedValidate(),this.treePath&&((e=this.node&&this.selection?this.node.findNodeByInternalPath(this.selection.path):this.multiselection?this.multiselection.nodes[0]:void 0)?this._updateTreePath(e.getNodePath()):this.treePath.reset()),this.options.onChange)try{this.options.onChange()}catch(e){console.error("Error in onChange callback: ",e)}if(this.options.onChangeJSON)try{this.options.onChangeJSON(this.get())}catch(e){console.error("Error in onChangeJSON callback: ",e)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(e){console.error("Error in onChangeText callback: ",e)}if(this.options.onClassName&&this.node.recursivelyUpdateCssClassesOnNodes(),this.options.onNodeName&&this.node.childs)try{this.node.recursivelyUpdateNodeName()}catch(e){console.error("Error in onNodeName callback: ",e)}}},validate:function(){var e=this,t=this.node;if(t){var n=t.getValue(),i=[];this.validateSchema&&(this.validateSchema(n)||(i=this.validateSchema.errors.map((function(e){return(0,p.improveSchemaError)(e)})).map((function(e){return{node:t.findNode(e.dataPath),error:e,type:"validation"}})).filter((function(e){return null!=e.node}))));try{this.validationSequence++;var o=this,r=this.validationSequence;return this._validateCustom(n).then((function(t){return r===o.validationSequence&&(t=[].concat(i,t||[]),o._renderValidationErrors(t),"function"==typeof e.options.onValidationError&&(0,p.isValidationErrorChanged)(t,e.lastSchemaErrors)&&e.options.onValidationError.call(e,t),e.lastSchemaErrors=t),e.lastSchemaErrors}))}catch(n){return Promise.reject(n)}}},_validateAndCatch:function(){this.validate().catch((function(e){console.error("Error running validation:",e)}))},_renderValidationErrors:function(e){this.errorNodes&&this.errorNodes.forEach((function(e){e.setError(null)}));var t=e.reduce((function(e,t){return t.node.findParents().filter((function(t){return!e.some((function(e){return e[0]===t}))})).map((function(e){return[e,t.node]})).concat(e)}),[]);this.errorNodes=t.map((function(e){return{node:e[0],child:e[1],error:{message:"object"===e[0].type?(0,l.Iu)("containsInvalidProperties"):(0,l.Iu)("containsInvalidItems")}}})).concat(e).map((function(e){return e.node.setError(e.error,e.child),e.node}))},_validateCustom:function(e){try{if(this.options.onValidate){var t=this.node,n=this.options.onValidate(e);return((0,p.isPromise)(n)?n:Promise.resolve(n)).then((function(e){return Array.isArray(e)?e.filter((function(e){var t=(0,p.isValidValidationError)(e);return t||console.warn('Ignoring a custom validation error with invalid structure. Expected structure: {path: [...], message: "..."}. Actual error:',e),t})).map((function(e){var n;try{n=e&&e.path?t.findNodeByPath(e.path):null}catch(e){}return n||console.warn("Ignoring validation error: node not found. Path:",e.path,"Error:",e),{node:n,error:e,type:"customValidation"}})).filter((function(e){return e&&e.node&&e.error&&e.error.message})):null}))}}catch(e){return Promise.reject(e)}return Promise.resolve(null)},refresh:function(){this.node&&this.node.updateDom({recurse:!0})},startAutoScroll:function(e){var t=this,n=this.scrollableContent,i=(0,p.getAbsoluteTop)(n),o=n.clientHeight,r=i+o;e<i+24&&0<n.scrollTop?this.autoScrollStep=(i+24-e)/3:r-24<e&&o+n.scrollTop<n.scrollHeight?this.autoScrollStep=(r-24-e)/3:this.autoScrollStep=void 0,this.autoScrollStep?this.autoScrollTimer||(this.autoScrollTimer=setInterval((function(){t.autoScrollStep?n.scrollTop-=t.autoScrollStep:t.stopAutoScroll()}),50)):this.stopAutoScroll()},stopAutoScroll:function(){this.autoScrollTimer&&(clearTimeout(this.autoScrollTimer),delete this.autoScrollTimer),this.autoScrollStep&&delete this.autoScrollStep},setDomSelection:function(e){var t,n,i;e&&("scrollTop"in e&&this.scrollableContent&&(this.scrollableContent.scrollTop=e.scrollTop),e.paths?(t=this,i=e.paths.map((function(e){return t.node.findNodeByInternalPath(e)})),this.select(i)):(i=(n=e.path?this.node.findNodeByInternalPath(e.path):null)&&e.domName?n.dom[e.domName]:null,e.range&&i?(i=Object.assign({},e.range,{container:i}),(0,p.setSelectionOffset)(i)):n&&n.focus()))},getDomSelection:function(){var e=T.getNodeFromTarget(this.focusTarget),t=this.focusTarget,n=e?Object.keys(e.dom).find((function(n){return e.dom[n]===t})):null,i=(0,p.getSelectionOffset)();return(i=(i=i&&"DIV"!==i.container.nodeName?null:i)&&i.container!==t?null:i)&&delete i.container,{path:e?e.getInternalPath():null,domName:n,range:i,paths:0<this.multiselection.length?this.multiselection.nodes.map((function(e){return e.getInternalPath()})):null,scrollTop:this.scrollableContent?this.scrollableContent.scrollTop:0}},scrollTo:function(e,t){var n,i,o,r,s=this.scrollableContent;s?((n=this).animateTimeout&&(clearTimeout(n.animateTimeout),delete n.animateTimeout),n.animateCallback&&(n.animateCallback(!1),delete n.animateCallback),i=s.clientHeight,o=s.scrollHeight-i,r=Math.min(Math.max(e-i/4,0),o),function e(){var i=s.scrollTop;i=r-i,3<Math.abs(i)?(s.scrollTop+=i/3,n.animateCallback=t,n.animateTimeout=setTimeout(e,50)):(t&&t(!0),s.scrollTop=r,delete n.animateTimeout,delete n.animateCallback)}()):t&&t(!1)},_createFrame:function(){this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.container.appendChild(this.frame),this.contentOuter=document.createElement("div"),this.contentOuter.className="jsoneditor-outer";var e=this;function t(t){e._onEvent&&e._onEvent(t)}var n,i,o,s,a={target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null};this.frameFocusTracker=new r.R(a),this.frame.onclick=function(e){var n=e.target;t(e),"BUTTON"===n.nodeName&&e.preventDefault()},this.frame.oninput=t,this.frame.onchange=t,this.frame.onkeydown=t,this.frame.onkeyup=t,this.frame.oncut=t,this.frame.onpaste=t,this.frame.onmousedown=t,this.frame.onmouseup=t,this.frame.onmouseover=t,this.frame.onmouseout=t,(0,p.addEventListener)(this.frame,"focus",t,!0),(0,p.addEventListener)(this.frame,"blur",t,!0),this.frame.onfocusin=t,this.frame.onfocusout=t,this.options.mainMenuBar&&((0,p.addClassName)(this.contentOuter,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu),(a=document.createElement("button")).type="button",a.className="jsoneditor-expand-all",a.title=(0,l.Iu)("expandAll"),a.onclick=function(){e.expandAll()},this.menu.appendChild(a),(a=document.createElement("button")).type="button",a.title=(0,l.Iu)("collapseAll"),a.className="jsoneditor-collapse-all",a.onclick=function(){e.collapseAll()},this.menu.appendChild(a),this.options.enableSort&&((n=document.createElement("button")).type="button",n.className="jsoneditor-sort",n.title=(0,l.Iu)("sortTitleShort"),n.onclick=function(){e.node.showSortModal()},this.menu.appendChild(n)),this.options.enableTransform&&((n=document.createElement("button")).type="button",n.title=(0,l.Iu)("transformTitleShort"),n.className="jsoneditor-transform",n.onclick=function(){e.node.showTransformModal()},this.menu.appendChild(n)),this.history&&((i=document.createElement("button")).type="button",i.className="jsoneditor-undo jsoneditor-separator",i.title=(0,l.Iu)("undo"),i.onclick=function(){e._onUndo()},this.menu.appendChild(i),this.dom.undo=i,(o=document.createElement("button")).type="button",o.className="jsoneditor-redo",o.title=(0,l.Iu)("redo"),o.onclick=function(){e._onRedo()},this.menu.appendChild(o),this.dom.redo=o,this.history.onChange=function(){i.disabled=!e.history.canUndo(),o.disabled=!e.history.canRedo()},this.history.onChange()),this.options&&this.options.modes&&this.options.modes.length&&((s=this).modeSwitcher=new c.x(this.menu,this.options.modes,this.options.mode,(function(e){s.setMode(e),s.modeSwitcher.focus()}))),this.options.search&&(this.searchBox=new O(this,this.menu))),this.options.navigationBar&&(this.navBar=document.createElement("div"),this.navBar.className="jsoneditor-navigation-bar nav-bar-empty",this.frame.appendChild(this.navBar),this.treePath=new L(this.navBar,this.getPopupAnchor()),this.treePath.onSectionSelected(this._onTreePathSectionSelected.bind(this)),this.treePath.onContextMenuItemSelected(this._onTreePathMenuItemSelected.bind(this)))},_onUndo:function(){this.history&&(this.history.undo(),this._onChange())},_onRedo:function(){this.history&&(this.history.redo(),this._onChange())},_onEvent:function(e){if(!T.targetIsColorPicker(e.target)){var t,n=T.getNodeFromTarget(e.target);if("keydown"===e.type&&this._onKeyDown(e),n&&"focus"===e.type&&(this.focusTarget=e.target,this.options.autocomplete&&"focus"===this.options.autocomplete.trigger&&this._showAutoComplete(e.target)),"mousedown"===e.type&&this._startDragDistance(e),"mousemove"!==e.type&&"mouseup"!==e.type&&"click"!==e.type||this._updateDragDistance(e),n&&this.options&&this.options.navigationBar&&n&&("keydown"===e.type||"mousedown"===e.type)&&(t=this,setTimeout((function(){t._updateTreePath(n.getNodePath())}))),n&&n.selected){if("click"===e.type){if(e.target===n.dom.menu)return void this.showContextMenu(e.target);e.hasMoved||this.deselect()}"mousedown"===e.type&&T.onDragStart(this.multiselection.nodes,e)}else"mousedown"===e.type&&(0,p.hasParentNode)(e.target,this.content)&&(this.deselect(),n&&e.target===n.dom.drag?T.onDragStart(n,e):n&&(e.target===n.dom.field||e.target===n.dom.value||e.target===n.dom.select)||this._onMultiSelectStart(e));n&&n.onEvent(e)}},_updateTreePath:function(e){var t;function n(e){return e.parent?"array"===e.parent.type?e.index:e.field:e.field||e.type}e&&e.length?((0,p.removeClassName)(this.navBar,"nav-bar-empty"),t=[],e.forEach((function(e){var i={name:n(e),node:e,children:[]};e.childs&&e.childs.length&&e.childs.forEach((function(e){i.children.push({name:n(e),node:e})})),t.push(i)})),this.treePath.setPath(t)):(0,p.addClassName)(this.navBar,"nav-bar-empty")},_onTreePathSectionSelected:function(e){e&&e.node&&(e.node.expandTo(),e.node.focus())},_onTreePathMenuItemSelected:function(e,t){e&&e.children.length&&(e=e.children.find((function(e){return e.name===t})))&&e.node&&(this._updateTreePath(e.node.getNodePath()),e.node.expandTo(),e.node.focus())},_startDragDistance:function(e){this.dragDistanceEvent={initialTarget:e.target,initialPageX:e.pageX,initialPageY:e.pageY,dragDistance:0,hasMoved:!1}},_updateDragDistance:function(e){this.dragDistanceEvent||this._startDragDistance(e);var t=e.pageX-this.dragDistanceEvent.initialPageX,n=e.pageY-this.dragDistanceEvent.initialPageY;return this.dragDistanceEvent.dragDistance=Math.sqrt(t*t+n*n),this.dragDistanceEvent.hasMoved=this.dragDistanceEvent.hasMoved||10<this.dragDistanceEvent.dragDistance,e.dragDistance=this.dragDistanceEvent.dragDistance,e.hasMoved=this.dragDistanceEvent.hasMoved,e.dragDistance},_onMultiSelectStart:function(e){var t,n=T.getNodeFromTarget(e.target);"tree"===this.options.mode&&void 0===this.options.onEditable&&(this.multiselection={start:n||null,end:null,nodes:[]},this._startDragDistance(e),(t=this).mousemove||(this.mousemove=(0,p.addEventListener)(e.view,"mousemove",(function(e){t._onMultiSelect(e)}))),this.mouseup||(this.mouseup=(0,p.addEventListener)(e.view,"mouseup",(function(e){t._onMultiSelectEnd(e)}))),e.preventDefault())},_onMultiSelect:function(e){var t;e.preventDefault(),this._updateDragDistance(e),e.hasMoved&&((t=T.getNodeFromTarget(e.target))&&(null==this.multiselection.start&&(this.multiselection.start=t),this.multiselection.end=t),this.deselect(),e=this.multiselection.start,t=this.multiselection.end||this.multiselection.start,e&&t&&(this.multiselection.nodes=this._findTopLevelNodes(e,t),this.multiselection.nodes&&this.multiselection.nodes.length&&(t=this.multiselection.nodes[0],this.multiselection.start===t||this.multiselection.start.isDescendantOf(t)?this.multiselection.direction="down":this.multiselection.direction="up"),this.select(this.multiselection.nodes)))},_onMultiSelectEnd:function(e){var t=this.multiselection.nodes[0];t&&t.dom.menu&&t.dom.menu.focus(),this.multiselection.start=null,this.multiselection.end=null,this.mousemove&&((0,p.removeEventListener)(e.view,"mousemove",this.mousemove),delete this.mousemove),this.mouseup&&((0,p.removeEventListener)(e.view,"mouseup",this.mouseup),delete this.mouseup)},deselect:function(e){var t=!!this.multiselection.nodes.length;this.multiselection.nodes.forEach((function(e){e.setSelected(!1)})),this.multiselection.nodes=[],e&&(this.multiselection.start=null,this.multiselection.end=null),t&&this._selectionChangedHandler&&this._selectionChangedHandler()},select:function(e){if(!Array.isArray(e))return this.select([e]);var t;e&&(this.deselect(),this.multiselection.nodes=e.slice(0),t=e[0],e.forEach((function(e){e.expandPathToNode(),e.setSelected(!0,e===t)})),this._selectionChangedHandler&&(e=this.getSelection(),this._selectionChangedHandler(e.start,e.end)))},_findTopLevelNodes:function(e,t){for(var n=e.getNodePath(),i=t.getNodePath(),o=0;o<n.length&&n[o]===i[o];)o++;var r=n[o-1],s=n[o];return e=i[o],s&&e||(r.parent?r=(e=s=r).parent:(s=r.childs[0],e=r.childs[r.childs.length-1])),r&&s&&e?(t=r.childs.indexOf(s),s=r.childs.indexOf(e),e=Math.min(t,s),s=Math.max(t,s),r.childs.slice(e,s+1)):[]},_showAutoComplete:function(e){var t,n=T.getNodeFromTarget(e),i="";0<=e.className.indexOf("jsoneditor-value")&&(i="value"),""!==(i=0<=e.className.indexOf("jsoneditor-field")?"field":i)&&(t=this,setTimeout((function(){var o;n&&("focus"===t.options.autocomplete.trigger||0<e.innerText.length)&&null!==(o=t.options.autocomplete.getOptions(e.innerText,n.getPath(),i,n.editor))?"function"==typeof o.then?o.then((function(n){null===n?t.autocomplete.hideDropDown():n.options?t.autocomplete.show(e,n.startFrom,n.options):t.autocomplete.show(e,0,n)})).catch((function(e){console.error(e)})):o.options?t.autocomplete.show(e,o.startFrom,o.options):t.autocomplete.show(e,0,o):t.autocomplete.hideDropDown()}),50))},_onKeyDown:function(e){var t,n=e.which||e.keyCode,i=e.altKey,o=e.ctrlKey,r=e.metaKey,s=e.shiftKey,a=!1,l=this.focusTarget;9===n&&(t=this,setTimeout((function(){t.focusTarget!==l&&(0,p.selectContentEditable)(t.focusTarget)}),0)),this.searchBox&&(o&&70===n?(this.searchBox.dom.search.focus(),this.searchBox.dom.search.select(),a=!0):(114===n||o&&71===n)&&(s?this.searchBox.previous(!0):this.searchBox.next(!0),a=!0)),this.history&&(o&&!s&&90===n?(this._onUndo(),a=!0):o&&s&&90===n&&(this._onRedo(),a=!0)),this.options.autocomplete&&!a&&(o||i||r||1!==e.key.length&&8!==n&&46!==n||(a=!1,this._showAutoComplete(e.target))),a&&(e.preventDefault(),e.stopPropagation())},_createTable:function(){var e;this.options.navigationBar&&(0,p.addClassName)(this.contentOuter,"has-nav-bar"),this.scrollableContent=document.createElement("div"),this.scrollableContent.className="jsoneditor-tree",this.contentOuter.appendChild(this.scrollableContent),this.content=document.createElement("div"),this.content.className="jsoneditor-tree-inner",this.scrollableContent.appendChild(this.content),this.table=document.createElement("table"),this.table.className="jsoneditor-tree",this.content.appendChild(this.table),this.colgroupContent=document.createElement("colgroup"),"tree"===this.options.mode&&((e=document.createElement("col")).width="24px",this.colgroupContent.appendChild(e)),(e=document.createElement("col")).width="24px",this.colgroupContent.appendChild(e),e=document.createElement("col"),this.colgroupContent.appendChild(e),this.table.appendChild(this.colgroupContent),this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.frame.appendChild(this.contentOuter)},showContextMenu:function(e,t){var n,i=[],r=this.multiselection.nodes.slice();i.push({text:(0,l.Iu)("duplicateText"),title:(0,l.Iu)("duplicateTitle"),className:"jsoneditor-duplicate",click:function(){T.onDuplicate(r)}}),i.push({text:(0,l.Iu)("remove"),title:(0,l.Iu)("removeTitle"),className:"jsoneditor-remove",click:function(){T.onRemove(r)}}),this.options.onCreateMenu&&(n=r.map((function(e){return e.getPath()})),i=this.options.onCreateMenu(i,{type:"multiple",path:n[0],paths:n})),new o.x(i,{close:t}).show(e,this.getPopupAnchor())},getPopupAnchor:function(){return this.options.popupAnchor||this.frame},getSelection:function(){var e,t,n={start:null,end:null};return this.multiselection.nodes&&this.multiselection.nodes.length&&this.multiselection.nodes.length&&(e=this.multiselection.nodes[0],t=this.multiselection.nodes[this.multiselection.nodes.length-1],"down"===this.multiselection.direction?(n.start=e.serialize(),n.end=t.serialize()):(n.start=t.serialize(),n.end=e.serialize())),n},onSelectionChange:function(e){"function"==typeof e&&(this._selectionChangedHandler=(0,p.debounce)(e,this.DEBOUNCE_INTERVAL))},setSelection:function(e,t){e&&e.dom&&e.range&&(console.warn("setSelection/getSelection usage for text selection is deprecated and should not be used, see documentation for supported selection options"),this.setDomSelection(e)),(t=this._getNodeInstancesByRange(e,t)).forEach((function(e){e.expandTo()})),this.select(t)},_getNodeInstancesByRange:function(e,t){var n,i;e&&e.path&&(n=this.node.findNodeByPath(e.path),t&&t.path&&(i=this.node.findNodeByPath(t.path)));var o=[];if(n instanceof T)if(i instanceof T&&i!==n)if(n.parent===i.parent){t=n.getIndex()<i.getIndex()?(e=n,i):(e=i,n);var r=e;for(o.push(r);r=r.nextSibling(),o.push(r),r&&r!==t;);}else o=this._findTopLevelNodes(n,i);else o.push(n);return o},getNodesByRange:function(e,t){t=this._getNodeInstancesByRange(e,t);var n=[];return t.forEach((function(e){n.push(e.serialize())})),n}},data:"json"},{mode:"view",mixin:t,data:"json"},{mode:"form",mixin:t,data:"json"}]},744:function(e,t,n){t.tryRequireAjv=function(){try{return n(Object(function(){var e=new Error("Cannot find module 'ajv'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){}}},49:function(e,t,n){t.O=function(){try{n(864)}catch(e){console.error(e)}}},791:function(e,t,n){"use strict";n.r(t),n.d(t,{parse:function(){return d},tryJsonRepair:function(){return c},escapeUnicodeChars:function(){return h},validate:function(){return u},extend:function(){return p},clear:function(){return f},getType:function(){return m},isUrl:function(){return v},isArray:function(){return y},getWindow:function(){return b},getAbsoluteLeft:function(){return x},getAbsoluteTop:function(){return C},addClassName:function(){return w},removeAllClassNames:function(){return T},removeClassName:function(){return S},stripFormatting:function(){return E},setEndOfContentEditable:function(){return k},selectContentEditable:function(){return N},getSelection:function(){return _},setSelection:function(){return I},getSelectionOffset:function(){return D},setSelectionOffset:function(){return A},getInnerText:function(){return P},hasParentNode:function(){return j},getInternetExplorerVersion:function(){return F},isFirefox:function(){return M},addEventListener:function(){return L},removeEventListener:function(){return B},isChildOf:function(){return V},parsePath:function(){return R},stringifyPath:function(){return H},improveSchemaError:function(){return z},isPromise:function(){return U},isValidValidationError:function(){return $},insideRect:function(){return W},debounce:function(){return J},textDiff:function(){return q},getInputSelection:function(){return K},getIndexForPosition:function(){return Y},getPositionForPath:function(){return Q},compileJSONPointer:function(){return Z},getColorCSS:function(){return G},isValidColor:function(){return X},makeFieldTooltip:function(){return ee},get:function(){return te},findUniqueName:function(){return ne},getChildPaths:function(){return ie},sort:function(){return oe},sortObjectKeys:function(){return re},parseString:function(){return se},isTimestamp:function(){return ae},formatSize:function(){return le},limitCharacters:function(){return de},isObject:function(){return ce},contains:function(){return he},isValidationErrorChanged:function(){return ue}}),t=n(987),t=n(233);var i=n.n(t),o=(t=n(664),n.n(t)),r=n(589),s=n(26),a=n(907);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){try{return JSON.parse(e)}catch(t){throw u(e),t}}function c(e){try{return o()(e)}catch(t){return e}}function h(e){return e.replace(/[\u007F-\uFFFF]/g,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))}function u(e){(void 0!==r?r:JSON).parse(e)}function p(e,t){for(var n in t)pe(t,n)&&(e[n]=t[n]);return e}function f(e){for(var t in e)pe(e,t)&&delete e[t];return e}function m(e){return null===e?"null":void 0===e?"undefined":e instanceof Number||"number"==typeof e?"number":e instanceof String||"string"==typeof e?"string":e instanceof Boolean||"boolean"==typeof e?"boolean":e instanceof RegExp?"regexp":y(e)?"array":"object"}var g=/^https?:\/\/\S+$/;function v(e){return("string"==typeof e||e instanceof String)&&g.test(e)}function y(e){return"[object Array]"===Object.prototype.toString.call(e)}function b(e){return e.ownerDocument.defaultView}function x(e){return e.getBoundingClientRect().left+window.pageXOffset||document.scrollLeft||0}function C(e){return e.getBoundingClientRect().top+window.pageYOffset||document.scrollTop||0}function w(e,t){var n=e.className.split(" ");-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" "))}function T(e){e.className=""}function S(e,t){var n=e.className.split(" ");-1!==(t=n.indexOf(t))&&(n.splice(t,1),e.className=n.join(" "))}function E(e){for(var t=e.childNodes,n=0,i=t.length;n<i;n++){var o=t[n];o.style&&o.removeAttribute("style");var r=o.attributes;if(r)for(var s=r.length-1;0<=s;s--){var a=r[s];!0===a.specified&&o.removeAttribute(a.name)}E(o)}}function k(e){var t;document.createRange&&((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(e=window.getSelection()).removeAllRanges(),e.addRange(t))}function N(e){var t;e&&"DIV"===e.nodeName&&window.getSelection&&document.createRange&&((t=document.createRange()).selectNodeContents(e),(e=window.getSelection()).removeAllRanges(),e.addRange(t))}function _(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}return null}function I(e){var t;e&&window.getSelection&&((t=window.getSelection()).removeAllRanges(),t.addRange(e))}function D(){var e=_();return e&&"startOffset"in e&&"endOffset"in e&&e.startContainer&&e.startContainer===e.endContainer?{startOffset:e.startOffset,endOffset:e.endOffset,container:e.startContainer.parentNode}:null}function A(e){var t;document.createRange&&window.getSelection&&window.getSelection()&&(t=document.createRange(),e.container.firstChild||e.container.appendChild(document.createTextNode("")),t.setStart(e.container.firstChild,e.startOffset),t.setEnd(e.container.firstChild,e.endOffset),I(t))}function P(e,t){if(void 0===t&&(t={_text:"",flush:function(){var e=this._text;return this._text="",e},set:function(e){this._text=e}}),e.nodeValue){var n=e.nodeValue.replace(/\s*\n\s*/g,"");return""!==n?t.flush()+n:""}if(e.hasChildNodes()){for(var i=e.childNodes,o="",r=0,s=i.length;r<s;r++){var a,l=i[r];"DIV"===l.nodeName||"P"===l.nodeName?((a=(a=i[r-1])?a.nodeName:void 0)&&"DIV"!==a&&"P"!==a&&"BR"!==a&&(""!==o&&(o+="\n"),t.flush()),o+=P(l,t),t.set("\n")):"BR"===l.nodeName?(o+=t.flush(),t.set("\n")):o+=P(l,t)}return o}return""}function j(e,t){for(var n=e?e.parentNode:void 0;n;){if(n===t)return!0;n=n.parentNode}return!1}function F(){var e;return-1===O&&(e=-1,"undefined"!=typeof navigator&&"Microsoft Internet Explorer"===navigator.appName&&null!=/MSIE ([0-9]+[.0-9]+)/.exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),O=e),O}var O=-1;function M(){return"undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Firefox")}function L(e,t,n,i){return e.addEventListener?(void 0===i&&(i=!1),"mousewheel"===t&&M()&&(t="DOMMouseScroll"),e.addEventListener(t,n,i),n):e.attachEvent?(i=function(){return n.call(e,window.event)},e.attachEvent("on"+t,i),i):void 0}function B(e,t,n,i){e.removeEventListener?(void 0===i&&(i=!1),"mousewheel"===t&&M()&&(t="DOMMouseScroll"),e.removeEventListener(t,n,i)):e.detachEvent&&e.detachEvent("on"+t,n)}function V(e,t){for(var n=e.parentNode;n;){if(n===t)return!0;n=n.parentNode}return!1}function R(e){var t=[],n=0;function i(t){for(var i="";void 0!==e[n]&&e[n]!==t;)i+=e[n],n++;if(e[n]!==t)throw new Error("Invalid JSON path: unexpected end, character "+t+" expected");return i}for(;void 0!==e[n];)if("."===e[n])n++,t.push(function(){for(var t="";void 0!==e[n]&&/[\w$]/.test(e[n]);)t+=e[n],n++;if(""===t)throw new Error("Invalid JSON path: property name expected at index "+n);return t}());else{if("["!==e[n])throw new Error('Invalid JSON path: unexpected character "'+e[n]+'" at index '+n);if("'"===e[++n]||'"'===e[n]){var o=e[n];if(n++,t.push(i(o)),e[n]!==o)throw new Error("Invalid JSON path: closing quote ' expected at index "+n);n++}else{if(0===(o=i("]").trim()).length)throw new Error("Invalid JSON path: array value expected at index "+n);o="*"===o?o:JSON.parse(o),t.push(o)}if("]"!==e[n])throw new Error("Invalid JSON path: closing bracket ] expected at index "+n);n++}return t}function H(e){return e.map((function(e){return"number"==typeof e?"["+e+"]":"string"==typeof e&&e.match(/^[A-Za-z0-9_$]+$/)?"."+e:'["'+e+'"]'})).join("")}function z(e){var t,n;return"enum"!==e.keyword||!Array.isArray(e.schema)||(n=e.schema)&&(5<(n=n.map((function(e){return JSON.stringify(e)}))).length&&(t=["("+(n.length-5)+" more...)"],(n=n.slice(0,5)).push(t)),e.message="should be equal to one of: "+n.join(", ")),"additionalProperties"===e.keyword&&(e.message="should NOT have additional property: "+e.params.additionalProperty),e}function U(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}function $(e){return"object"===l(e)&&Array.isArray(e.path)&&"string"==typeof e.message}function W(e,t,n){return n=void 0!==n?n:0,t.left-n>=e.left&&t.right+n<=e.right&&t.top-n>=e.top&&t.bottom+n<=e.bottom}function J(e,t,n){var i;return function(){var o=this,r=arguments,s=n&&!i;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(o,r)}),t),s&&e.apply(o,r)}}function q(e,t){for(var n=t.length,i=0,o=e.length,r=t.length;t.charAt(i)===e.charAt(i)&&i<n;)i++;for(;t.charAt(r-1)===e.charAt(o-1)&&i<r&&0<o;)r--,o--;return{start:i,end:r}}function K(e){var t,n,i,o,r=0,s=0;return"number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd?(r=e.selectionStart,s=e.selectionEnd):(o=document.selection.createRange())&&o.parentElement()===e&&(i=e.value.length,t=e.value.replace(/\r\n/g,"\n"),(n=e.createTextRange()).moveToBookmark(o.getBookmark()),(o=e.createTextRange()).collapse(!1),-1<n.compareEndPoints("StartToEnd",o)?r=s=i:(r=-n.moveStart("character",-i),r+=t.slice(0,r).split("\n").length-1,-1<n.compareEndPoints("EndToEnd",o)?s=i:(s=-n.moveEnd("character",-i),s+=t.slice(0,s).split("\n").length-1))),{startIndex:r,endIndex:s,start:a(r),end:a(s)};function a(t){return{row:((t=e.value.substring(0,t)).match(/\n/g)||[]).length+1,column:t.length-t.lastIndexOf("\n")}}}function Y(e,t,n){return e=e.value||"",0<t&&0<n?(e=e.split("\n",t),t=Math.min(e.length,t),n=Math.min(e[t-1].length,n-1),n=1===t?n:n+1,e.slice(0,t-1).join("\n").length+n):-1}function Q(e,t){var n,i=[];if(!t||!t.length)return i;try{n=s.parse(e)}catch(e){return i}return t.forEach((function(e){var t=Z(R(e));(t=n.pointers[t])&&i.push({path:e,line:t.key?t.key.line:t.value?t.value.line:0,column:t.key?t.key.column:t.value?t.value.column:0})})),i}function Z(e){return e.map((function(e){return"/"+String(e).replace(/~/g,"~0").replace(/\//g,"~1")})).join("")}function G(e){var t=document.createElement("div");return t.style.color=e,t.style.color.split(/\s+/).join("").toLowerCase()||null}function X(e){return!!G(e)}function ee(e,t){if(!e)return"";var n="";return e.title&&(n+=e.title),e.description&&(0<n.length&&(n+="\n"),n+=e.description),e.default&&(0<n.length&&(n+="\n\n"),n+=(0,a.Iu)("default",void 0,t)+"\n",n+=JSON.stringify(e.default,null,2)),Array.isArray(e.examples)&&0<e.examples.length&&(0<n.length&&(n+="\n\n"),n+=(0,a.Iu)("examples",void 0,t)+"\n",e.examples.forEach((function(t,i){n+=JSON.stringify(t,null,2),i!==e.examples.length-1&&(n+="\n")}))),n}function te(e,t){for(var n=e,i=0;i<t.length&&null!=n;i++)n=n[t[i]];return n}function ne(e,t){for(var n=e.replace(/ \(copy( \d+)?\)$/,""),i=n,o=1;-1!==t.indexOf(i);)i=n+" (copy"+(1<o?" "+o:"")+")",o++;return i}function ie(e,t){var n={};if(Array.isArray(e))for(var i=Math.min(e.length,1e4),o=0;o<i;o++)!function e(t,n,i,o){(Array.isArray(t)||ce(t))&&!o||(n[i||""]=!0),ce(t)&&Object.keys(t).forEach((function(r){e(t[r],n,i+"."+r,o)}))}(e[o],n,"",t);else n[""]=!0;return Object.keys(n).sort()}function oe(e,t,n){var i=t&&"."!==t?R(t):[],o="desc"===n?-1:1;return(e=e.slice()).sort((function(e,t){return e=te(e,i),t=te(t,i),o*(t<e?1:e<t?-1:0)})),e}function re(e,t){var n="desc"===t?-1:1,o=(t=Object.keys(e).sort((function(e,t){return n*i()(e,t)})),{});return t.forEach((function(t){o[t]=e[t]})),o}function se(e){if(""===e)return"";if("null"===(n=e.toLowerCase()))return null;if("true"===n)return!0;if("false"===n)return!1;var t=Number(e),n=parseFloat(e);return isNaN(t)||isNaN(n)?e:t}function ae(e,t){return"number"==typeof t&&9466848e5<t&&isFinite(t)&&Math.floor(t)===t&&!isNaN(new Date(t).valueOf())}function le(e){return e<900?e.toFixed()+" B":(e/=1e3)<900?e.toFixed(1)+" KB":(e/=1e3)<900?e.toFixed(1)+" MB":(e/=1e3)<900?e.toFixed(1)+" GB":(e/1e3).toFixed(1)+" TB"}function de(e,t){return e.length<=t?e:e.slice(0,t)+"..."}function ce(e){return"object"===l(e)&&null!==e&&!Array.isArray(e)}function he(e,t){return-1!==e.indexOf(t)}function ue(e,t){if(!t&&!e)return!1;if(t&&!e||!t&&e)return!0;if(t.length!==e.length)return!0;for(var n=0;n<e.length;++n){var i=function(n){if(!("error"===e[n].type?t.find((function(t){return t.line===e[n].line})):t.find((function(t){return t.dataPath===e[n].dataPath&&t.schemaPath===e[n].schemaPath}))))return{v:!0}}(n);if("object"===l(i))return i.v}return!1}function pe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},37:function(e,t,n){var i;if(window.Picker)i=window.Picker;else try{i=n(Object(function(){var e=new Error("Cannot find module 'vanilla-picker'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(e){}e.exports=i},233:function(e){e.exports=function e(t,n){"use strict";function i(t){return e.insensitive&&(""+t).toLowerCase()||""+t}var o,r,s=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,d=/^0x[0-9a-f]+$/i,c=/^0/,h=(t=i(t).replace(a,"")||"",a=i(n).replace(a,"")||"",t.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0")),u=a.replace(s,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0");if(t=parseInt(t.match(d),16)||1!==h.length&&t.match(l)&&Date.parse(t),a=parseInt(a.match(d),16)||t&&a.match(l)&&Date.parse(a)||null){if(t<a)return-1;if(a<t)return 1}for(var p=0,f=Math.max(h.length,u.length);p<f;p++){if(o=!(h[p]||"").match(c)&&parseFloat(h[p])||h[p]||0,r=!(u[p]||"").match(c)&&parseFloat(u[p])||u[p]||0,isNaN(o)!==isNaN(r))return isNaN(o)?1:-1;if(typeof o!=typeof r&&(o+="",r+=""),o<r)return-1;if(r<o)return 1}return 0}},156:function(e,t){!function(e){"use strict";function t(e){return null!==e&&"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e,o){if(e===o)return!0;if(Object.prototype.toString.call(e)!==Object.prototype.toString.call(o))return!1;if(!0===t(e)){if(e.length!==o.length)return!1;for(var r=0;r<e.length;r++)if(!1===i(e[r],o[r]))return!1;return!0}if(!0!==n(e))return!1;var s,a,l={};for(s in e)if(hasOwnProperty.call(e,s)){if(!1===i(e[s],o[s]))return!1;l[s]=!0}for(a in o)if(hasOwnProperty.call(o,a)&&!0!==l[a])return!1;return!0}function o(e){if(""===e||!1===e||null===e)return!0;if(t(e)&&0===e.length)return!0;if(n(e)){for(var i in e)if(e.hasOwnProperty(i))return!1;return!0}return!1}var r="function"==typeof String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.match(/^\s*(.*)/)[1]},s=0,a=2,l="UnquotedIdentifier",d="QuotedIdentifier",c="Rbracket",h="Rparen",u="Comma",p="Colon",f="Rbrace",m="Number",g="Current",v="Expref",y="Pipe",b="GTE",x="LTE",C="Flatten",w="Star",T="Filter",S="Dot",E="Lbrace",k="Lbracket",N="Lparen",_="Literal",I={".":S,"*":w,",":u,":":p,"{":E,"}":f,"]":c,"(":N,")":h,"@":g},D={"<":!0,">":!0,"=":!0,"!":!0},A={" ":!0,"\t":!0,"\n":!0};function P(e){return"0"<=e&&e<="9"||"-"===e}function j(){}j.prototype={tokenize:function(e){var t,n,i,o=[];for(this._current=0;this._current<e.length;)if("a"<=(i=e[this._current])&&i<="z"||"A"<=i&&i<="Z"||"_"===i)r=this._current,t=this._consumeUnquotedIdentifier(e),o.push({type:l,value:t,start:r});else if(void 0!==I[e[this._current]])o.push({type:I[e[this._current]],value:e[this._current],start:this._current}),this._current++;else if(P(e[this._current]))n=this._consumeNumber(e),o.push(n);else if("["===e[this._current])n=this._consumeLBracket(e),o.push(n);else if('"'===e[this._current])r=this._current,t=this._consumeQuotedIdentifier(e),o.push({type:d,value:t,start:r});else if("'"===e[this._current])r=this._current,t=this._consumeRawStringLiteral(e),o.push({type:_,value:t,start:r});else if("`"===e[this._current]){var r=this._current,s=this._consumeLiteral(e);o.push({type:_,value:s,start:r})}else if(void 0!==D[e[this._current]])o.push(this._consumeOperator(e));else if(void 0!==A[e[this._current]])this._current++;else if("&"===e[this._current])r=this._current,this._current++,"&"===e[this._current]?(this._current++,o.push({type:"And",value:"&&",start:r})):o.push({type:v,value:"&",start:r});else{if("|"!==e[this._current])throw(s=new Error("Unknown character:"+e[this._current])).name="LexerError",s;r=this._current,this._current++,"|"===e[this._current]?(this._current++,o.push({type:"Or",value:"||",start:r})):o.push({type:y,value:"|",start:r})}return o},_consumeUnquotedIdentifier:function(e){var t,n=this._current;for(this._current++;this._current<e.length&&("a"<=(t=e[this._current])&&t<="z"||"A"<=t&&t<="Z"||"0"<=t&&t<="9"||"_"===t);)this._current++;return e.slice(n,this._current)},_consumeQuotedIdentifier:function(e){var t=this._current;this._current++;for(var n=e.length;'"'!==e[this._current]&&this._current<n;){var i=this._current;"\\"!==e[i]||"\\"!==e[i+1]&&'"'!==e[i+1]?i++:i+=2,this._current=i}return this._current++,JSON.parse(e.slice(t,this._current))},_consumeRawStringLiteral:function(e){var t=this._current;this._current++;for(var n=e.length;"'"!==e[this._current]&&this._current<n;){var i=this._current;"\\"!==e[i]||"\\"!==e[i+1]&&"'"!==e[i+1]?i++:i+=2,this._current=i}return this._current++,e.slice(t+1,this._current-1).replace("\\'","'")},_consumeNumber:function(e){var t=this._current;this._current++;for(var n=e.length;P(e[this._current])&&this._current<n;)this._current++;var i=parseInt(e.slice(t,this._current));return{type:m,value:i,start:t}},_consumeLBracket:function(e){var t=this._current;return this._current++,"?"===e[this._current]?(this._current++,{type:T,value:"[?",start:t}):"]"===e[this._current]?(this._current++,{type:C,value:"[]",start:t}):{type:k,value:"[",start:t}},_consumeOperator:function(e){var t=this._current,n=e[t];return this._current++,"!"===n?"="===e[this._current]?(this._current++,{type:"NE",value:"!=",start:t}):{type:"Not",value:"!",start:t}:"<"===n?"="===e[this._current]?(this._current++,{type:x,value:"<=",start:t}):{type:"LT",value:"<",start:t}:">"===n?"="===e[this._current]?(this._current++,{type:b,value:">=",start:t}):{type:"GT",value:">",start:t}:"="===n&&"="===e[this._current]?(this._current++,{type:"EQ",value:"==",start:t}):void 0},_consumeLiteral:function(e){this._current++;for(var t=this._current,n=e.length;"`"!==e[this._current]&&this._current<n;){var i=this._current;"\\"!==e[i]||"\\"!==e[i+1]&&"`"!==e[i+1]?i++:i+=2,this._current=i}return t=(t=r(e.slice(t,this._current))).replace("\\`","`"),t=this._looksLikeJSON(t)?JSON.parse(t):JSON.parse('"'+t+'"'),this._current++,t},_looksLikeJSON:function(e){if(""===e)return!1;if(0<='[{"'.indexOf(e[0]))return!0;if(0<=["true","false","null"].indexOf(e))return!0;if(!(0<="-0123456789".indexOf(e[0])))return!1;try{return JSON.parse(e),!0}catch(e){return!1}}};var F={};function O(){}function M(e){this.runtime=e}function L(e){this._interpreter=e,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[s]}]},avg:{_func:this._functionAvg,_signature:[{types:[8]}]},ceil:{_func:this._functionCeil,_signature:[{types:[s]}]},contains:{_func:this._functionContains,_signature:[{types:[a,3]},{types:[1]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[a]},{types:[a]}]},floor:{_func:this._functionFloor,_signature:[{types:[s]}]},length:{_func:this._functionLength,_signature:[{types:[a,3,4]}]},map:{_func:this._functionMap,_signature:[{types:[6]},{types:[3]}]},max:{_func:this._functionMax,_signature:[{types:[8,9]}]},merge:{_func:this._functionMerge,_signature:[{types:[4],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[3]},{types:[6]}]},sum:{_func:this._functionSum,_signature:[{types:[8]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[a]},{types:[a]}]},min:{_func:this._functionMin,_signature:[{types:[8,9]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[3]},{types:[6]}]},type:{_func:this._functionType,_signature:[{types:[1]}]},keys:{_func:this._functionKeys,_signature:[{types:[4]}]},values:{_func:this._functionValues,_signature:[{types:[4]}]},sort:{_func:this._functionSort,_signature:[{types:[9,8]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[3]},{types:[6]}]},join:{_func:this._functionJoin,_signature:[{types:[a]},{types:[9]}]},reverse:{_func:this._functionReverse,_signature:[{types:[a,3]}]},to_array:{_func:this._functionToArray,_signature:[{types:[1]}]},to_string:{_func:this._functionToString,_signature:[{types:[1]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[1]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[1],variadic:!0}]}}}F.EOF=0,F[l]=0,F[d]=0,F[c]=0,F[h]=0,F[u]=0,F[f]=0,F[m]=0,F[g]=0,F[v]=0,F[y]=1,F.Or=2,F.And=3,F.EQ=5,F.GT=5,F.LT=5,F.GTE=5,F.LTE=5,F.NE=5,F[C]=9,F[w]=20,F[T]=21,F.Dot=40,F.Not=45,F[E]=50,F[k]=55,F[N]=60,O.prototype={parse:function(e){if(this._loadTokens(e),this.index=0,e=this.expression(0),"EOF"===this._lookahead(0))return e;throw e=this._lookaheadToken(0),(e=new Error("Unexpected token type: "+e.type+", value: "+e.value)).name="ParserError",e},_loadTokens:function(e){var t=(new j).tokenize(e);t.push({type:"EOF",value:"",start:e.length}),this.tokens=t},expression:function(e){var t=this._lookaheadToken(0);this._advance();for(var n=this.nud(t),i=this._lookahead(0);e<F[i];)this._advance(),n=this.led(i,n),i=this._lookahead(0);return n},_lookahead:function(e){return this.tokens[this.index+e].type},_lookaheadToken:function(e){return this.tokens[this.index+e]},_advance:function(){this.index++},nud:function(e){var t,n;switch(e.type){case _:return{type:"Literal",value:e.value};case l:return{type:"Field",name:e.value};case d:var i={type:"Field",name:e.value};if(this._lookahead(0)===N)throw new Error("Quoted identifier not allowed for function names.");return i;case"Not":return{type:"NotExpression",children:[t=this.expression(F.Not)]};case w:return t=null,{type:"ValueProjection",children:[{type:"Identity"},t=this._lookahead(0)===c?{type:"Identity"}:this._parseProjectionRHS(F.Star)]};case T:return this.led(e.type,{type:"Identity"});case E:return this._parseMultiselectHash();case C:return{type:"Projection",children:[{type:C,children:[{type:"Identity"}]},t=this._parseProjectionRHS(F.Flatten)]};case k:return this._lookahead(0)===m||this._lookahead(0)===p?(t=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},t)):this._lookahead(0)===w&&this._lookahead(1)===c?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},t=this._parseProjectionRHS(F.Star)]}):this._parseMultiselectList();case g:return{type:g};case v:return{type:"ExpressionReference",children:[n=this.expression(F.Expref)]};case N:for(var o=[];this._lookahead(0)!==h;)this._lookahead(0)===g?(n={type:g},this._advance()):n=this.expression(0),o.push(n);return this._match(h),o[0];default:this._errorToken(e)}},led:function(e,t){var n;switch(e){case S:var i=F.Dot;return this._lookahead(0)!==w?{type:"Subexpression",children:[t,n=this._parseDotRHS(i)]}:(this._advance(),{type:"ValueProjection",children:[t,n=this._parseProjectionRHS(i)]});case y:return n=this.expression(F.Pipe),{type:y,children:[t,n]};case"Or":return{type:"OrExpression",children:[t,n=this.expression(F.Or)]};case"And":return{type:"AndExpression",children:[t,n=this.expression(F.And)]};case N:i=t.name;for(var o,r=[];this._lookahead(0)!==h;)this._lookahead(0)===g?(o={type:g},this._advance()):o=this.expression(0),this._lookahead(0)===u&&this._match(u),r.push(o);return this._match(h),{type:"Function",name:i,children:r};case T:var s=this.expression(0);return this._match(c),{type:"FilterProjection",children:[t,n=this._lookahead(0)===C?{type:"Identity"}:this._parseProjectionRHS(F.Filter),s]};case C:return{type:"Projection",children:[{type:C,children:[t]},this._parseProjectionRHS(F.Flatten)]};case"EQ":case"NE":case"GT":case b:case"LT":case x:return this._parseComparator(t,e);case k:return(s=this._lookaheadToken(0)).type===m||s.type===p?(n=this._parseIndexExpression(),this._projectIfSlice(t,n)):(this._match(w),this._match(c),{type:"Projection",children:[t,n=this._parseProjectionRHS(F.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(e){if(this._lookahead(0)!==e){var t=this._lookaheadToken(0);throw(t=new Error("Expected "+e+", got: "+t.type)).name="ParserError",t}this._advance()},_errorToken:function(e){throw(e=new Error("Invalid token ("+e.type+'): "'+e.value+'"')).name="ParserError",e},_parseIndexExpression:function(){if(this._lookahead(0)===p||this._lookahead(1)===p)return this._parseSliceExpression();var e={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(c),e},_projectIfSlice:function(e,t){return e={type:"IndexExpression",children:[e,t]},"Slice"===t.type?{type:"Projection",children:[e,this._parseProjectionRHS(F.Star)]}:e},_parseSliceExpression:function(){for(var e=[null,null,null],t=0,n=this._lookahead(0);n!==c&&t<3;){if(n===p)t++,this._advance();else{if(n!==m){var i=this._lookahead(0);throw(i=new Error("Syntax error, unexpected token: "+i.value+"("+i.type+")")).name="Parsererror",i}e[t]=this._lookaheadToken(0).value,this._advance()}n=this._lookahead(0)}return this._match(c),{type:"Slice",children:e}},_parseComparator:function(e,t){return{type:"Comparator",name:t,children:[e,this.expression(F[t])]}},_parseDotRHS:function(e){var t=this._lookahead(0);return 0<=[l,d,w].indexOf(t)?this.expression(e):t===k?(this._match(k),this._parseMultiselectList()):t===E?(this._match(E),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(e){var t;if(F[this._lookahead(0)]<10)t={type:"Identity"};else if(this._lookahead(0)===k)t=this.expression(e);else if(this._lookahead(0)===T)t=this.expression(e);else{if(this._lookahead(0)!==S){var n=this._lookaheadToken(0);throw(n=new Error("Sytanx error, unexpected token: "+n.value+"("+n.type+")")).name="ParserError",n}this._match(S),t=this._parseDotRHS(e)}return t},_parseMultiselectList:function(){for(var e=[];this._lookahead(0)!==c;){var t=this.expression(0);if(e.push(t),this._lookahead(0)===u&&(this._match(u),this._lookahead(0)===c))throw new Error("Unexpected token Rbracket")}return this._match(c),{type:"MultiSelectList",children:e}},_parseMultiselectHash:function(){for(var e,t,n=[],i=[l,d];;){if(t=this._lookaheadToken(0),i.indexOf(t.type)<0)throw new Error("Expecting an identifier token, got: "+t.type);if(e=t.value,this._advance(),this._match(p),t=this.expression(0),n.push({type:"KeyValuePair",name:e,value:t}),this._lookahead(0)===u)this._match(u);else if(this._lookahead(0)===f){this._match(f);break}}return{type:"MultiSelectHash",children:n}}},M.prototype={search:function(e,t){return this.visit(e,t)},visit:function(e,r){var s,a,l,d,c;switch(e.type){case"Field":return null!==r&&n(r)&&void 0!==(u=r[e.name])?u:null;case"Subexpression":for(m=this.visit(e.children[0],r),E=1;E<e.children.length;E++)if(null===(m=this.visit(e.children[1],m)))return null;return m;case"IndexExpression":return P=this.visit(e.children[0],r),this.visit(e.children[1],P);case"Index":return t(r)?void 0===(m=r[h=(h=e.value)<0?r.length+h:h])?null:m:null;case"Slice":if(!t(r))return null;var h,u=e.children.slice(0),p=(u=(h=this.computeSliceParams(r.length,u))[0],h[1]),f=h[2],m=[];if(0<f)for(E=u;E<p;E+=f)m.push(r[E]);else for(E=u;p<E;E+=f)m.push(r[E]);return m;case"Projection":var w=this.visit(e.children[0],r);if(!t(w))return null;for(T=[],E=0;E<w.length;E++)null!==(a=this.visit(e.children[1],w[E]))&&T.push(a);return T;case"ValueProjection":if(!n(w=this.visit(e.children[0],r)))return null;for(var T=[],S=function(e){for(var t=Object.keys(e),n=[],i=0;i<t.length;i++)n.push(e[t[i]]);return n}(w),E=0;E<S.length;E++)null!==(a=this.visit(e.children[1],S[E]))&&T.push(a);return T;case"FilterProjection":if(!t(w=this.visit(e.children[0],r)))return null;var k=[],N=[];for(E=0;E<w.length;E++)o(s=this.visit(e.children[2],w[E]))||k.push(w[E]);for(var _=0;_<k.length;_++)null!==(a=this.visit(e.children[1],k[_]))&&N.push(a);return N;case"Comparator":switch(l=this.visit(e.children[0],r),d=this.visit(e.children[1],r),e.name){case"EQ":m=i(l,d);break;case"NE":m=!i(l,d);break;case"GT":m=d<l;break;case b:m=d<=l;break;case"LT":m=l<d;break;case x:m=l<=d;break;default:throw new Error("Unknown comparator: "+e.name)}return m;case C:var I=this.visit(e.children[0],r);if(!t(I))return null;var D=[];for(E=0;E<I.length;E++)t(a=I[E])?D.push.apply(D,a):D.push(a);return D;case"Identity":return r;case"MultiSelectList":if(null===r)return null;for(T=[],E=0;E<e.children.length;E++)T.push(this.visit(e.children[E],r));return T;case"MultiSelectHash":if(null===r)return null;for(T={},E=0;E<e.children.length;E++)T[(c=e.children[E]).name]=this.visit(c.value,r);return T;case"OrExpression":return o(s=this.visit(e.children[0],r))?this.visit(e.children[1],r):s;case"AndExpression":return!0===o(l=this.visit(e.children[0],r))?l:this.visit(e.children[1],r);case"NotExpression":return o(l=this.visit(e.children[0],r));case"Literal":return e.value;case y:return P=this.visit(e.children[0],r),this.visit(e.children[1],P);case g:return r;case"Function":var A=[];for(E=0;E<e.children.length;E++)A.push(this.visit(e.children[E],r));return this.runtime.callFunction(e.name,A);case"ExpressionReference":var P=e.children[0];return P.jmespathType=v,P;default:throw new Error("Unknown node type: "+e.type)}},computeSliceParams:function(e,t){var n=t[0],i=t[1],o=t[2];if(t=[null,null,null],null===o)o=1;else if(0===o){var r=new Error("Invalid slice, step cannot be 0");throw r.name="RuntimeError",r}return r=o<0,n=null===n?r?e-1:0:this.capSliceRange(e,n,o),i=null===i?r?-1:e:this.capSliceRange(e,i,o),t[0]=n,t[1]=i,t[2]=o,t},capSliceRange:function(e,t,n){return t<0?(t+=e)<0&&(t=n<0?-1:0):e<=t&&(t=n<0?e-1:e),t}},L.prototype={callFunction:function(e,t){var n=this.functionTable[e];if(void 0===n)throw new Error("Unknown function: "+e+"()");return this._validateArgs(e,t,n._signature),n._func.call(this,t)},_validateArgs:function(e,t,n){var i;if(n[n.length-1].variadic){if(t.length<n.length)throw i=1===n.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes at least"+n.length+i+" but received "+t.length)}else if(t.length!==n.length)throw i=1===n.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes "+n.length+i+" but received "+t.length);for(var o=0;o<n.length;o++){for(var r=!1,s=n[o].types,a=this._getTypeName(t[o]),l=0;l<s.length;l++)if(this._typeMatches(a,s[l],t[o])){r=!0;break}if(!r)throw new Error("TypeError: "+e+"() expected argument "+(o+1)+" to be type "+s+" but received type "+a+" instead.")}},_typeMatches:function(e,t,n){if(1===t)return!0;if(9!==t&&8!==t&&3!==t)return e===t;if(3===t)return 3===e;if(3===e){var i;8===t?i=s:9===t&&(i=a);for(var o=0;o<n.length;o++)if(!this._typeMatches(this._getTypeName(n[o]),i,n[o]))return!1;return!0}},_getTypeName:function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return a;case"[object Number]":return s;case"[object Array]":return 3;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return e.jmespathType===v?6:4}},_functionStartsWith:function(e){return 0===e[0].lastIndexOf(e[1])},_functionEndsWith:function(e){var t=e[0];return e=e[1],-1!==t.indexOf(e,t.length-e.length)},_functionReverse:function(e){if(this._getTypeName(e[0])===a){for(var t=e[0],n="",i=t.length-1;0<=i;i--)n+=t[i];return n}return(e=e[0].slice(0)).reverse(),e},_functionAbs:function(e){return Math.abs(e[0])},_functionCeil:function(e){return Math.ceil(e[0])},_functionAvg:function(e){for(var t=0,n=e[0],i=0;i<n.length;i++)t+=n[i];return t/n.length},_functionContains:function(e){return 0<=e[0].indexOf(e[1])},_functionFloor:function(e){return Math.floor(e[0])},_functionLength:function(e){return(n(e[0])?Object.keys(e[0]):e[0]).length},_functionMap:function(e){for(var t=[],n=this._interpreter,i=e[0],o=e[1],r=0;r<o.length;r++)t.push(n.visit(i,o[r]));return t},_functionMerge:function(e){for(var t={},n=0;n<e.length;n++){var i,o=e[n];for(i in o)t[i]=o[i]}return t},_functionMax:function(e){if(0<e[0].length){if(this._getTypeName(e[0][0])===s)return Math.max.apply(Math,e[0]);for(var t=e[0],n=t[0],i=1;i<t.length;i++)n.localeCompare(t[i])<0&&(n=t[i]);return n}return null},_functionMin:function(e){if(0<e[0].length){if(this._getTypeName(e[0][0])===s)return Math.min.apply(Math,e[0]);for(var t=e[0],n=t[0],i=1;i<t.length;i++)t[i].localeCompare(n)<0&&(n=t[i]);return n}return null},_functionSum:function(e){for(var t=0,n=e[0],i=0;i<n.length;i++)t+=n[i];return t},_functionType:function(e){switch(this._getTypeName(e[0])){case s:return"number";case a:return"string";case 3:return"array";case 4:return"object";case 5:return"boolean";case 6:return"expref";case 7:return"null"}},_functionKeys:function(e){return Object.keys(e[0])},_functionValues:function(e){for(var t=e[0],n=Object.keys(t),i=[],o=0;o<n.length;o++)i.push(t[n[o]]);return i},_functionJoin:function(e){var t=e[0];return e[1].join(t)},_functionToArray:function(e){return 3===this._getTypeName(e[0])?e[0]:[e[0]]},_functionToString:function(e){return this._getTypeName(e[0])===a?e[0]:JSON.stringify(e[0])},_functionToNumber:function(e){var t,n=this._getTypeName(e[0]);return n===s?e[0]:n!==a||(t=+e[0],isNaN(t))?null:t},_functionNotNull:function(e){for(var t=0;t<e.length;t++)if(7!==this._getTypeName(e[t]))return e[t];return null},_functionSort:function(e){return(e=e[0].slice(0)).sort(),e},_functionSortBy:function(e){var t=e[0].slice(0);if(0===t.length)return t;var n=this._interpreter,i=e[1],o=this._getTypeName(n.visit(i,t[0]));if([s,a].indexOf(o)<0)throw new Error("TypeError");for(var r=this,l=[],d=0;d<t.length;d++)l.push([d,t[d]]);l.sort((function(e,t){var s=n.visit(i,e[1]),a=n.visit(i,t[1]);if(r._getTypeName(s)!==o)throw new Error("TypeError: expected "+o+", received "+r._getTypeName(s));if(r._getTypeName(a)!==o)throw new Error("TypeError: expected "+o+", received "+r._getTypeName(a));return a<s?1:s<a?-1:e[0]-t[0]}));for(var c=0;c<l.length;c++)t[c]=l[c][1];return t},_functionMaxBy:function(e){for(var t,n,i=e[1],o=e[0],r=this.createKeyFunction(i,[s,a]),l=-1/0,d=0;d<o.length;d++)l<(n=r(o[d]))&&(l=n,t=o[d]);return t},_functionMinBy:function(e){for(var t,n,i=e[1],o=e[0],r=this.createKeyFunction(i,[s,a]),l=1/0,d=0;d<o.length;d++)(n=r(o[d]))<l&&(l=n,t=o[d]);return t},createKeyFunction:function(e,t){var n=this,i=this._interpreter;return function(o){var r=i.visit(e,o);if(t.indexOf(n._getTypeName(r))<0)throw o="TypeError: expected one of "+t+", received "+n._getTypeName(r),new Error(o);return r}}},e.tokenize=function(e){return(new j).tokenize(e)},e.compile=function(e){return(new O).parse(e)},e.search=function(e,t){var n=new O,i=new L,o=new M(i);return i._interpreter=o,t=n.parse(t),o.search(t,e)},e.strictDeepEqual=i}(t)},26:function(e,t){"use strict";var n={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"},i="a".charCodeAt();t.parse=function(e,t,o){var r={},s=0,a=0,l=0,d=o&&o.bigint&&"undefined"!=typeof BigInt;return{data:function t(n,i){var o;c(),v(n,"value");var r=p();switch(r){case"t":u("rue"),o=!0;break;case"f":u("alse"),o=!1;break;case"n":u("ull"),o=null;break;case'"':o=h();break;case"[":o=function(e){c();var n=[],i=0;if("]"==p())return n;for(f();;){var o=e+"/"+i;if(n.push(t(o)),c(),"]"==(o=p()))break;","!=o&&C(),c(),i++}return n}(n);break;case"{":o=function(e){c();var n={};if("}"==p())return n;for(f();;){var i=b();'"'!=p()&&C();var o=h(),r=e+"/"+m(o);if(y(r,"key",i),v(r,"keyEnd"),c(),":"!=p()&&C(),c(),n[o]=t(r),c(),"}"==(r=p()))break;","!=r&&C(),c()}return n}(n);break;default:f(),0<="-0123456789".indexOf(r)?o=function(){var t="",n=!0;"-"==e[l]&&(t+=p()),t+=("0"==e[l]?p:g)(),"."==e[l]&&(t+=p()+g(),n=!1),"e"!=e[l]&&"E"!=e[l]||(t+=p(),"+"!=e[l]&&"-"!=e[l]||(t+=p()),t+=g(),n=!1);var i=+t;return d&&n&&(i>Number.MAX_SAFE_INTEGER||i<Number.MIN_SAFE_INTEGER)?BigInt(t):i}():x()}return v(n,"valueEnd"),c(),i&&l<e.length&&x(),o}("",!0),pointers:r};function c(){e:for(;l<e.length;){switch(e[l]){case" ":a++;break;case"\t":a+=4;break;case"\r":a=0;break;case"\n":a=0,s++;break;default:break e}l++}}function h(){for(var e,t="";'"'!=(e=p());)"\\"==e?(e=p())in n?t+=n[e]:"u"==e?t+=function(){for(var e=4,t=0;e--;){t<<=4;var n=p().toLowerCase();"a"<=n&&n<="f"?t+=n.charCodeAt()-i+10:"0"<=n&&n<="9"?t+=+n:C()}return String.fromCharCode(t)}():C():t+=e;return t}function u(e){for(var t=0;t<e.length;t++)p()!==e[t]&&C()}function p(){w();var t=e[l];return l++,a++,t}function f(){l--,a--}function g(){for(var t="";"0"<=e[l]&&e[l]<="9";)t+=p();if(t.length)return t;w(),x()}function v(e,t){y(e,t,b())}function y(e,t,n){r[e]=r[e]||{},r[e][t]=n}function b(){return{line:s,column:a,pos:l}}function x(){throw new SyntaxError("Unexpected token "+e[l]+" in JSON at position "+l)}function C(){f(),x()}function w(){if(l>=e.length)throw new SyntaxError("Unexpected end of JSON input")}},t.stringify=function(e,t,n){if(r(e)){var i=0;switch(typeof(s="object"==typeof n?n.space:n)){case"number":var o=10<s?10:s<0?0:Math.floor(s),s=o&&C(o," "),a=o,l=o;break;case"string":s=s.slice(0,10);for(var d=l=a=0;d<s.length;d++){switch(s[d]){case" ":l++;break;case"\t":l+=4;break;case"\r":l=0;break;case"\n":l=0,i++;break;default:throw new Error("whitespace characters not allowed in JSON")}a++}break;default:s=void 0}var c="",h={},p=0,f=0,g=0,v=n&&n.es6&&"function"==typeof Map;return function e(t,n,i){switch(x(i,"value"),typeof t){case"number":case"bigint":case"boolean":y(""+t);break;case"string":y(u(t));break;case"object":null===t?y("null"):"function"==typeof t.toJSON?y(u(t.toJSON())):Array.isArray(t)?o():v?t.constructor.BYTES_PER_ELEMENT?o():t instanceof Map?l():t instanceof Set?l(!0):a():a()}function o(){if(t.length){y("[");for(var o=n+1,s=0;s<t.length;s++){s&&y(","),b(o);var a=r(t[s])?t[s]:null;e(a,o,i+"/"+s)}b(n),y("]")}else y("[]")}function a(){var o=Object.keys(t);if(o.length){y("{");for(var a=n+1,l=0;l<o.length;l++){var d,c=o[l],h=t[c];r(h)&&(l&&y(","),d=i+"/"+m(c),b(a),x(d,"key"),y(u(c)),x(d,"keyEnd"),y(":"),s&&y(" "),e(h,a,d))}b(n),y("}")}else y("{}")}function l(o){if(t.size){y("{");for(var a=n+1,l=!0,d=t.entries(),c=d.next();!c.done;){var h=c.value,p=h[0],f=!!o||h[1];r(f)&&(l||y(","),l=!1,h=i+"/"+m(p),b(a),x(h,"key"),y(u(p)),x(h,"keyEnd"),y(":"),s&&y(" "),e(f,a,h)),c=d.next()}b(n),y("}")}else y("{}")}x(i,"valueEnd")}(e,0,""),{json:c,pointers:h}}function y(e){f+=e.length,g+=e.length,c+=e}function b(e){if(s){for(c+="\n"+C(e,s),p++,f=0;e--;)i?(p+=i,f=l):f+=l,g+=a;g+=1}}function x(e,t){h[e]=h[e]||{},h[e][t]={line:p,column:f,pos:g}}function C(e,t){return Array(e+1).join(t)}};var o=["number","bigint","boolean","string","object"];function r(e){return 0<=o.indexOf(typeof e)}var s=/"|\\/g,a=/[\b]/g,l=/\f/g,d=/\n/g,c=/\r/g,h=/\t/g;function u(e){return'"'+(e=e.replace(s,"\\$&").replace(l,"\\f").replace(a,"\\b").replace(d,"\\n").replace(c,"\\r").replace(h,"\\t"))+'"'}var p=/~/g,f=/\//g;function m(e){return e.replace(p,"~0").replace(f,"~1")}},664:function(e){e.exports=function(){"use strict";function e(t,n){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.message=t+" (char "+n+")",this.char=n,this.stack=(new Error).stack}(e.prototype=new Error).constructor=Error;var t={"'":!0,"‘":!0,"’":!0,"`":!0,"´":!0},n={'"':!0,"“":!0,"”":!0};function i(e){return o.test(e)}var o=/^[a-zA-Z_]$/,r=/^[0-9a-fA-F]$/;function s(e){return a.test(e)}var a=/^[0-9]$/;function l(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function d(e){return" "===e||" "<=e&&e<=" "||" "===e||" "===e||"　"===e}function c(e){return!0===t[e]}function h(e){return!0===n[e]}function u(e){return!0===t[e]?"'":!0===n[e]?'"':e}function p(e,t){return-1!==(t=e.lastIndexOf(t))?e.substring(0,t)+e.substring(t+1):e}function f(e,t){var n=e.length;if(!l(e[n-1]))return e+t;for(;l(e[n-1]);)n--;return e.substring(0,n)+t+e.substring(n)}var m={"":!0,"{":!0,"}":!0,"[":!0,"]":!0,":":!0,",":!0,"(":!0,")":!0,";":!0,"+":!0},g={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},v={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},y={null:"null",true:"true",false:"false"},b={None:"null",True:"true",False:"false"},x="",C="",w=0,T="",S="",E=6;function k(){w++,T=x.charAt(w)}function N(){k(),"\\"===T&&k()}function _(){return 0===E&&("["===S||"{"===S)||2===E||1===E||3===E}function I(){C+=S,E=6,S="",m[T]?(E=0,S=T,k()):function(){if(s(T)||"-"===T){if(E=1,"-"===T){if(S+=T,k(),!s(T))throw new e("Invalid number, digit expected",w)}else"0"===T&&(S+=T,k());for(;s(T);)S+=T,k();if("."===T){if(S+=T,k(),!s(T))throw new e("Invalid number, digit expected",w);for(;s(T);)S+=T,k()}if("e"===T||"E"===T){if(S+=T,k(),"+"!==T&&"-"!==T||(S+=T,k()),!s(T))throw new e("Invalid number, digit expected",w);for(;s(T);)S+=T,k()}}else"\\"===T&&'"'===x.charAt(w+1)?(k(),D(N)):D(k)}(),4===E&&(S=function(e){for(var t="",n=0;n<e.length;n++){var i=e[n];t+=d(i)?" ":i}return t}(S),I()),5===E&&(E=6,S="",I())}function D(o){if(!0===t[a=T]||!0===n[a]){var a=u(T),p=c(T)?c:h;for(S+='"',E=2,o();""!==T&&!p(T);)if("\\"===T)if(o(),void 0!==g[T])S+="\\"+T,o();else if("u"===T){S+="\\u",o();for(var f=0;f<4;f++){if(m=T,!r.test(m))throw new e("Invalid unicode character",w-S.length);S+=T,o()}}else{if("'"!==T)throw new e('Invalid escape character "\\'+T+'"',w);S+="'",o()}else S+=v[T]?v[T]:'"'===T?'\\"':T,o();if(u(T)!==a)throw new e("End of string expected",w-S.length);return S+='"',void o()}var m;!function(){if(i(T))for(E=3;i(T)||s(T)||"$"===T;)S+=T,k();else!function(){if(l(T)||d(T))for(E=4;l(T)||d(T);)S+=T,k();else!function(){if("/"!==T||"*"!==x[w+1])if("/"!==T||"/"!==x[w+1])!function(){for(E=6;""!==T;)S+=T,k();throw new e('Syntax error in part "'+S+'"',w-S.length)}();else for(E=5;""!==T&&"\n"!==T;)S+=T,k();else{for(E=5;""!==T&&("*"!==T||"*"===T&&"/"!==x[w+1]);)S+=T,k();"*"===T&&"/"===x[w+1]&&(S+=T,k(),S+=T,k())}}()}()}()}function A(){if(0!==E||"{"!==S)!function(){if(0!==E||"["!==S)!function(){if(2!==E)(1!==E?function(){if(3!==E)!function(){throw new e(""===S?"Unexpected end of json string":"Value expected",w-S.length)}();else if(y[S])I();else{if(b[S])return S=b[S],I();var t=S,n=C.length;if(S="",I(),0===E&&"("===S)return S="",I(),A(),0===E&&")"===S&&(S="",I(),0===E&&";"===S&&(S="",I()));for(C=function(e,t,n){return e.substring(0,n)+t+e.substring(n)}(C,'"'.concat(t),n);3===E||1===E;)I();C+='"'}}:I)();else for(I();0===E&&"+"===S;){var t;S="",I(),2===E&&(t=C.lastIndexOf('"'),C=C.substring(0,t)+S.substring(1),S="",I())}}();else if(I(),0!==E||"]"!==S){for(;;)if(A(),0===E&&","===S){if(I(),0===E&&"]"===S){C=p(C,",");break}}else{if(!_())break;C=f(C,",")}0===E&&"]"===S?I():C=f(C,"]")}else I()}();else if(I(),0!==E||"}"!==S){for(;;){if(3!==E&&1!==E||(E=2,S='"'.concat(S,'"')),2!==E)throw new e("Object key expected",w-S.length);if(I(),0===E&&":"===S)I();else{if(!_())throw new e("Colon expected",w-S.length);C=f(C,":")}if(A(),0===E&&","===S){if(I(),0===E&&"}"===S){C=p(C,",");break}}else{if(2!==E&&1!==E&&3!==E)break;C=f(C,",")}}0===E&&"}"===S?I():C=f(C,"}")}else I()}return function(t){if(C="",w=0,T=(x=t).charAt(0),S="",E=6,I(),t=0===E&&"{"===S,A(),""===S)return C;if(t&&_()){for(var n="";_();)n+=C=f(C,","),C="",A();return"[\n".concat(n).concat(C,"\n]")}throw new e("Unexpected characters",w-S.length)}}()},483:function(e,t){var n,i;!function(){"use strict";n=[],void 0===(i="function"==typeof(i=function(){function e(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType}function t(){var e=[];return{watch:e.push.bind(e),trigger:function(t,n){for(var i=!0,o={detail:n,preventDefault:function(){i=!1}},r=0;r<e.length;r++)e[r](t,o);return i}}}function n(e){return"none"===window.getComputedStyle(e).display}function i(e){this.elem=e}function o(e,t){return i.make(e("parent")).clazz("pico-overlay").clazz(e("overlayClass","")).stylize({display:"none",position:"fixed",top:"0px",left:"0px",height:"100%",width:"100%",zIndex:1e4}).stylize(e("overlayStyles",{opacity:.5,background:"#000"})).onClick((function(){e("overlayClose",!0)&&t()}))}i.make=function(e,t){"string"==typeof e&&(e=document.querySelector(e));var n=document.createElement(t||"div");return(e||document.body).appendChild(n),new i(n)},i.prototype={child:function(e){return i.make(this.elem,e)},stylize:function(e){for(var t in void 0!==(e=e||{}).opacity&&(e.filter="alpha(opacity="+100*e.opacity+")"),e)e.hasOwnProperty(t)&&(this.elem.style[t]=e[t]);return this},clazz:function(e){return this.elem.className+=" "+e,this},html:function(t){return e(t)?this.elem.appendChild(t):this.elem.innerHTML=t,this},onClick:function(e){return this.elem.addEventListener("click",e),this},destroy:function(){this.elem.parentNode.removeChild(this.elem)},hide:function(){this.elem.style.display="none"},show:function(){this.elem.style.display="block"},attr:function(e,t){return void 0!==t&&this.elem.setAttribute(e,t),this},anyAncestor:function(e){for(var t=this.elem;t;){if(e(new i(t)))return!0;t=t.parentNode}return!1},isVisible:function(){return!n(this.elem)}};var r=1;function s(e,t){var n=e("width","auto");"number"==typeof n&&(n+="px");var o=e("modalId","pico-"+r++);return i.make(e("parent")).clazz("pico-content").clazz(e("modalClass","")).stylize({display:"none",position:"fixed",zIndex:10001,left:"50%",top:"38.1966%",maxHeight:"90%",boxSizing:"border-box",width:n,"-ms-transform":"translate(-50%,-38.1966%)","-moz-transform":"translate(-50%,-38.1966%)","-webkit-transform":"translate(-50%,-38.1966%)","-o-transform":"translate(-50%,-38.1966%)",transform:"translate(-50%,-38.1966%)"}).stylize(e("modalStyles",{overflow:"auto",backgroundColor:"white",padding:"20px",borderRadius:"5px"})).html(e("content")).attr("id",o).attr("role","dialog").attr("aria-labelledby",e("ariaLabelledBy")).attr("aria-describedby",e("ariaDescribedBy",o)).onClick((function(e){new i(e.target).anyAncestor((function(e){return/\bpico-close\b/.test(e.elem.className)}))&&t()}))}function a(e,t){if(t("closeButton",!0))return e.child("button").html(t("closeHtml","&#xD7;")).clazz("pico-close").clazz(t("closeClass","")).stylize(t("closeStyles",{borderRadius:"2px",border:0,padding:0,cursor:"pointer",height:"15px",width:"15px",position:"absolute",top:"5px",right:"5px",fontSize:"16px",textAlign:"center",lineHeight:"15px",background:"#CCC"})).attr("aria-label",t("close-label","Close"))}function l(e){return function(){return e().elem}}var d=t(),c=t();function h(e,t){function i(e,t){return(e.msMatchesSelector||e.webkitMatchesSelector||e.matches).call(e,t)}function o(e){return!(n(e)||i(e,":disabled")||e.hasAttribute("contenteditable"))&&(e.hasAttribute("tabindex")||i(e,"input,select,textarea,button,a[href],area[href],iframe"))}function r(e){for(var t=e.getElementsByTagName("*"),n=0;n<t.length;n++)if(o(t[n]))return t[n]}function s(e){for(var t=e.getElementsByTagName("*"),n=t.length;n--;)if(o(t[n]))return t[n]}var a;e.beforeShow((function(){a=document.activeElement})),e.afterShow((function(){if(t()){var n=r(e.modalElem());n&&n.focus()}})),e.afterClose((function(){t()&&a&&a.focus(),a=null})),c.watch((function(n){if(t()&&e.isVisible()){var i=r(e.modalElem()),o=s(e.modalElem());(n.shiftKey?i:o)===document.activeElement&&((n.shiftKey?o:i).focus(),n.preventDefault())}}))}function u(e,t){var n,o=new i(document.body);e.beforeShow((function(){n=o.elem.style.overflow,t()&&o.stylize({overflow:"hidden"})})),e.afterClose((function(){o.stylize({overflow:n})}))}return document.documentElement.addEventListener("keydown",(function(e){var t=e.which||e.keyCode;27===t?d.trigger():9===t&&c.trigger(e)})),function(n){(function(e){return"string"==typeof e}(n)||e(n))&&(n={content:n});var i=t(),r=t(),c=t(),p=t(),f=t();function m(e,t){var i=n[e];return"function"==typeof i&&(i=i(t)),void 0===i?t:i}var g,v,y=S.bind(window,"modal"),b=S.bind(window,"overlay"),x=S.bind(window,"close");function C(e){b().hide(),y().hide(),f.trigger(g,e)}function w(e){p.trigger(g,e)&&C(e)}function T(e){return function(){return e.apply(this,arguments),g}}function S(e,t){if(!v){var n=s(m,w);v={modal:n,overlay:o(m,w),close:a(n,m)},i.trigger(g,t)}return v[e]}return h(g={modalElem:l(y),closeElem:l(x),overlayElem:l(b),buildDom:T(S.bind(null,null)),isVisible:function(){return!!(v&&y&&y().isVisible())},show:function(e){return r.trigger(g,e)&&(b().show(),x(),y().show(),c.trigger(g,e)),this},close:T(w),forceClose:T(C),destroy:function(){y().destroy(),b().destroy(),b=y=x=void 0},options:function(e){Object.keys(e).map((function(t){n[t]=e[t]}))},afterCreate:T(i.watch),beforeShow:T(r.watch),afterShow:T(c.watch),beforeClose:T(p.watch),afterClose:T(f.watch)},m.bind(null,"focus",!0)),u(g,m.bind(null,"bodyOverflow",!0)),d.watch((function(){m("escCloses",!0)&&g.isVisible()&&g.close()})),g}})?i.apply(t,n):i)||(e.exports=i)}()}},n={},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},e.d=function(t,n){for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e(161);function e(i){var o=n[i];return void 0!==o||(o=n[i]={exports:{}},t[i].call(o.exports,o,o.exports,e)),o.exports}var t,n}()},bHyH:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var i=n("Hx63"),o=n("5aMW");const r=[i.a,o.a];var s=function(t){const n=this;t.plugins={};this.pluginStorage=e.observable({});const i=e=>(n.pluginStorage()[e]||n.pluginStorage({...n.pluginStorage(),[e]:{}}),this.pluginStorage()[e]),o=(e,t,o)=>{const r={...i(e),[t]:o};n.pluginStorage({...n.pluginStorage(),[e]:r})};window.addEventListener("yarnLoadedData",e=>{if(null!==t.data.documentHeader()){const e=t.data.documentHeader();"pluginStorage"in e&&n.pluginStorage(e.pluginStorage)}}),window.addEventListener("newYarnFileStarted",e=>{n.pluginStorage({})});const s=({title:n,valueKey:i,defaultValue:o,optionsKey:r,options:s,setterKey:a,settingsColumn:l})=>{t.settings[i]=e.observable(t.settings.storage.getItem(i)||o).extend({persist:i}),t.ui[r]=s,t[a]=function(e,n){const o=n?n.target.value:e;t.settings[i](o)},window.addEventListener("settingsOpened",()=>{const e=t.ui[r].map(e=>`<option value="${e.id}" ${e.id===t.settings[i]()?'selected="true"':""}>${e.name}</option>`).join(""),o=`\n              <label class="settings-label" for="theme">${n}</label>\n              <div class="settings-value markup">\n                <select id="mySelect">\n                   ${e}\n                </select>\n              </div>\n    `,s=document.createElement("div");s.className="settings-item",s.innerHTML=o,document.getElementById("settingsColumn"+(l||"A")).appendChild(s),document.getElementById("mySelect").addEventListener("change",e=>{t[a](!1,e)})})},a=(e,{name:t,icon:n,onClick:i,attachTo:o,className:r,title:s,onPointerDown:a,onDoubleClick:l})=>{const d=document.createElement("span"),c=n||"cog";return d.innerHTML=`\n      <span class="item ${r||""}" title="${s||""}" ${i?`onclick="click: app.plugins.${e}.${i}"`:""}\n       ${a?` onpointerdown="app.plugins.${e}.${a}"`:""}\n              ${l?`ondblclick="app.plugins.${e}.${l}"`:""}\n       >\n        <svg class="icon menu-icon icon-file-${c} icon-lg icon-fw" style="color:currentColor;"><use xlink:href="public/icons.svg#icon-${c}"></use></svg>\n        <span class="hide-when-narrow">&nbsp;</span>\n        ${t||""}\n      </span>\n    `,document.getElementById(o).appendChild(d),d},l=e=>{window.addEventListener("yarnLoadedData",t=>{e(t)})},d=e=>{window.addEventListener("yarnEditorOpen",t=>{e(t)})},c=e=>{window.addEventListener("DOMContentLoaded",t=>{e(t)})};r.forEach(e=>{const n=new e({app:t,createButton:a,getPluginStore:i,setPluginStore:o,addSettingsItem:s,onYarnLoadedData:l,onYarnEditorOpen:d,onLoad:c});window.addEventListener("DOMContentLoaded",e=>{(e=>{t.plugins[e.name]=e,console.log("attaching plugin",e,t.plugins)})(n)})})}}).call(this,n("Z1dp"))},e6Wu:function(e,t,n){"use strict";n.r(t);n("hZTp");var i=n("oj90"),o=n("0h2I"),r=n.n(o),s=(n("5uVa"),n("si6p"),n("ghrA"),n("bU/s")),a=n.n(s),l=(n("A8C4"),n("VEX6"),n("jF1P"),n("YhK8"),n("Ab/9"),n("KDOe"),n("XfCI"),n("PSD3")),d=n.n(l),c=n("P0sH"),h=n("pLxK"),u=n("bHyH");window.ko=r.a,window.$=window.jQuery=n("EVdn"),window.ace=a.a,a.a.config.set("basePath",i.Utils.getPublicPath()),window.define=a.a.define,window.Swal=d.a,"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("sw.js").then(e=>{console.log("SW registered: ",e)}).catch(e=>{console.log("SW registration failed: ",e)})}),window.app=new c.a("Yarn",h.a),window.app.run();const p=new u.a(window.app);window.app.plugins=p},fkuv:function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return o}));const o=function(t){const n=this;this.notification=Swal.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:2500}),this.settingsDialogVisible=e.observable(!1),this.narrowScreenThreshold=600,this.isScreenNarrow=function(){return i(window).width()<=n.narrowScreenThreshold},this.availableMarkupLanguages=[{id:"bbcode",name:"Bbcode"},{id:"html",name:"Html"}],this.availableFiletypeVersions=[{id:"1",name:"1"},{id:"2",name:"2"}],this.availableThemes=[{id:"classic",name:"Classic"},{id:"blueprint",name:"Blueprint"},{id:"dracula",name:"Dracula"}],this.availableLanguages=[{name:"Afrikaans",id:"af-ZA"},{name:"Bahasa Indonesia",id:"id-ID"},{name:"Bahasa Melayu",id:"ms-MY"},{name:"Català",id:"ca-ES"},{name:"Čeština",id:"cs-CZ"},{name:"Deutsch",id:"de-DE"},{name:"English",id:"en-GB"},{name:"Español",id:"es-ES"},{name:"Euskara",id:"eu-ES"},{name:"Français",id:"fr-FR"},{name:"Galego",id:"gl-ES"},{name:"Hrvatski",id:"hr_HR"},{name:"IsiZulu",id:"zu-ZA"},{name:"Íslenska",id:"is-IS"},{name:"Italiano",id:"it-IT"},{name:"Magyar",id:"hu-HU"},{name:"Nederlands",id:"nl-NL"},{name:"Norsk bokmål",id:"nb-NO"},{name:"Polski",id:"pl-PL"},{name:"Português",id:"pt-BR"},{name:"Română",id:"ro-RO"},{name:"Slovenčina",id:"sk-SK"},{name:"Suomi",id:"fi-FI"},{name:"Svenska",id:"sv-SE"},{name:"Türkçe",id:"tr-TR"},{name:"български",id:"bg-BG"},{name:"Pусский",id:"ru-RU"},{name:"Српски",id:"sr-RS"},{name:"한국어",id:"ko-KR"},{name:"中文",id:"cmn-Hans-CN"},{name:"日本語",id:"ja-JP"},{name:"Lingua latīna",id:"la"}],this.availableLineStyles=[{id:"straight",name:"Straight Lines"},{id:"bezier",name:"Bezier Curves"}],this.openSettingsDialog=function(){n.settingsDialogVisible(!0),i(".settings-dialog").css({opacity:0}).transition({opacity:1},250),i(".settings-dialog .form").css({y:"-100"}).transition({y:"0"},250);var e=new CustomEvent("settingsOpened");window.parent.dispatchEvent(e)},this.closeSettingsDialog=function(){i(".settings-dialog").css({opacity:1}).transition({opacity:0},250,e=>{n.settingsDialogVisible(!1)}),i(".settings-dialog .form").css({y:"0"}).transition({y:"-100"},250),setTimeout(()=>t.settings.apply(),100)},this.isDialogOpen=function(){return n.settingsDialogVisible()||Swal.isVisible()&&!Swal.isTimerRunning()},this.confirmMarkupConversion=function(){Swal.fire({title:"Are you sure?",text:"Markup on all nodes will be modified. This can rarely result in broken texts. This operation can't be undone.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, convert it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(e=>{e.value&&(t.convertMarkup(),Swal.fire("Converted!","The markup on the nodes has been converted.","success"))})},this.openNodeListMenu=function(e){const n="link"===e?document.getElementById("linkHelperMenuFilter").value.toLowerCase():document.getElementById("nodeSearchInput").value.toLowerCase(),o=document.getElementById(e+"HelperMenu");o.innerHTML="",t.nodes().forEach((r,s)=>{if(r.title().toLowerCase().indexOf(n)>=0||0==n.length){const a=document.createElement("span");a.innerHTML=r.title(),i(a).addClass("item "+t.nodes()[s].titleStyles[t.nodes()[s].colorID()]),"link"==e?r.title()!==t.editing().title()&&(a.setAttribute("onclick","app.insertTextAtCursor('[["+r.title()+"]]')"),o.appendChild(a)):"open"==e&&(r.title().toLowerCase().indexOf(n)>=0||0==n.length)&&(a.setAttribute("onclick",`app.openNodeByTitle("${r.title()}")`),a.setAttribute("onmouseenter",`app.workspace.warpToNodeByIdx(${t.nodes.indexOf(r)})`),o.appendChild(a))}})},this.checkAndMoveAppButtons=function(){i(".app-add-node").toggleClass("app-add-node-alt","right"===t.settings.editorSplitDirection()),i(".app-sort").toggleClass("app-sort-alt","right"===t.settings.editorSplitDirection()),i(".app-undo-redo").toggleClass("app-undo-redo-alt","right"===t.settings.editorSplitDirection()),i(".app-zoom").toggleClass("app-zoom-alt","right"===t.settings.editorSplitDirection())},this.resetAppButtonsLocation=function(){i(".app-add-node").removeClass("app-add-node-alt"),i(".app-sort").removeClass("app-sort-alt"),i(".app-undo-redo").removeClass("app-undo-redo-alt"),i(".app-zoom").removeClass("app-zoom-alt")}}}).call(this,n("Z1dp"),n("EVdn"))},hZTp:function(e,t,n){},jF1P:function(e,t,n){(function(e){var t,n;t={},n=0,e.bindingHandlers.ace={init:function(i,o,r,s,a){var l=r().aceOptions||{},d=e.utils.unwrapObservable(o());i.id||(i.id="knockout-ace-"+n,n+=1);var c=ace.edit(i.id);l.theme&&c.setTheme("ace/theme/"+l.theme),l.mode&&c.getSession().setMode("ace/mode/"+l.mode),c.setValue(d),c.gotoLine(0),c.setShowPrintMargin(!1),c.getSession().setUseWrapMode(!0),c.getSession().on("change",(function(t){e.isWriteableObservable(o())&&o()(c.getValue())})),t[i.id]=c,e.utils.domNodeDisposal.addDisposeCallback(i,(function(){try{c.destroy()}catch(e){}delete t[i.id]}))},update:function(n,i,o,r,s){var a=e.utils.unwrapObservable(i()),l=n.id;if(void 0!==l&&""!==l&&t.hasOwnProperty(l)){var d=t[l];d.getValue()!==a&&(d.setValue(a),d.gotoLine(0))}}},e.aceEditors={resizeAll:function(){for(var e in t)t.hasOwnProperty(e)&&t[e].resize()},get:function(e){return t[e]}}}).call(this,n("Z1dp"))},"l8+o":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("mIo7"),o=n("mqgS");const r=function(e){return"html"===e.settings.markupLanguage()?new o.a(e):new i.a(e)}},mIo7:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return BbcodeRichTextFormatter}));const bbcode=__webpack_require__("L8pc"),BbcodeRichTextFormatter=function(app){const self=this;this.justInsertedAutoComplete=!1,this.completableTags=Object.freeze([{Start:"<<",Completion:">>",Offset:-2},{Start:"[colo",Completion:"r=#][/color]",Offset:-9,BehaviorCompletion:"r=#][/color",Func:()=>{app.insertColorCode()}},{Start:"[b",Completion:"][/b]",BehaviorCompletion:"][/b",Offset:-4},{Start:"[i",Completion:"][/i]",BehaviorCompletion:"][/i",Offset:-4},{Start:"[img",Completion:"][/img]",BehaviorCompletion:"][/img",Offset:-6},{Start:"[u",Completion:"][/u]",BehaviorCompletion:"][/u",Offset:-4},{Start:"[url",Completion:"][/url]",BehaviorCompletion:"][/url",Offset:-6}]),this.getTagOpen=function(e){switch(e){case"cmd":return"<<";case"opt":return"[[";case"color":return"[color=#]";default:return`[${e}]`}},this.getTagClose=function(e){switch(e){case"cmd":return">>";case"opt":return"|]]";default:return`[/${e}]`}},this.identifyTag=function(e){let t=-1!==e.lastIndexOf("[")?e.substring(e.lastIndexOf("["),e.length):"";return"[["===e.substring(e.length-2,e.length)?t="[[":"<<"===e.substring(e.length-2,e.length)&&(t="<<"),t},this.insertTag=function(e){const t=self.getTagOpen(e),n=self.getTagClose(e),i=JSON.parse(JSON.stringify(app.editor.selection.getRange()));app.editor.session.insert(i.start,t),app.editor.session.insert({column:i.end.column+t.length,row:i.end.row},n),"color"===e&&(0===app.editor.getSelectedText().length?app.moveEditCursor(-9):app.editor.selection.setRange({start:{row:app.editor.selection.getRange().start.row,column:app.editor.selection.getRange().start.column-1},end:{row:app.editor.selection.getRange().start.row,column:app.editor.selection.getRange().start.column-1}}),app.insertColorCode()),"img"===e?0===app.editor.getSelectedText().length&&(app.moveEditCursor(-6),app.data.triggerPasteClipboard(),setTimeout(()=>app.moveEditCursor(6),300)):0===app.editor.getSelectedText().length?app.isEditorInPreviewMode||app.moveEditCursor(-n.length):app.editor.selection.setRange({start:app.editor.selection.getRange().start,end:{row:app.editor.selection.getRange().end.row,column:app.editor.selection.getRange().end.column-n.length}}),app.editor.focus()},this._convertTag=function(inPattern,outPattern,text){const globalRegex=new RegExp(inPattern,"gi"),localRegex=new RegExp(inPattern,"i");return text.replace(globalRegex,m=>{const match=m.match(localRegex),template=eval("`"+outPattern+"`");return match.length?template:null})},this.convert=function(e){let t=e;return t=self._convertTag("<b>(.*?)<\\/b>","[b]${match[1]}[/b]",t),t=self._convertTag("<u>(.*?)<\\/u>","[u]${match[1]}[/u]",t),t=self._convertTag("<i>(.*?)<\\/i>","[i]${match[1]}[/i]",t),t=self._convertTag("<img>(.*?)<\\/img>","[img]${match[1]}[/img]",t),t=self._convertTag("<color=#(.*?)>(.*?)<\\/color>","[color=#${match[1]}]${match[2]}[/color]",t),t=self._convertTag("<url>(.*?)<\\/url>","[url]${match[1]}[/url]",t),t},this.richTextToHtml=function(e,t=!1){let n=1,i=t?'<div><font color="pink">'+n+". </font><font>"+e+"</font></div>":e;if(i=i.replace(/<</gi,"<font color='violet'>(run:"),i=i.replace(/>>/gi,")</font>"),i=i.replace(/\[color=#[A-Za-z0-9]+\]/gi,(function(e){const t=e.match(/\[color=#([A-Za-z0-9]+)\]/i);if(t&&t.length>1)return"[color=#"+t[1]+"]<font color=#"+t[1]+">&#9751</font>"})),i=i.replace(/\[img\][^\[]+\[\/img\]/gi,(function(e){const n=e.match(/\[img\](.*)\[\/img\]/i);if(n.length>1){const e=app.data.editingFileFolder(n[1]);return app.data.doesFileExist(e)?t?'<img src="'+e+'"> </img>':'<img src="'+e+'" width="128" height="auto"> </img>':t?'<img src="'+n[1]+'"> </img>':'<img src="'+n[1]+'" width="128" height="auto"> </img>'}})),i=i.replace(/[\n\r]/g,(function(e){let i="</font><br/>";return n+=1,t&&(i+='</div><div><font color="pink">'+n+". </font><font>"),i})),i=bbcode.parse(i),t){const e=[];i=i.replace(/(https?:\/\/twitter.com\/[^\s\<]+\/[^\s\<]+\/[^\s\<]+)/gi,(function(t){const n=t.match(/https:\/\/twitter.com\/.*\/status\/([0-9]+)/i);if(n.length>1)return e.push(n[1]),`<a class="tweet" id="${n[1]}"></a>`})),setTimeout(()=>{const t=document.querySelectorAll(".tweet");e.forEach((e,n)=>{twttr.widgets.createTweet(e,t[n],{align:"center",follow:!1})})},500)}return i}}},mqgS:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return HtmlRichTextFormatter}));const HtmlRichTextFormatter=function(app){const self=this;this.justInsertedAutoComplete=!1,this.completableTags=Object.freeze([{Start:"<<",Completion:">>",Offset:-2},{Start:"<colo",Completion:"r=#></color>",Offset:-9,Func:()=>{app.insertColorCode()}},{Start:"<b",Completion:"></b>",Offset:-4},{Start:"<img",Completion:"></img>",Offset:-6},{Start:"<i",Completion:"></i>",Offset:-4},{Start:"<u",Completion:"></u>",Offset:-4},{Start:"<url",Completion:"></url>",Offset:-6}]),this.getTagOpen=function(e){switch(e){case"cmd":return"<<";case"opt":return"[[";case"color":return"<color=#>";default:return`<${e}>`}},this.getTagClose=function(e){switch(e){case"cmd":return">>";case"opt":return"|]]";default:return`</${e}>`}},this.identifyTag=function(e){let t=-1!==e.lastIndexOf("<")?e.substring(e.lastIndexOf("<"),e.length):"";return"[["===e.substring(e.length-2,e.length)?t="[[":"<<"===e.substring(e.length-2,e.length)&&(t="<<"),t},this.insertTag=function(e){const t=self.getTagOpen(e),n=self.getTagClose(e),i=JSON.parse(JSON.stringify(app.editor.selection.getRange()));app.editor.session.insert(i.start,t),app.editor.session.insert({column:i.end.column+t.length,row:i.end.row},n),"color"===e&&(0===app.editor.getSelectedText().length?app.moveEditCursor(-9):app.editor.selection.setRange({start:{row:app.editor.selection.getRange().start.row,column:app.editor.selection.getRange().start.column-1},end:{row:app.editor.selection.getRange().start.row,column:app.editor.selection.getRange().start.column-1}}),app.insertColorCode()),"img"===e?navigator.clipboard.readText().then(e=>{0===app.editor.getSelectedText().length&&(app.moveEditCursor(-7),app.insertTextAtCursor(` src="${e}"`))}):0===app.editor.getSelectedText().length?app.isEditorInPreviewMode||app.moveEditCursor(-n.length):app.editor.selection.setRange({start:app.editor.selection.getRange().start,end:{row:app.editor.selection.getRange().end.row,column:app.editor.selection.getRange().end.column-n.length}}),app.editor.focus()},this._convertTag=function(inPattern,outPattern,text){const globalRegex=new RegExp(inPattern,"gi"),localRegex=new RegExp(inPattern,"i");return text.replace(globalRegex,m=>{const match=m.match(localRegex),template=eval("`"+outPattern+"`");return match.length?template:null})},this.convert=function(e){let t=e;return t=self._convertTag("\\[b\\](.*?)\\[\\/b\\]","<b>${match[1]}</b>",t),t=self._convertTag("\\[u\\](.*?)\\[\\/u\\]","<u>${match[1]}</u>",t),t=self._convertTag("\\[i\\](.*?)\\[\\/i\\]","<i>${match[1]}</i>",t),t=self._convertTag("\\[img\\](.*?)\\[\\/img\\]","<img>${match[1]}</img>",t),t=self._convertTag("\\[color=#(.*?)\\](.*?)\\[\\/color\\]","<color=#${match[1]}>${match[2]}</color>",t),t=self._convertTag("\\[url\\](.*?)\\[\\/url\\]","<url>${match[1]}</url>",t),t},this.richTextToHtml=function(e,t=!1){let n=1,i=t?'<div><font color="pink">'+n+". </font><font>"+e+"</font></div>":e;if(i=i.replace(/<</gi,"<font color='violet'>(run:"),i=i.replace(/>>/gi,")</font>"),[/&lt;color=#(.*?)&gt;(.*?)&lt;\/color&gt;/,/<color=#(.*?)>(.*?)<\/color>/].forEach(e=>{const t=new RegExp(e,"gi"),n=new RegExp(e,"i");i=i.replace(t,(function(e){const t=e.match(n);if(t&&t.length>2)return`<font color=#${t[1]}>&#9751${t[2]}</font>`}))}),i=i.replace(/&lt;img&gt;[^\[]+&lt;\/img&gt;/gi,(function(e){const n=e.match(/&lt;img&gt;(.*?)&lt;\/img&gt;/i);if(n.length>1){const e=app.data.editingFileFolder(n[1]);return app.data.doesFileExist(e)?t?'<img src="'+e+'"> </img>':'<img src="'+e+'" width="128" height="auto"> </img>':t?'<img src="'+n[1]+'"> </img>':'<img src="'+n[1]+'" width="128" height="auto"> </img>'}})),i=i.replace(/&lt;b&gt;.*&lt;\/b&gt;/gi,e=>{const t=e.match(/&lt;b&gt;(.*)&lt;\/b&gt;/i);if(t.length)return`<b>${t[1]}</b>`}),i=i.replace(/&lt;u&gt;.*&lt;\/u&gt;/gi,e=>{const t=e.match(/&lt;u&gt;(.*)&lt;\/u&gt;/i);if(t.length)return`<u>${t[1]}</u>`}),i=i.replace(/&lt;i&gt;.*&lt;\/i&gt;/gi,e=>{const t=e.match(/&lt;i&gt;(.*)&lt;\/i&gt;/i);if(t.length)return`<i>${t[1]}</i>`}),i=i.replace(/[\n\r]/g,(function(e){let i="</font><br/>";return n+=1,t&&(i+='</div><div><font color="pink">'+n+". </font><font>"),i})),t){const e=[];i=i.replace(/(https?:\/\/twitter.com\/[^\s\<]+\/[^\s\<]+\/[^\s\<]+)/gi,(function(t){const n=t.match(/https:\/\/twitter.com\/.*\/status\/([0-9]+)/i);if(n.length>1)return e.push(n[1]),`<a class="tweet" id="${n[1]}"></a>`})),setTimeout(()=>{const t=document.querySelectorAll(".tweet");e.forEach((e,n)=>{twttr.widgets.createTweet(e,t[n],{align:"center",follow:!1})})},500)}return i}}},oj90:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"FILETYPE",(function(){return i})),n.d(t,"Utils",(function(){return o}));var i={JSON:"json",XML:"xml",TWEE:"twee",TWEE2:"tw2",UNKNOWN:"none",YARN:"yarn"},o={createAutocompleter:function(e,t,n,i=1){return{getCompletions:function(o,r,s,a,l){var d=o.session.getTokenAt(s.row,s.column);a.length<i||e&&!e.includes(d.type)?l(null,[]):l(null,t.map((function(e){return{caption:e,value:e,meta:n}})))}}},addDoubleTapDetector:function(e,t){e.lastTap=0,e.tapTimeout=0,e.addEventListener("touchend",(function(n){var i=(new Date).getTime(),o=i-e.lastTap;clearTimeout(e.tapTimeout),o<500&&o>0?(t(),n.preventDefault()):e.tapTimeout=setTimeout((function(){clearTimeout(e.tapTimeout)}),500),e.lastTap=i}))},uniqueSplit:function(e,t=" "){return[...new Set(e.split(t).filter(e=>e))]},getHighestZ:function(t){let n=Number.NEGATIVE_INFINITY;return e(t).children().each((function(){let t=parseInt(e(this).css("z-index"))||0;t>n&&(n=t)})),n},clamp:function(e,t,n){return Math.max(Math.min(e,n),t)},rectanglesOverlap:function(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)},stripHtml:function(e){for(;e.indexOf("<")>=0;)e=e.replace("<","&lt;");for(;e.indexOf(">")>=0;)e=e.replace(">","&gt");return e},xmlToObject:function(e){var t=[];if((e=e.childNodes.item(0)).hasChildNodes())for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes.item(n);if(i.hasChildNodes()){for(var o={},r=!1,s=0;s<i.childNodes.length;s++){var a=i.childNodes.item(s);if("#text"!=a.nodeName&&(r=!0,a.hasChildNodes()?o[a.nodeName]=a.childNodes.item(0).nodeValue:o[a.nodeName]="",a.attributes.length>0)){o[a.nodeName]={};for(var l=0;l<a.attributes.length;l++){var d=a.attributes.item(l);o[a.nodeName][d.nodeName]=d.nodeValue}}}r&&t.push(o)}}return t},now:Date.now||function(){return(new Date).getTime()},getPublicPath:function(e){return window.getPublicVsCodeWebviewUri?window.getPublicVsCodeWebviewUri(e):"public"+(e?"/"+e:"")}}}.call(this,n("EVdn"))},owJe:function(e,t,n){(function(e){var i=n("jXEy"),o=n("oj90"),r=o.Utils.getPublicPath("dictionaries/en/index.dic"),s=o.Utils.getPublicPath("dictionaries/en/index.aff");e("<style type='text/css'>.ace_marker-layer .misspelled { position: absolute; z-index: -2; border-bottom: 1px solid red; margin-bottom: -1px; }</style>").appendTo("head"),e("<style type='text/css'>.misspelled { border-bottom: 1px solid red; margin-bottom: -1px; }</style>").appendTo("head");var a=null;function l(e){var t=e.split(/\s+|\.|\,|\?|\\|\/|\!|\[|\]|"|'|;|:|`|\+|\-|\&|\$|@|~|#|>|<|_|\)|\(|£|\^|%|\*|„|“|\||[0-9]+/g),n=0,i=[];for(word in t){var o=t[word];a.correct(o)||(i[i.length]=[n,n+t[word].length]),n+=t[word].length+1}return i}t.load_dictionary=function(t){console.info(`Loading ${t} hunspell dictionary locally`),r=o.Utils.getPublicPath(`dictionaries/${t}/index.dic`),s=o.Utils.getPublicPath(`dictionaries/${t}/index.aff`),e.get(r,(function(e){dicData=e})).fail((function(){console.error(t+" not found locally. Loading dictionary from server instead..."),r=`https://raw.githubusercontent.com/wooorm/dictionaries/master/dictionaries/${t}/index.dic`,s=`https://raw.githubusercontent.com/wooorm/dictionaries/master/dictionaries/${t}/index.aff`,e.get(r,(function(e){dicData=e})).done((function(){e.get(s,(function(e){affData=e})).done((function(){console.log("Dictionary loaded from server"),a=new i(affData,dicData),d=!0}))}))})).done((function(){e.get(s,(function(e){affData=e})).done((function(){console.log("Dictionary loaded locally"),a=new i(affData,dicData),d=!0}))}))},t.misspelled=l;var d=!0,c=!1,h=[];function u(){if(null!=a&&!c&&d){c=!0;var e=ace.edit("editor").getSession();f();try{var t=ace.require("ace/range").Range,n=e.getDocument().getAllLines();for(var i in n){var o=l(n[i]);for(var r in o){var s=new t(i,o[r][0],i,o[r][1]);h[h.length]=e.addMarker(s,"misspelled","typo",!0)}}}finally{c=!1,d=!1}}}t.spell_check=u;var p=!1;function f(){var e=ace.edit("editor").getSession();for(var t in h)e.removeMarker(h[t]);h=[];var n=e.getDocument().getAllLines();for(var t in n)e.removeGutterDecoration(t,"misspelled")}t.enable_spellcheck=function(){p=!0,ace.edit("editor").getSession().on("change",(function(e){p&&(d=!0,u())})),d=!0,u()},t.disable_spellcheck=function(){p=!1,f()},t.clear_spellcheck_markers=f,t.suggest_word_for_misspelled=function(e){var t=a.suggest(e);return 0!==t.length&&t}}).call(this,n("EVdn"))},pLxK:function(e){e.exports=JSON.parse('{"a":"0.4.144"}')},pYPP:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));const i=function(t){const n=this,i=window.vsCodeApi?{getItem:()=>{},setItem:()=>{}}:window.localStorage;this.storage=i,e.extenders.persist=function(e,t){return e.subscribe((function(e){i.setItem(t,e)})),e},this.apply=function(){t.setTheme(n.theme()),t.setLanguage(n.language()),t.toggleInvertColors(),t.setMarkupLanguage(n.markupLanguage()),t.workspace.setThrottle(n.redrawThrottle()),t.setGistCredentials({token:n.gistToken(),file:null!==n.gistFile()?n.gistFile().split("/").pop():null})},this.validateGridSize=function(){n.gridSize()<20&&n.gridSize(20),n.gridSize()>200&&n.gridSize(200),n.gridSize(parseInt(n.gridSize())),t.initGrid()},this.theme=e.observable(i.getItem("theme")||"classic").extend({persist:"theme"}),this.language=e.observable(i.getItem("language")||"en-GB").extend({persist:"language"}),this.redrawThrottle=e.observable(parseInt(i.getItem("redrawThrottle")||"50")).extend({persist:"redrawThrottle"}),this.gistToken=e.observable(i.getItem("gistToken")).extend({persist:"gistToken"}),this.gistFile=e.observable(i.getItem("gistFile")).extend({persist:"gistFile"}),this.spellcheckEnabled=e.observable(null===i.getItem("spellcheckEnabled")||"true"===i.getItem("spellcheckEnabled")).extend({persist:"spellcheckEnabled"}),this.transcribeEnabled=e.observable(!1),this.autoCloseTags=e.observable(null===i.getItem("autoCloseTags")||"true"===i.getItem("autoCloseTags")).extend({persist:"autoCloseTags"}),this.autocompleteSuggestionsEnabled=e.observable(null===i.getItem("autocompleteSuggestionsEnabled")||"true"===i.getItem("autocompleteSuggestionsEnabled")).extend({persist:"autocompleteSuggestionsEnabled"}),this.autoCloseBrackets=e.observable(null===i.getItem("autoCloseBrackets")||"true"===i.getItem("autoCloseBrackets")).extend({persist:"autoCloseBrackets"}),this.invertColorsEnabled=e.observable(null!==i.getItem("invertColorsEnabled")&&"true"===i.getItem("invertColorsEnabled")).extend({persist:"invertColorsEnabled"}),this.snapGridEnabled=e.observable(null!==i.getItem("snapGridEnabled")&&"true"===i.getItem("snapGridEnabled")).extend({persist:"snapGridEnabled"}),this.gridSize=e.observable(parseInt(i.getItem("gridSize")||"40")).extend({persist:"gridSize"}),this.createNodesEnabled=e.observable(null===i.getItem("createNodesEnabled")||"true"===i.getItem("createNodesEnabled")).extend({persist:"createNodesEnabled"}),this.editorStatsEnabled=e.observable(null!==i.getItem("editorStatsEnabled")&&"true"===i.getItem("editorStatsEnabled")).extend({persist:"editorStatsEnabled"}),this.markupLanguage=e.observable(i.getItem("markupLanguage")||"bbcode").extend({persist:"markupLanguage"}),this.filetypeVersion=e.observable(i.getItem("filetypeVersion")||"1").extend({persist:"filetypeVersion"}),this.lineStyle=e.observable(i.getItem("lineStyle")||"straight").extend({persist:"lineStyle"}),this.alwaysOpenNodesInVisualStudioCodeEditor=e.observable(null!==i.getItem("alwaysOpenNodesInVisualStudioCodeEditor")&&"true"===i.getItem("alwaysOpenNodesInVisualStudioCodeEditor")).extend({persist:"alwaysOpenNodesInVisualStudioCodeEditor"}),this.editorSplitDirection=e.observable(i.getItem("editorSplitDirection")||"left").extend({persist:"editorSplitDirection"}),this.editorSplit=e.observable(null!==i.getItem("editorSplit")&&"true"===i.getItem("editorSplit")).extend({persist:"editorSplit"}),this.editorSplitSize=e.observable(i.getItem("editorSplitSize")||"50%").extend({persist:"editorSplitSize"})}}).call(this,n("Z1dp"))},quRS:function(e,t,n){},tUqF:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const i=n("Wd8k"),o=n("L8pc"),r=new i.Runner,s=n("+qE3").EventEmitter;var a=function(){this.visitedNodes=[];this.node={title:""};let e=new s;this.emiter=e;let t=[];this.commandsPassedLog=t;this.commandPassed="";let n=!0;this.finished=n,this.scrollTextStyle=!1,this.visitedChapters=[],this.self=this,this.vnChoiceSelectionCursor=">",this.startTimeWait,this.vnSelectedChoice=-1,this.vnTextScrollInterval,this.storyChapter="",this.choices={};let i,a,l,d,c,h,u,p,f=null;this.vnSelectChoice=()=>{(new Date).getTime()-this.startTimeWait<1e3||(this.choices[this.storyChapter].push(d.options[this.vnSelectedChoice]),d.select(this.vnSelectedChoice),this.emiter.emit("choiceMade",d.options[this.vnSelectedChoice]),a="",i=void 0,d=self.goToNext(),this.vnSelectedChoice=-1,this.changeTextScrollSpeed(111))},this.vnUpdateChoice=(t=0)=>{if(this.vnSelectedChoice<0)return;let n=this.vnSelectedChoice+t;n>d.options.length-1?n=0:n<0&&(n=d.options.length-1),this.vnSelectedChoice=n,i=document.createElement("DIV"),d.options.forEach((e,t)=>{const n=document.createElement("DIV");t==this.vnSelectedChoice?n.innerHTML=`${this.vnChoiceSelectionCursor} [${e}]`:n.innerHTML=`${this.vnChoiceSelectionCursor.replace(/.*/gm,"&nbsp;")} [${e}]`,n.onclick=e=>{e.stopPropagation(),this.vnSelectedChoice=t,this.vnUpdateChoice()},n.ondblclick=e=>{e.stopPropagation(),this.vnSelectedChoice=t,this.vnSelectChoice()},n.className="storyPreviewChoiceButton",i.appendChild(n)}),e.emit("choiceUpdated",this.vnSelectedChoice),self.updateVNHud()},this.changeTextScrollSpeed=(t=0)=>{if(t!==this.vnTextScrollInterval){if(this.vnTextScrollInterval=t,clearInterval(h),f<0){if(this.isFinishedParsing(d))return void e.emit("finished");if("TextResult"===d.constructor.name)return a=d.text,f=0,e.emit("textResult",a),void this.changeTextScrollSpeed(220);"OptionsResult"===d.constructor.name&&-1===this.vnSelectedChoice&&(this.vnSelectedChoice=0,this.vnUpdateChoice(),this.startTimeWait=(new Date).getTime())}0!==t&&(h=setInterval(this.scrollUpdateText,t))}},self.goToNext=()=>{const e=c.next().value;if(!this.isFinishedParsing(e))return"TextResult"===e.constructor.name&&e.data&&this.node.title!==e.data.title&&(a="",f=-1,this.node=self.jsonCopy(e.data),this.visitedNodes.push(e.data.title),this.emiter.emit("startedNode",this.node)),e},this.isFinishedParsing=e=>(void 0===e||null===d)&&(n||(n=!0,f=-1),n=!0,n),this.runCommand=()=>{e.emit("commandCall",d.text),t.push(d.text),d=self.goToNext(),this.isFinishedParsing(d)||("TextResult"===d.constructor.name&&(a+="\n"+d.text,e.emit("textResult",d.text)),"OptionsResult"===d.constructor.name&&(f=-1))},this.scrollUpdateText=()=>{if(!this.isFinishedParsing(d))if(f<0)"CommandResult"===d.constructor.name&&this.runCommand();else if(f>a.length){if("TextResult"===d.constructor.name){if(d=self.goToNext(),this.isFinishedParsing(d))return;"CommandResult"===d.constructor.name?this.runCommand():("TextResult"===d.constructor.name||"OptionsResult"===d.constructor.name)&&(f=-1)}}else"TextResult"===d.constructor.name&&(f+=1,l=a.substring(0,f),self.updateVNHud())},self.updateVNHud=()=>{if("TextResult"===d.constructor.name){for(;l.lastIndexOf("[img]")>l.lastIndexOf("[/img]");)f+=1,l=a.substring(0,f);for(;l.lastIndexOf("[")>l.lastIndexOf("]");)f+=1,l=a.substring(0,f)}this.scrollTextStyle&&(document.getElementById(u).innerHTML=o.parse(l)+"<br>"),void 0!==i&&(this.scrollTextStyle||(document.getElementById(u).innerHTML=""),document.getElementById(u).appendChild(i))},this.terminate=()=>{try{let t=document.getElementById(u);t&&(t.innerHTML=""),t=document.getElementById(p),t&&(t.innerHTML=""),i=void 0,e.removeAllListeners(),this.finished=!0}catch(e){console.warn(e)}},this.initYarn=(t,i,s,a,l,d,c)=>{const h=["#f5ff6f","#44fe66","#e00ec0","#e93ecf","#0ec0e0","#3ecfe9","#e4dbcb","#978e7e","#666","#2f919a","deeppink","black","#97E1E9","#576574","#6EA5E0","#9EDE74","#FFE374","#F7A666","#C47862"],f=["__̴ı̴̴̡̡̡ ̡͌l̡̡̡ ̡͌l̡*̡̡ ̴̡ı̴̴̡ ̡̡͡| ̲▫̲͡ ̲̲͡▫̲̲͡͡ ̲|̡̡̡ ̡, ̴̡ı̴̡̡ ̡͌l̡̡̡̡.___","°º¤ø,¸¸,ø¤º°`°º¤ø,¸,ø¤°º¤ø,¸¸,ø¤º°`°º¤ø,¸","(===||:::::::::::::::>","¸.·´¯`·.´¯`·.¸¸.·´¯`·.¸><(((º>","=^..^=","|==|iiii|>-----"," ¦̵̱ ̵̱ ̵̱ ̵̱ ̵̱(̢ ̡͇̅└͇̅┘͇̅ (▤8כ−◦","(♥_♥)","龴ↀ◡ↀ龴","☁ ▅▒░☼‿☼░▒▅ ☁,","▓⚗_⚗▓","<:3 )~~~","(╯°□°）╯︵ ┻━┻","●▬▬▬▬๑۩۩๑▬▬▬▬▬●","(/)(Ö,,,,Ö)(/)","/)^3^(\\","( . Y . )","< )))) ><","(ノಠ益ಠ)ノ彡","d(^o^)b¸¸♬·¯·♩¸¸♪·¯·♫¸¸","O=('-'Q)","-`ღ´-","ˁ(⦿ᴥ⦿)ˀ","(╥﹏╥)","✲´*。.❄¨¯`*✲。❄。*。¨¯`*✲","▂▃▅▇█▓▒░۩۞۩        ۩۞۩░▒▓█▇▅▃▂","( •_•)O*¯`·.¸.·´¯`°Q(•_• )","┻━┻︵  (°□°)/ ︵ ┻━┻","|̲̲̲͡͡͡ ̲▫̲͡ ̲̲̲͡͡π̲̲͡͡ ̲̲͡▫̲̲͡͡ ̲|̡̡̡ ̡ ̴̡ı̴̡̡ ̡͌l̡ ̴̡ı̴̴̡ ̡l̡*̡̡ ̴̡ı̴̴̡ ̡̡͡|̲̲̲͡͡͡ ̲▫̲͡ ̲̲̲͡͡π̲̲͡͡ ̲̲͡▫̲̲͡͡ |","❤◦.¸¸.  ◦✿","ʕʘ̅͜ʘ̅ʔ","( ๏ Y ๏ )","ʕ•̫͡•ʕ*̫͡*ʕ•͓͡•ʔ-̫͡-ʕ•̫͡•ʔ*̫͡*ʔ-̫͡-ʔ","(っ◕‿◕)っ","❚█══█❚","─=≡Σ((( つ◕ل͜◕)つ","^ↀᴥↀ^","༼ つ ͡◕ Ѿ ͡◕ ༽つ","ᕦ(ò_óˇ)ᕤ","┬┴┬┴┤ ͜ʖ ͡°) ├┬┴┬┴","[̲̅$̲̅(̲̅5)̲̅$̲̅]","(ꈍ⌓ꈍ✿)","(๑•́ ₃ •̀๑) ♡","( • )( • )ԅ(≖⌣≖ԅ)","（。々°）","⊂(´･◡･⊂ )∘˚˳°","( ㅅ )","(ﾉ☉ヮ⚆)ﾉ ⌒*:･ﾟ✧","(－‸ლ)","(‿|‿)","(㇏(•̀ᵥᵥ•́)ノ)","ʚ✟⃛ɞ","(′ꈍωꈍ‵)","♚ ♛ ♜ ♝ ♞ ♟ ♔ ♕ ♖ ♗ ♘ ♙","(´ᴗ`)(´ᴗ`)","♥(´∀｀)","ฅ(˵●ﻌ●˵)ฅ"];if(p=l,u=s,this.yarnDataObject=t,this.startChapter=i,this.resourcesPath=a,this.finished=!1,this.scrollTextStyle="npc"===d,document.getElementById(p).innerHTML="<br/><font color='red'>🚥Press/Hold Z or 📱Double-click/Tap to advance</font><br/>",e.on("startedNode",(function(e){document.getElementById(p).innerHTML+="<br/><br/><font color='#581845'>📜 --- Loaded next node ---</font>",document.getElementById(p).innerHTML+=`<font color='${h[Math.floor(Math.random()*h.length)]}'>  ${f[Math.floor(Math.random()*f.length)]}</font>`,document.getElementById(p).innerHTML+="<br/><font color='CADETBLUE'>&ensp;&ensp;&ensp;Title: "+e.title+"</font>",e.tags.length>0&&e.tags[0].length>0&&(document.getElementById(p).innerHTML+="<br/><font color='deeppink'>&ensp;&ensp;&ensp;Tags: "+e.tags+"</font>")})),e.on("choiceMade",(function(e){this.scrollTextStyle?document.getElementById(p).innerHTML+="<br/><font color='fuchsia'>🐙Player chose: >"+e+"</font>":document.getElementById(p).innerHTML+=`<p class="story-playtest-bubble story-playtest-answer answer-post">${o.parse(e)}</p>`})),e.on("commandCall",(function(e){document.getElementById(p).innerHTML+=`<br/><font color='green'>🐣Command call:</font> <font color='red'>&lt;&lt;${e}&gt;&gt;</font>`})),this.scrollTextStyle||(e.on("textResult",(function(e){document.getElementById(p).innerHTML+=`<p class="story-playtest-bubble">${o.parse(e)}</p>`,document.getElementById(u).innerHTML='<span class="story-animated-dots"><p>.</p><p>.</p><p>.</p></span>',document.getElementById(u).className="story-playtest-bubble",document.getElementById(p).scrollTo({top:document.getElementById(p).scrollHeight,left:0,behavior:"smooth"})})),e.on("choiceUpdated",(function(e){document.getElementById(u).className="story-playtest-answer"}))),e.on("finished",(function(){n=!0,e.removeAllListeners()})),Array.isArray(t))r.load(t);else{if(!("nodes"in t))return;r.load(t.nodes)}this.loadYarnChapter(i),r.variables.data={},Object.keys(c).forEach((function(e){const t=c[e];console.log(t),r.variables.set(e,t)}))},this.loadYarnChapter=e=>{n=!1,this.storyChapter=e,this.choices[this.storyChapter]=[],this.visitedChapters.push(e),c=r.run(e),d=self.goToNext(),a=d.text,this.changeTextScrollSpeed(100)},this.wasChoiceMade=(e,t=this.storyChapter)=>!!this.choices[t].includes(e),this.timesNodeWasVisited=e=>{let t=0;return this.visitedNodes.forEach((n,i)=>{n===e&&(t+=1)}),t},self.jsonCopy=e=>JSON.parse(JSON.stringify(e))}},wt9v:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="wt9v"}},[["e6Wu",1,2]]]);